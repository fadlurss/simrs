if (self.CavalryLogger) { CavalryLogger.start_js(["XNX4U"]); }

__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b){this.$3=null;this.$4=0;this.$1=a;a=b||{};b=a.taskTimeout;this.$5=b||0}var b=a.prototype;b.start=function(){this.$1.setOnTaskUpdated(this.$6.bind(this));var a=this.$1.dequeue();a&&this.$7(a,"immediate")};b.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};b.$6=function(a,b){b=this.$7(a,b);b&&this.$1.remove(a)};b.$7=function(a,b){__p&&__p();var c=this;if(this.$2&&b!=="immediate")return!1;this.$2&&this.$2.cancel();b=a.run()["catch"](function(a){});this.$5>0&&(b=g.race([b,new g(function(a,b){h(a,c.$5)})]));this.$4++;this.$2=a;b.then(function(){c.$4--;c.$2===a&&(c.$2=null);if(c.$4===0){var b=c.$1.dequeue();b&&c.$7(b,"immediate")}});return!0};return a}();e.exports=a}),null);