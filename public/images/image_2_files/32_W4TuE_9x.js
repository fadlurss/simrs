if (self.CavalryLogger) { CavalryLogger.start_js(["iIkr4"]); }

__d("ExplicitRegistrationDispatcherUtils",["emptyFunction","gkx","monitorCodeUse","setImmediate"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";a=!1;b=g;e.exports={warn:b,inlineRequiresEnabled:a}}),null);
__d("ExplicitRegistrationDispatcher",["Dispatcher_DEPRECATED","ExplicitRegistrationDispatcherUtils","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){var c;b=b.strict;c=a.call(this)||this;c.$ExplicitRegistrationDispatcher2=b;c.$ExplicitRegistrationDispatcher1={};return c}var c=b.prototype;c.explicitlyRegisterStore=function(a){a=a.getDispatchToken();this.$ExplicitRegistrationDispatcher1[a]=!0;return a};c.explicitlyRegisterStores=function(a){var b=this;return a.map(function(a){return b.explicitlyRegisterStore(a)})};c.register=function(b,c){var d=this;d=this.__genID(c);this.$ExplicitRegistrationDispatcher1[d]=!1;c=a.prototype.register.call(this,this.$ExplicitRegistrationDispatcher4.bind(this,d,b),d);return c};c.$ExplicitRegistrationDispatcher4=function(a,b,c){(this.$ExplicitRegistrationDispatcher1[a]||!this.$ExplicitRegistrationDispatcher2)&&this.__invokeCallback(a,b,c)};c.unregister=function(b){a.prototype.unregister.call(this,b),delete this.$ExplicitRegistrationDispatcher1[b]};c.__getMaps=function(){};return b}(g);e.exports=a}),null);
__d("ExplicitRegistrationReactDispatcher",["ExplicitRegistrationDispatcher","ReactDOM"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.dispatch=function(b){var c=this;h.unstable_batchedUpdates(function(){a.prototype.dispatch.call(c,b)})};return b}(g);e.exports=a}),null);
__d("MActorListDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f,g){"use strict";e.exports=new g({strict:!0})}),null);
__d("MActorListPayloadTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER_ACTOR_LIST:"composer_actor_list",REQUEST_COMPOSER_ACTOR_LIST:"request_composer_actor_list",REQUEST_UFI_ACTOR_LIST:"request_ufi_actor_list",UFI_ACTOR_LIST:"ufi_actor_list"})}),null);
__d("XActorListController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/actor_list/",{actor_list_id:{type:"Int",required:!0},payload_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MActorListStore",["EventEmitter","MActorListDispatcher","MActorListPayloadTypes","MRequest","XActorListController"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l={},m={};a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){__p&&__p();var b;b=a.call(this)||this;b.dispatchToken=h.register(function(a){switch(a.type){case i.REQUEST_COMPOSER_ACTOR_LIST:case i.REQUEST_UFI_ACTOR_LIST:b.$MActorListStore1(a.data.id,a.type);break;case i.COMPOSER_ACTOR_LIST:case i.UFI_ACTOR_LIST:Object.assign(l,a.data.actors);a.data.actors&&(m[a.data.id]=Object.keys(a.data.actors));b.emit("change");break}});return b}var c=b.prototype;c.getDispatchToken=function(){return this.dispatchToken};c.$MActorListStore1=function(a,b){a=k.getURIBuilder().setInt("actor_list_id",a).setEnum("payload_type",b).getURI();new j(a).send()};c.getActorData=function(a){a=l[a];return a?a:null};c.getActorList=function(a){a=m[a];return a?a.slice():null};return b}(g);e.exports=new a()}),null);
__d("MActorSelectorFlyout.react",["MFlyout","MLayerDestroyOnHide","MLayerHideOnBlur","ReactDOM","ReactLayer"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();a=k.createClass({createLayer:function(a){var b=this.props,c=b.shown,d=b.className,e=b.contextRef,f=b.isNux;b=babelHelpers.objectWithoutPropertiesLoose(b,["shown","className","contextRef","isNux"]);d=d?d.split(" "):[];d.push("accelerate");f=f?[h]:[h,i];b=new g(babelHelpers["extends"]({},b,{addedBehaviors:f,classNames:d,context:j.findDOMNode(e()),margin:"none",nubalign:"center",offsetY:0,width:"100%"}),a);b.conditionShow(c);return b},receiveProps:function(a,b){this.updateBehaviors(b.behaviors,a.behaviors),this.layer&&this.layer.conditionShow(a.shown)}});e.exports=a}),null);
__d("MActorSelector.react",["CurrentUser","Image.react","Layout.react","MActorListDispatcher","MActorListStore","MActorSelectorFlyout.react","MXUISpinner.react","React","ReactLayeredComponentMixin_DEPRECATED","ShimButton.react","Stratcom","SubscriptionsHandler","cx","fbglyph","fbt","invariant","ix"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){__p&&__p();var x=i.Column,y=i.FillColumn;a=n.PropTypes;var z=20,A=32;c=n.createClass({displayName:"MActorSelector",mixins:[o],propTypes:{actorListID:a.string.isRequired,actorListRequestPayloadType:a.string.isRequired,coverEnabled:a.bool.isRequired,flyoutTitle:a.node,nuxBody:a.node,onChange:a.func.isRequired,onCompleteNux:a.func,selectedActorID:a.string.isRequired,selectedActorProfilePicURI:a.string.isRequired,showLoadingIndicator:a.bool.isRequired,showNux:a.bool.isRequired,showFlyoutOnRender:a.bool},getInitialState:function(){j.explicitlyRegisterStore(b("MActorListStore"));var a=k.getActorList(this.props.actorListID);return{actorListLoaded:a!=null,hasBeenClicked:!1,showFlyout:!!this.props.showFlyoutOnRender}},render:function(){__p&&__p();var a=this,b=null,c=null;this._isCovered()?c=w("95410"):(b=n.createElement(h,{className:"_jvo _3-99",src:w("142926")}),c=this.props.selectedActorProfilePicURI);var d=null;this.props.showLoadingIndicator&&(d=n.createElement(m,{className:"_1-gi"}));return n.createElement("div",{className:"_2g0e","data-sigil":"touchable",onClick:function(){if(a._ignoreNextClick){a._ignoreNextClick=!1;return}a.props.showNux&&(a.props.onCompleteNux&&a.props.onCompleteNux());a.setState({hasBeenClicked:!0,showFlyout:!a.state.showFlyout})},onMouseDown:function(){a._ignoreNextClick=!1},onTouchStart:function(){a._ignoreNextClick=!1},role:"presentation"},d,n.createElement(h,{className:"_1e_c",height:z,ref:"profilePic",src:c,width:z}),b)},renderLayers:function(){__p&&__p();var a=this;if(!this.state.showFlyout)return this.props.showNux?n.createElement(l,{isNux:!0,contextRef:function(){return a.refs.profilePic},position:"above",shown:this.props.showNux},n.createElement(p,{className:"_3nv2","data-sigil":"touchable",onClick:function(){a.props.onCompleteNux&&a.props.onCompleteNux()}},n.createElement(h,{src:w("143543")})),n.createElement("div",{className:"_2ph_"},this.props.nuxBody,n.createElement("div",{className:"_2pie"},n.createElement("a",{href:this.props.settingsURI},u._("Post Attribution Settings"))))):null;if(this.state.actorListLoaded){var b=k.getActorList(this.props.actorListID);Array.isArray(b)||v(0,4865);var c=[];b.map(function(b){var d=k.getActorData(b);d||v(0,1770);var e=null;b===a.props.selectedActorID&&(e=n.createElement(x,null,n.createElement("div",{className:"_2pi3"},n.createElement(h,{src:w("138598")}))));c.push(n.createElement("li",{className:"_ru0","data-sigil":"touchable",key:b,onClick:function(){b!==a.props.selectedActorID&&a.props.onChange(b)}},n.createElement(i,null,n.createElement(x,null,n.createElement(h,{className:"_1e_c",height:A,src:d.profilePicURI,width:A})),n.createElement(y,null,n.createElement("div",{className:"_3-9a _52jh"},d.name)),e)))});b=null;this.props.flyoutTitle&&(b=n.createElement("li",{className:"_ru0 _52j9",key:"title"},this.props.flyoutTitle));b=n.createElement("ul",null,b,c)}else b=n.createElement("div",{className:"_ru1"},n.createElement(m,{size:"large"}));return n.createElement(l,{contextRef:function(){return a.refs.profilePic},key:"mActorSelectorFlyout_"+this.props.actorListID+"_"+(this.state.actorListLoaded?this.props.selectedActorID:"loading"),onToggle:function(b){b||(a._ignoreNextClick=!0,a.setState({showFlyout:b}))},position:"below",shown:!0,logShown:this.state.actorListLoaded?"actor-selector-popup":null},b)},_subscriptionsHandler:null,_ignoreNextClick:!1,componentDidMount:function(){var a=this;this._subscriptionsHandler=new r();this._subscriptionsHandler.addSubscriptions(k.addListener("change",function(){var b=k.getActorList(a.props.actorListID);b&&!a.state.actorListLoaded&&a.setState({actorListLoaded:!0})}),q.listen("MActorSelector-close",null,function(){a.setState({showFlyout:!1})}))},componentDidUpdate:function(a){if(this.state.showFlyout){var b=k.getActorList(this.props.actorListID);b===null&&j.dispatch({data:{id:this.props.actorListID},type:this.props.actorListRequestPayloadType})}this.props.selectedActorProfilePicURI!==a.selectedActorProfilePicURI&&this.setState({showFlyout:!1})},componentWillUnmount:function(){this._subscriptionsHandler&&(this._subscriptionsHandler.release(),this._subscriptionsHandler=null)},_isCovered:function(){return this.props.coverEnabled&&this.props.selectedActorID===g.getID()&&!this.state.hasBeenClicked}});e.exports=c}),null);
__d("MActorSelectorNuxDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f,g){"use strict";e.exports=new g({strict:!0})}),null);
__d("ActorSelectorNuxTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER:"composer_seen_count",COMPOSER_COVERED:"composer_covered_seen_count",M_COMPOSER:"m_composer_seen_count",M_UFI:"m_ufi_seen_count",UFI:"ufi_seen_count",UFI_TIMELINE:"ufi_timeline_seen_count",UFI_TIMELINE_COVERED:"ufi_timeline_covered_seen_count"})}),null);
__d("MActorSelectorNuxPayloadTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER_NUX_STATUS:"composer_nux_status",COMPOSER_NUX_SEEN:"composer_nux_seen",REQUEST_COMPOSER_NUX_STATUS:"request_composer_nux_status",REQUEST_UFI_NUX_STATUS:"request_ufi_nux_status",UFI_NUX_SEEN:"ufi_nux_seen",UFI_NUX_STATUS:"ufi_nux_status"})}),null);
__d("XActorSelectorNuxSeenWriteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/actor_selector/nux/mark_seen/",{nux_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XActorSelectorNuxStatusController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/actor_selector/nux/status/",{actor_selector_id:{type:"String",required:!0},payload_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MActorSelectorNuxStore",["ActorSelectorNuxTypes","EventEmitter","MActorSelectorNuxDispatcher","MActorSelectorNuxPayloadTypes","MRequest","XActorSelectorNuxSeenWriteController","XActorSelectorNuxStatusController","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o={},p={},q=null,r=!1,s=!1;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){__p&&__p();var b;b=a.call(this)||this;b.dispatchToken=i.register(function(a){__p&&__p();switch(a.type){case j.COMPOSER_NUX_SEEN:b.$MActorSelectorNuxStore1(a.type);r=!0;b.emit("change");break;case j.UFI_NUX_SEEN:b.$MActorSelectorNuxStore1(a.type);s=!0;b.emit("change");break;case j.COMPOSER_NUX_STATUS:a.data&&(o[a.data.actorSelectorID]=a.data.isEnabled);b.emit("change");break;case j.UFI_NUX_STATUS:a.data&&(p[a.data.actorSelectorID]=a.data.isEnabled);b.emit("change");break;case j.REQUEST_COMPOSER_NUX_STATUS:a.data&&b.$MActorSelectorNuxStore2(a.type,a.data.actorSelectorID);break;case j.REQUEST_UFI_NUX_STATUS:a.data&&(q===null&&(q=a.data.actorSelectorID),b.$MActorSelectorNuxStore2(a.type,a.data.actorSelectorID));break}});return b}var c=b.prototype;c.getDispatchToken=function(){return this.dispatchToken};c.canShowComposerNux=function(a){return r?!1:o[a]||!1};c.canShowUFINux=function(a){if(s)return!1;return a!==q?!1:p[a]||!1};c.getUFIActorSelectorIDToShowNux=function(){return q};c.$MActorSelectorNuxStore1=function(a){var b=null;switch(a){case j.COMPOSER_NUX_SEEN:b=g.M_COMPOSER;break;case j.UFI_NUX_SEEN:b=g.M_UFI;break;default:n(0,522)}a=l.getURIBuilder().setEnum("nux_type",b).getURI();new k(a).send()};c.$MActorSelectorNuxStore2=function(a,b){b=m.getURIBuilder().setString("actor_selector_id",b).setEnum("payload_type",a).getURI();new k(b).send()};return b}(h);e.exports=new a()}),null);
__d("XFeedUFICommentHistoryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/ufi/{comment_token}/history/",{comment_token:{type:"String",required:!0},replace_id:{type:"String",required:!0}})}),null);
__d("XFeedUFICommentsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/ufi/",{fs:{type:"Int"},feedback_target:{type:"String",required:!0},focus_composer:{type:"Bool",defaultValue:!1},replace_id:{type:"String",required:!0},share_id:{type:"String"},action_source:{type:"Int"},__tn__:{type:"String"},_ft_:{type:"String"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"}})}),null);
__d("XFeedUFILikesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/ufi/likes/",{feedback_target:{type:"String",required:!0},replace_id:{type:"String",required:!0},link_data:{type:"String"}})}),null);
__d("XFeedUFIReactionsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/ufi/reactions/",{feedback_target:{type:"String",required:!0},replace_id:{type:"String",required:!0},link_data:{type:"String"}})}),null);
__d("MFeedUFI",["ActorURI","BanzaiLogger","CSS","DOM","MJSEnvironment","MLegacyDataStore","MParent","MRequest","MViewport","Stratcom","Vector","XFeedUFICommentHistoryController","XFeedUFICommentsController","XFeedUFILikesController","XFeedUFIReactionsController","$","cx","ge","getActiveElement","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,aa,ba,ca,da,ea,fa,q,r,ga,s){__p&&__p();var t="feed-ufi",ha="replies-see-more",u="m-inline-reply-composer",ia="m-ufi-no-comments",ja="m-ufi-sticker-suggestions",v={COMMENTS:"comments",LIKES:"likes",REACTIONS:"reactions",HISTORY:"history",NONE:""},w="_1vcf",x="_53xw",ka="preview_rid",la="comment_id",y,z,A,B,C,D,E,F,G,H=null,I=null,J=null;function K(){J&&(i.removeClass(J,w),J=null)}function ma(a){K(),a&&(i.addClass(a,w),J=a)}var L=null;function M(){L&&(i.removeClass(L,x),L=null)}function N(a){M(),a&&(i.addClass(a,x),L=a)}function a(){if(D)return;E=[p.listen("click",[t,"composer-submit"],Ba),p.listen("click","like",ya),p.listen("focus",[t,"textarea"],wa),p.listen("multi-photos-change",null,Ca),p.listen("MCommentEdit:showcomposer",null,Da),p.listen("MUFICommentReplyLink:show-inline-composer",null,Ea),p.listen("MStickerSelector:show-sticker-selector",null,Fa),p.listen("m:page:unload",null,na)];k.IS_APPLE_WEBKIT_IOS&&E.push(p.listen("focus",[t,"editCommentTextArea"],xa));D=!0}function b(){if(!C)return;j.find(C,"*","textarea").blur()}function O(){if(!C)return;j.find(C,"*","textarea").focus()}function c(){if(!C)return;var a=j.find(C,"*","textarea");ga()===a&&o.scrollTo(0,aa.getPos(a).y+a.offsetHeight-o.getScreenHeight())}function P(a){if(!a)return;var b=Q(),c=a.offsetTop;a=a.offsetHeight;var d=c+a,e=b.getScrollTop();b=b.getScrollHeight();var f=e+b;(c<e||d>f)&&(c<e||a>b?W(Math.max(0,c)):W(Math.max(0,e+(d-f))))}function Q(){return l.get(B).scrollArea}function R(){G||(G=j.scry(document,"div",t)[0]);return G}function na(){__p&&__p();while(E.length)E.pop().remove();S();U();K();y=null;z=null;A=null;G=null;D=!1}function S(){if(!H)return;while(H.length)H.pop().remove();H=null}function d(a,b,c,d,e){__p&&__p();e=e||{};var f=e.parent_id,h=e.preload_reply_composer_uri_val;e=e.highlighted_preload_composer_input_id;K();M();pa(d,f,e);var i=$(a);X(!1);if(i===y){c&&O();Z(v.COMMENTS);p.invoke("m:feed-ufi-flyout:comments-displayed");Y();return}y=i;Z(v.NONE);var k=j.find(R(),"div","feed-ufi-comments").id;i=ca.getURIBuilder().setString("feedback_target",i).setString("replace_id",k).setBool("focus_composer",!!c);k=l.get(a).feedback_source;k&&i.setInt("fs",k);c=l.get(a).share_id;c&&i.setString("share_id",c.toString());k=l.get(a).action_source;k===void 0;c=Ia(a);c&&i.setString("_ft_",c);k=5;for(var c=0;c<k;c++){if(b.hash){var m=new URLSearchParams(b.hash);m=m.get("__tn__");if(m){i.setString("__tn__",m.toString());break}}b=b.parentElement}i=i.getURI();h&&i.addQueryData(ka,h);e&&i.addQueryData(la,f||d);m=l.get(a).actor_id;m&&(i=g.create(i,m.toString()));F=new n(i.toString());F.listen("finally",function(){F=null});F.send()}function T(a){a=r(a+"");if(a&&B&&B.contains(a)){W(a.offsetTop);return a}return null}function oa(a){a=a?r(a+""):null;if(a&&B&&B.contains(a)){a=m.bySigil(a,u);if(a)return a}return null}function pa(a,b,c){__p&&__p();U(),a&&(I=p.listen("m:feed-ufi-flyout:comments-displayed",null,function(){setTimeout(function(){var d=!!T(a);if(!d&&b){d=T(b);d=d&&j.scry(d,"*",ha)[0];d&&ma(d)}d=oa(c);d&&N(d)}),U()}))}function U(){I&&(I.remove(),I=null)}function e(a){__p&&__p();a=$(a);X(!0);if(a===z){Z(v.LIKES);return}z=a;Z(v.NONE);var b=j.find(R(),"div","feed-ufi-likes").id;a=da.getURIBuilder().setString("feedback_target",a).setString("replace_id",b).getURI();F=new n(a.toString());F.listen("finally",function(){F=null});F.send()}function q(a,b,c){__p&&__p();a=$(a);X(!b);p.invoke("m:feed-ufi-flyout:reactions-displayed");if(a===A&&!c){Z(v.REACTIONS);return}A=a;Z(v.NONE);p.invoke("m:feed-ufi-flyout:cache-reset");b=j.find(R(),"div","feed-ufi-reactions").id;c=ea.getURIBuilder().setString("feedback_target",a).setString("replace_id",b).getURI();F=new n(c.toString());F.listen("finally",function(){F=null});F.send()}function qa(a){X(!0);Z(v.NONE);var b=j.find(R(),"div","feed-ufi-comment-history").id;a=ba.getURIBuilder().setString("comment_token",a).setString("replace_id",b).getURI();F=new n(a.toString());F.listen("finally",function(){F=null});F.send()}function ra(){Z(v.HISTORY)}function sa(){if(!F)return;y=null;z=null;A=null;F.abort();F=null}function ta(){y=null,z=null,A=null}function ua(a){a=$(a);var b=a!==y&&a!==A;Z(b?v.NONE:v.COMMENTS);b&&p.invoke("m:feed-ufi-flyout:reset",null,{target_id:a})}function va(a,b){Z(v.COMMENTS),B=a,C=b,p.invoke("m:feed-ufi-flyout:comments-displayed"),Y()}function wa(){V()}function V(){p.invoke("click","edit-link")}function xa(a){if(H)return;var b=a.getTarget();H=[p.listen("MScrollArea:scrollend",null,function(){var a=b.selectionStart,c=b.selectionEnd;b.setSelectionRange(Math.abs(a-1),Math.abs(c-1));b.setSelectionRange(a,c)}),p.listen("blur",[t,"editCommentTextArea"],function(){S()})]}function ya(){z=null}function za(a){Z(v.LIKES)}function Aa(a){Z(v.REACTIONS)}function Ba(a){a=a.getNode(u);if(a)return;var b=R();s(function(){var a=j.find(b,"div","feed-ufi-composer-placeholder");W(a.offsetTop)},0);i.conditionClass(j.find(b,"div","feed-ufi-comments"),"_5jc2",!0)}function Ca(){if(!C)return;var a=R();a&&i.conditionClass(R(),"_5rpd",j.scry(C,"input","m-multi-photos-photo").length)}function Da(a){W(a.getData().composer.offsetTop)}function Ea(a){V();a=a.getData();var b=a.composerRoot;b&&(P(b),M(),setTimeout(function(){N(b)},0))}function Fa(a){a=a.getData();a=a.selectorNode;P(a)}function Ga(a){p.invoke("m:feed-ufi-flyout:comment-change"),W(fa(a).offsetTop)}function Ha(){p.invoke("m:feed-ufi-flyout:comment-change");var a=R();j.scry(a,"div","comment").length?Q().reflow():i.conditionClass(j.find(a,"div","feed-ufi-comments"),"_5jc2",!1)}function W(a){if(!B)return;var b=Q();b.reflow();s(function(){var c=b.getMaxScrollTop();a!==void 0&&(c=Math.min(a,c));b.scrollTo(0,c)},100)}function X(a){var b=R();b&&i.conditionClass(b,"_5sd3",a)}function Y(){var a=R();if(a){var b=j.scry(a,"*",ia)[0];a=j.scry(a,"*",ja)[0];b&&b.offsetHeight&&h.log("NullStateCommentsLoggerConfig",{event:"flyout_impression",suggestion_type:a?"sticker":null})}}function Z(a){var b=R();b&&(i.conditionClass(b,"_5m_y",a==v.COMMENTS),i.conditionClass(b,"_5m_z",a==v.LIKES),i.conditionClass(b,"_3b5-",a==v.REACTIONS),i.conditionClass(b,"_5ugy",a==v.HISTORY))}function $(a){return l.get(a).feedback_target.toString()}function Ia(a){a=m.bySigil(a,"story-div");if(!a)return;a=l.get(a).linkdata;return a?a.toString():null}f.blur=b;f.cancel=sa;f.clearCache=ta;f.focus=O;f.getRoot=R;f.init=a;f.loadComments=d;f.loadLikes=e;f.loadReactions=q;f.loadCommentHistory=qa;f.onCommentHistoryLoad=ra;f.onCommentAdded=Ga;f.onCommentRemoved=Ha;f.onCommentsLoad=va;f.onLikesLoad=za;f.onReactionsLoad=Aa;f.reset=ua;f.scrollTo=c}),null);
__d("intersectionObserverEntryIsIntersecting",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.isIntersecting!=null?a.isIntersecting:a.intersectionRatio>0||a.intersectionRect&&(a.intersectionRect.height>0||a.intersectionRect.width>0)}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/2v2plzJQoTQ/
 */
__d("IntersectionObserverFallback",["FBLogger","TimeSlice","containsNode","getElementRect","performanceNow","setInterval","throttle"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n=document.documentElement,o=[];function p(a,b){var c=Math.max(a.top,b.top),d=Math.min(a.bottom,b.bottom),e=Math.max(a.left,b.left);a=Math.min(a.right,b.right);b=a-e;var f=d-c;return b>=0&&f>=0?{top:c,bottom:d,left:e,right:a,width:b,height:f}:void 0}function q(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}var r=function(a){__p&&__p();this.time=a.time;this.target=a.target;this.rootBounds=a.rootBounds;this.boundingClientRect=a.boundingClientRect;this.intersectionRect=a.intersectionRect||q();this.isIntersecting=!!a.intersectionRect;a=this.boundingClientRect;a=a.width*a.height;var b=this.intersectionRect.width*this.intersectionRect.height;a?this.intersectionRatio=b/a:this.intersectionRatio=this.isIntersecting?1:0};a=function(){__p&&__p();function a(a,b){__p&&__p();var c=this;this.THROTTLE_TIMEOUT=100;this.POLL_INTERVAL=null;this.$12=h.guard(m(function(){var a=c.$14(),b=a?c.$15():q();c.$6.forEach(function(d){var e=d.element,f=j(e),g=c.$16(e),h=d.entry,i=a&&g&&!c.$2&&c.$17(e,b);d=d.entry=new r({time:k(),target:e,boundingClientRect:f,rootBounds:b,intersectionRect:i});!h?c.$7.push(d):a&&g?c.$18(h,d)&&c.$7.push(d):h&&h.isIntersecting&&c.$7.push(d)});c.$7.length&&c.$1(c.takeRecords(),c)},this.THROTTLE_TIMEOUT),"IntersectionObserverFallback: checkForIntersections");this.$2=!1;try{window.top.document}catch(a){this.$2=!0}b=b||{};this.$1=a;this.$4=!1;this.$6=[];this.$7=[];this.$8=this.$9(b.rootMargin);this.thresholds=this.$10(b.threshold);this.root=b.root||null;this.rootMargin=this.$8.map(function(a){return a.value+a.unit}).join(" ")}var b=a.prototype;b.$10=function(a){a=a||[0];Array.isArray(a)||(a=[a]);return a.sort().filter(function(a,b,c){return a!==c[b-1]})};b.$9=function(a){a=a||"0px";a=a.split(/\s+/).map(function(a){a=/^(-?\d*\.?\d+)(px|%)$/.exec(a);return{value:parseFloat(a[1]),unit:a[2]}});a[1]=a[1]||a[0];a[2]=a[2]||a[0];a[3]=a[3]||a[1];return a};b.$11=function(){this.$4||(this.$4=!0,this.$12(),this.POLL_INTERVAL?this.$5=l(this.$12,this.POLL_INTERVAL):(window.addEventListener("resize",this.$12),document.addEventListener("scroll",this.$12),"MutationObserver"in window&&(this.$3=new MutationObserver(this.$12),this.$3.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))};b.$13=function(){this.$4&&(this.$4=!1,this.$5&&(clearInterval(this.$5),this.$5=void 0),window.removeEventListener("resize",this.$12),document.removeEventListener("scroll",this.$12),this.$3&&(this.$3.disconnect(),this.$3=void 0))};b.$17=function(a,b){__p&&__p();var c=window.getComputedStyle(a);if(!c||c.display=="none")return void 0;c=j(a);c=c;a=a.parentElement;var d=!1;while(!d){var e=null;a==this.root||a&&a.nodeType!=1?(d=!0,e=b):a&&window.getComputedStyle(a).overflow!="visible"&&(e=j(a));if(e){c=p(e,c);if(!c)break}a=a&&a.parentElement}return c};b.$15=function(){var a;if(this.root)a=j(this.root);else{var b=document.documentElement,c=document.body,d=b&&b.clientWidth||c&&c.clientWidth;b=b&&b.clientHeight||c&&c.clientHeight;a={top:0,left:0,right:d,width:d,bottom:b,height:b}}return this.$19(a)};b.$19=function(a){var b=this.$8.map(function(b,c){return b.unit=="px"?b.value:b.value*(c%2?a.width:a.height)/100});b={top:a.top-b[0],right:a.right+b[1],bottom:a.bottom+b[2],left:a.left-b[3],width:0,height:0};b.width=b.right-b.left;b.height=b.bottom-b.top;return b};b.$18=function(a,b){__p&&__p();a=a&&a.isIntersecting?a.intersectionRatio||0:-1;b=b.isIntersecting?b.intersectionRatio||0:-1;if(a===b)return!1;for(var c=0;c<this.thresholds.length;c++){var d=this.thresholds[c];if(d==a||d==b||d<a!==d<b)return!0}return!1};b.$14=function(){return!this.root||i(n,this.root)};b.$16=function(a){var b=this.root||n;return i(b,a)};b.$20=function(){o.indexOf(this)<0&&o.push(this)};b.$21=function(){var a=o.indexOf(this);a!=-1&&o.splice(a,1)};b.observe=function(a){__p&&__p();if(!a){g("io").warn("IntersectionObserverFallback target does not exist");return}if(this.$6.some(function(b){return b.element==a}))return;this.$20();this.$6.push({element:a,entry:null});this.$11();this.$12()};b.unobserve=function(a){this.$6=this.$6.filter(function(b){return b.element!=a}),this.$6.length||(this.$13(),this.$21())};b.disconnect=function(){this.$6=[],this.$13(),this.$21()};b.takeRecords=function(){var a=this.$7.slice();this.$7=[];return a};return a}();e.exports=a}),null);
__d("IntersectionObserver",["IntersectionObserverFallback"],(function(a,b,c,d,e,f,g){"use strict";a="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;e.exports=a?window.IntersectionObserver:g}),null);
__d("observeIntersection",["ErrorUtils","IntersectionObserver","invariant"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=typeof WeakMap==="function",k={__noRoot:!0},l=j?new WeakMap():new Map();function m(a){__p&&__p();var b=a.threshold;if(Array.isArray(b)){var c={};b.forEach(function(a){c[String(a)]=!0});b=Object.keys(c).sort()}var d=babelHelpers["extends"]({},a,{threshold:b}),e={};Object.keys(d).sort().forEach(function(a){e[a]=d[a]});return JSON.stringify(e)}function a(a,b,c){__p&&__p();c===void 0&&(c={});var d=m({rootMargin:c.rootMargin,threshold:c.threshold}),e=c.root||k,f=l.get(e);f==null&&(f={},l.set(e,f));var n=f[d];if(n==null){c=new h(function(a){a.forEach(function(a){n!=null||i(0,2439);var b=n.targetToCallbacksMap.get(a.target);b&&b.length>0&&b.forEach(function(b){g.applyWithGuard(b,null,[a],null,"observeIntersection")})})},c);n={intersectionObserver:c,referenceCount:0,targetToCallbacksMap:j?new WeakMap():new Map()};f[d]=n}c=n.targetToCallbacksMap.get(a);c==null&&(n.intersectionObserver.observe(a),n.referenceCount+=1,c=[],n.targetToCallbacksMap.set(a,c));c.push(b);var o=!1;return{remove:function(){__p&&__p();if(o)return;var c=n.targetToCallbacksMap.get(a);c!=null||i(0,2440);if(c.length===1)n.intersectionObserver.unobserve(a),n.targetToCallbacksMap["delete"](a),n.referenceCount-=1;else{var g=c.indexOf(b);g!==-1||i(0,2441);c.splice(g,1)}n.referenceCount===0&&(f!=null||i(0,2442),delete f[d],Object.keys(f).length===0&&l["delete"](e));o=!0}}}e.exports=a}),null);
__d("OnVisible.react",["FBLogger","React","ReactDOM","intersectionObserverEntryIsIntersecting","observeIntersection"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();a=h.PropTypes;b=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=!1,c.$3=null,b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.componentDidMount=function(){this.$2=!0,this.$4()};c.componentDidUpdate=function(a){this.$4(a)};c.componentWillUnmount=function(){this.$2=!1,this.$5()};c.$4=function(a){__p&&__p();var b=this,c=i.findDOMNode(this);this.$3&&(!a||a.buffer!==this.props.buffer||c!==this.$1)&&this.$5();if(!this.$3){if(!(c instanceof Element)){this.$1=null;return}this.$1=c;this.$3=k(c,function(a){a=j(a)?b.props.onVisible:b.props.onHidden;a&&a()},{rootMargin:this.props.buffer?this.props.buffer+"px":"0px"})}};c.$5=function(){this.$3&&(this.$3.remove(),this.$3=null)};c.check=function(){g("onvisible").mustfix("Deprecated method `check()` was called. Remove the call immediately.")};c.reset=function(){if(this.$2===!1)return;this.$5();this.$4()};c.render=function(){return h.Children.only(this.props.children)};return b}(h.Component);b.propTypes={onVisible:a.func,onHidden:a.func,buffer:a.number};e.exports=b}),null);
__d("XPagesManagerPostAttributionSettingsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/{page_token}/settings/post_attribution/",{page_token:{type:"String",required:!0},business_id:{type:"Int"}})}),null);
__d("XUFIActorChangeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/actor/change/",{})}),null);
__d("MUFIActorSelector.react",["ActorURI","MActorListDispatcher","MActorListPayloadTypes","MActorListStore","MActorSelector.react","MActorSelectorNuxDispatcher","MActorSelectorNuxPayloadTypes","MActorSelectorNuxStore","MFeedUFI","MLegacyDataStore","MParent","MRequest","OnVisible.react","React","ReactComponentWithPureRenderMixin","ReactDOM","SubscriptionsHandler","XPagesManagerPostAttributionSettingsController","XUFIActorChangeController","fbt","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){__p&&__p();a=t.PropTypes;c=t.createClass({displayName:"MUFIActorSelector",mixins:[u],propTypes:{feedbackTargetID:a.string.isRequired,location:a.string.isRequired,initialSelectedActorID:a.string.isRequired,initialSelectedActorProfilePicURI:a.string.isRequired,settingsURI:a.string,showFlyoutOnRender:a.bool},getInitialState:function(){h.explicitlyRegisterStore(b("MActorListStore"));l.explicitlyRegisterStore(b("MActorSelectorNuxStore"));return{isVisible:!1,selectedActorID:this.props.initialSelectedActorID,selectedActorProfilePicURI:this.props.initialSelectedActorProfilePicURI,showLoadingIndicator:!1,showNux:!1}},render:function(){var a=this;return t.createElement(s,{onVisible:function(){return a.setState({isVisible:!0})},onHidden:function(){return a.setState({isVisible:!1})}},t.createElement(k,{actorListID:this.props.feedbackTargetID,actorListRequestPayloadType:i.REQUEST_UFI_ACTOR_LIST,coverEnabled:!1,flyoutTitle:this._getFlyoutTitle(),nuxBody:this._getNuxBody(),onChange:this._onChange,onCompleteNux:this._onCompleteNux,selectedActorID:this.state.selectedActorID,selectedActorProfilePicURI:this.state.selectedActorProfilePicURI,settingsURI:this._getSettingsURI(),showLoadingIndicator:this.state.showLoadingIndicator,showNux:this.state.isVisible&&this.state.showNux,showFlyoutOnRender:this.props.showFlyoutOnRender}))},_subscriptionsHandler:null,componentDidMount:function(){var a=this;this._subscriptionsHandler=new w();this._subscriptionsHandler.addSubscriptions(n.addListener("change",function(){var b=n.canShowUFINux(a.props.feedbackTargetID);!a.state.showNux&&b?a.setState({showNux:!0}):a.state.showNux&&!b&&a.setState({showNux:!1})}));this.props.location==="timeline"&&l.dispatch({data:{actorSelectorID:this.props.feedbackTargetID},type:m.REQUEST_UFI_NUX_STATUS})},componentWillUnmount:function(){this._subscriptionsHandler&&(this._subscriptionsHandler.release(),this._subscriptionsHandler=null)},_getFlyoutTitle:function(){return z._("Liking and commenting as:")},_onChange:function(a){__p&&__p();this.setState({selectedActorID:a,showLoadingIndicator:!0});var b=g.create(y.getURIBuilder().getURI(),a);b=new r(b).setMethod("POST");var c={from_actor_id:this.state.selectedActorID,ft_ent_identifier:this.props.feedbackTargetID,location:this.props.location};b.setData(c);b.listen("done",this._createActorChangeSuccessHandler(a));b.listen("error",this._createActorChangeErrorHandler());b.send();c=v.findDOMNode(this);if(c instanceof Element){b=q.bySigil(c,"feed-ufi-metadata");if(b){c=j.getActorData(a);c||A(0,1770);p.set(b,{actor_id:a,actor_name:c.name})}}o.clearCache()},_createActorChangeSuccessHandler:function(a){var b=this;return function(){var c=j.getActorData(a);c||A(0,1770);b.setState({selectedActorID:a,selectedActorProfilePicURI:c.profilePicURI,showLoadingIndicator:!1})}},_createActorChangeErrorHandler:function(){var a=this,b=this.state.selectedActorID,c=this.state.selectedActorProfilePicURI;return function(){a.setState({selectedActorID:b,selectedActorProfilePicURI:c,showLoadingIndicator:!1})}},_getNuxBody:function(){return z._("Like, comment or share as yourself or as one of the Pages you manage.")},_getSettingsURI:function(){return x.getURIBuilder().setString("page_token",this.props.feedbackTargetOwnerID).getURI()},_onCompleteNux:function(){l.dispatch({type:m.UFI_NUX_SEEN})}});e.exports=c}),null);