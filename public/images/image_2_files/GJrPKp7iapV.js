if (self.CavalryLogger) { CavalryLogger.start_js(["ooiVe"]); }

__d("MUFIConversationGuideRow.react",["ConversationGuideUIEvent","ConversationGuideUITypedLogger","MUFIConversationGuideBehaviorType","MUFIConversationGuideEmojiItem.react","MUFIConversationGuideFixedList.react","MUFIConversationGuideHScroll.react","MUFIConversationGuideMentionItem.react","MUFIConversationGuideStickerItem.react","MUFIConversationGuideTextItem.react","React","RelayModern","cx","MUFIConversationGuideRowQuery.graphql"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();q.graphql;a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=new Map(),c.state={behavior:i(),hidden:!1,maskedSuggestions:new Set()},c.$3=function(a){if(!a)return;c.props.handleAddText(a,c.state.behavior.clickToSend)},c.$4=function(a){c.props.handleAddMention(a,c.state.behavior.clickToSend)},c.$5=function(a){if(!a)return;c.props.handleAddSticker(a,c.state.behavior.clickToSend)},c.$6=function(a){c.state.behavior.dismissOnSelect&&c.setState({hidden:!0}),c.state.behavior.removeSuggestionOnSelect&&a&&c.setState(function(b){b=new Set(b.maskedSuggestions);a&&b.add(a);return{maskedSuggestions:b}})},c.$7=function(){new h().setEvent(g.HARD_DISMISS).setFeedbackID(c.props.ftentidentifier).setTrackingID(c.props.trackingID).setSessionID(c.props.sessionID).log(),c.setState({hidden:!0})},b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromProps=function(a,b){if(a.data){var c,d=((c=a.data)!=null?(c=c.feedback)!=null?(c=c.suggested_feedback)!=null?c.guide_suggestions:c:c:c)||[];a=i((c=a.data)!=null?(c=c.feedback)!=null?(c=c.suggested_feedback)!=null?c.guide_behavior:c:c:c);c=d.filter(function(a){return a.__typename===d[0].__typename}).filter(function(a){return a.__typename==="EmojiSuggestion"||a.__typename==="TextSuggestion"||a.__typename==="User"||a.__typename==="Sticker"});return babelHelpers["extends"]({},b,{behavior:a,hidden:b.hidden||c.length===b.maskedSuggestions.size})}return b};var c=b.prototype;c.$2=function(a){return a.__typename==="TextSuggestion"||a.__typename==="User"};c.componentDidUpdate=function(a){this.props.composerHasText===!0&&a.composerHasText===!1&&this.state.behavior.dismissOnType&&new h().setEvent(g.SOFT_DISMISS).setFeedbackID(this.props.ftentidentifier).setTrackingID(this.props.trackingID).setSessionID(this.props.sessionID).log()};c.render=function(){__p&&__p();var a=this,b=this.props,c=b.error;b=b.data;if(c||!b||this.state.hidden||this.props.composerHasText&&this.state.behavior.dismissOnType)return null;var d=((c=b)!=null?(c=c.feedback)!=null?(c=c.suggested_feedback)!=null?c.guide_suggestions:c:c:c)||[];b=d.filter(function(a){return a.__typename===d[0].__typename}).map(function(b,c){__p&&__p();var d="carousel_item_"+(b.id||""),e;switch(b.__typename){case"User":e=m;break;case"Sticker":e=n;break;case"EmojiSuggestion":e=j;break;case"TextSuggestion":e=o;break;default:return null}a.$1.has(d)||a.$1.set(d,p.createRef());var f=a.$1.get(d);return p.createElement(e,{onMouseDown:a.props.handleMouseDown,ftentidentifier:a.props.ftentidentifier,handleMentionAdd:a.$4,handleStickerAdd:a.$5,handleTextAdd:a.$3,item:b,key:d,onClickHandled:a.$6,rankedIndex:c,ref:f,trackingID:a.props.trackingID,sessionID:a.props.sessionID})}).filter(function(b){return b&&b.key&&!a.state.maskedSuggestions.has(b.key)});this.$2(d[0])?c=p.createElement(l,{behavior:this.state.behavior,key:"hscroll",keyRefMap:this.$1,onCloseButtonClick:this.$7},b):c=p.createElement(k,{behavior:this.state.behavior,key:"fixedlist",keyRefMap:this.$1,onCloseButtonClick:this.$7},b);b=[p.createElement("div",{className:"_7an2",key:"headerText"},this.state.behavior.headerText),p.createElement("div",{className:"_7an3",key:"closeButton"},p.createElement("button",{onClick:this.$7},"X"))];return p.createElement("div",{className:"_7an8"},p.createElement("div",{className:"_7an9"},p.createElement("div",{className:"_7ana"},this.state.behavior.showHeader?b:null),c))};return b}(p.Component);a.Query=function(){return b("MUFIConversationGuideRowQuery.graphql")};e.exports=a}),null);