if (self.CavalryLogger) { CavalryLogger.start_js(["Exi\/Z"]); }

__d("BladeRunnerDeferredClient",["Promise","requireDeferred","nullthrows"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=null}var b=a.prototype;b.requestStream=function(a,b,c){this.$2();return i(this.$1).then(function(d){return d.requestStream(a,b,c)})};b.logInfo=function(a){this.$2();return i(this.$1).then(function(b){b.logInfo(a)})};b.bumpCounter=function(a){this.$2();return i(this.$1).then(function(b){b.bumpCounter(a)})};b.$2=function(){this.$1==null&&(this.$1=new g(function(a){h("BladeRunnerClient").onReady(function(b){a(new b())})}))};return a}();e.exports=new a()}),null);
__d("BladeRunnerStreamHandler",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b,c,d){this.$1=a||function(a){},this.$2=b||function(a){},this.$3=c||function(a){},this.$4=d||function(a){}}var b=a.prototype;b.onData=function(a){this.$1(a)};b.onStatusUpdate=function(a){this.$2(a)};b.onLog=function(a){this.$3(a)};b.onBatch=function(a){this.$4(a)};return a}();e.exports=a}),null);
__d("BladeRunnerTypes",[],(function(a,b,c,d,e,f){a={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6};b={BLADE_RUNNER:1,GATEWAY:2};c={ACCEPTED:1,REJECTED:2,STARTED:3,PAUSED:4,CLOSED:5};e.exports={StreamFrameType:a,StreamRequestType:b,StreamStatus:c}}),null);
__d("StreamStateMachineConstants",[],(function(a,b,c,d,e,f){"use strict";a={states:{GQLS_STATE_CREATED:"created",GQLS_STATE_ACTIVE:"active",GQLS_STATE_PAUSED:"paused",GQLS_STATE_TERMINATED:"terminated"},events:{GQLS_STATE_TRANSIT_ON_CREATE:"onCreated",GQLS_STATE_TRANSIT_ON_ACTIVE:"onActive",GQLS_STATE_TRANSIT_ON_PAUSE:"onPause",GQLS_STATE_TRANSIT_ON_RESUME:"onResume",GQLS_STATE_TRANSIT_ON_TERMINATE:"onTerminate"}};e.exports=a}),null);
__d("SkywalkerManager",["regeneratorRuntime","Promise","requireDeferred","BladeRunnerDeferredClient","BladeRunnerStreamHandler","BladeRunnerTypes","Bootloader","StreamStateMachineConstants","gkx","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();var r=l.StreamStatus;a=n.events;var s="request_stream",t="cp_skywalker",u="mqtt_skywalker",v=babelHelpers["extends"]({},a,{GQLS_STATE_TRANSIT_ON_REJECT:"onReject"});b=function(){"use strict";__p&&__p();function a(){this.$3=!1}var b=a.prototype;b.subscribe=function(a,b,c){__p&&__p();c===void 0&&(c={});var d=this.$5(a,b,c);q(d);return{getTopic:function(){return a},getContext:function(){return c.context},isUnsubscribed:function(){return this.$6},unsubscribe:function(){this.$6=!0;return d.then(function(a){return a.unsubscribe()})},$6:!1}};b.getSubscriptionType=function(a){if(this.$7(a))return s;else if(this.$8(a))return u;return t};b.getSubscriptions=function(){__p&&__p();var a=[],b=[],c=this.$2;c!=null&&(a=c.getSubscriptions().map(function(a){return{getTopic:function(){return a.getTopic()},getMessageListener:function(){return a.getMessageListener()},getCreationTime:function(){return a.getCreationTime()},isUnsubscribed:function(){return!c.isSubscribed(a)}}}));var d=this.$1;d!=null&&(b=d.getSubscriptions().map(function(a){return{getTopic:function(){return a.getTopic()},getMessageListener:function(){return a.getMessageListener()},getCreationTime:function(){return a.getCreatedTime()},isUnsubscribed:function(){return!a.isAlive()}}}));return a.concat(b)};b.$5=function(a,b,c){__p&&__p();var d;return g.async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:d=this.getSubscriptionType(a);if(!(d===s)){e.next=5;break}return e.abrupt("return",this.$9(a,b,c));case 5:if(!(d===u)){e.next=9;break}return e.abrupt("return",this.$10(a,b,c));case 9:return e.abrupt("return",this.$11(a,b,c));case 10:case"end":return e.stop()}},null,this)};b.$10=function(a,b,c){var d;return g.async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return g.awrap(this.$12());case 2:d=e.sent;return e.abrupt("return",d.subscribe(a,b,c));case 4:case"end":return e.stop()}},null,this)};b.$11=function(a,b,c){__p&&__p();var d,e;return g.async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return g.awrap(this.$13());case 2:d=f.sent;e=d.subscribe(a,b,c.context,c.onSubscribe,c.onUnsubscribeEager,c.onUnsubscribe);c.gqlsLifecycleHandler&&e.handleLifecycles(c.gqlsLifecycleHandler);return f.abrupt("return",e);case 6:case"end":return f.stop()}},null,this)};b.$8=function(a){if(this.$3||!w())return!1;if(a.startsWith("gqls/")||a.startsWith("graphql/")){if(a.startsWith("gqls/comment_like_subscribe")&&o("781618"))return!0;return a.startsWith("gqls/live_video_currently_watching_subscribe")?o("812809"):o("781619")}return o("678255")};b.$7=function(a){return w()&&this.$14(a)!=null};b.$14=function(a){if((a.startsWith("gqls/comment_create_subscribe/")||a.startsWith("gqls/comment_like_subscribe/")||a.startsWith("gqls/feedback_like_subscribe/")||a.startsWith("gqls/feedback_typing_subscribe/"))&&o("778404"))return"Gqls";if(a.startsWith("gqls/feedback_like_subscribe/")&&o("683301"))return"GqlsFeedbackLikeSubscribe";if(a.startsWith("gqls/live_video_comment_create_subscribe/")&&o("688302"))return"GqlsLiveVideoCommentCreateSubscribe";return a.startsWith("gqls/web_notification_receive_subscribe/")&&o("730685")?"Gqls":null};b.$9=function(a,b,c){__p&&__p();var d,e,f,h;return g.async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:d=p(this.$14(a));i.next=3;return g.awrap(this.$15());case 3:e=i.sent;f=e.patchContext(c.context);i.next=7;return g.awrap(j.requestStream({method:d,topic:a},JSON.stringify(f),new k(function(c){j.bumpCounter("received_data."+d);c=JSON.parse(c);b({topic:a,payload:c.payload})},function(a){__p&&__p();j.bumpCounter("received_status_"+a+"."+d);if(c.gqlsLifecycleHandler){var b="";switch(a){case r.ACCEPTED:b=v.GQLS_STATE_TRANSIT_ON_CREATE;break;case r.REJECTED:b=v.GQLS_STATE_TRANSIT_ON_REJECT;break;case r.STARTED:b=v.GQLS_STATE_TRANSIT_ON_ACTIVE;break;case r.PAUSED:b=v.GQLS_STATE_TRANSIT_ON_PAUSE;break;case r.CLOSED:b=v.GQLS_STATE_TRANSIT_ON_TERMINATE;break}c.gqlsLifecycleHandler(b)}},function(a){})));case 7:h=i.sent;c.onSubscribe&&c.onSubscribe({data:{},error:null});return i.abrupt("return",{unsubscribe:function(){return g.async(function(a){while(1)switch(a.prev=a.next){case 0:c.onUnsubscribeEager&&c.onUnsubscribeEager(),h.cancel(),c.onUnsubscribe&&c.onUnsubscribe({data:{},error:null});case 3:case"end":return a.stop()}},null,this)}});case 10:case"end":return i.stop()}},null,this)};b.$13=function(){__p&&__p();var a,b;return g.async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:if(!(this.$1!=null)){c.next=2;break}return c.abrupt("return",this.$1);case 2:a=new h(function(a){m.loadModules(["ChannelManager","RTISubscriptionManager"],function(b,c){b.startChannelManager(),a(c)},"SkywalkerManager")});c.next=5;return g.awrap(a);case 5:b=c.sent;this.$1=b;return c.abrupt("return",b);case 8:case"end":return c.stop()}},null,this)};b.$12=function(){__p&&__p();var a=this,b,c;return g.async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!(this.$2!=null)){d.next=2;break}return d.abrupt("return",this.$2);case 2:b=new h(function(a){m.loadModules(["MqttSkywalkerManager"],a,"SkywalkerManager")});d.next=5;return g.awrap(b);case 5:c=d.sent;this.$2=c;this.$2.setOnMqttError(function(b){return a.$16()});return d.abrupt("return",c);case 9:case"end":return d.stop()}},null,this)};b.$15=function(){__p&&__p();var a,b;return g.async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:if(!(this.$4!=null)){c.next=2;break}return c.abrupt("return",this.$4);case 2:a=new h(function(a){i("SkywalkerUtils").onReady(function(b){a(b)})});c.next=5;return g.awrap(a);case 5:b=c.sent;this.$4=b;return c.abrupt("return",b);case 8:case"end":return c.stop()}},null,this)};b.$16=function(){__p&&__p();this.$3=!0;var a=this.$2;if(a==null)return;a=a.getSubscriptions();this.$2=null;for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.subscribe(d.getTopic(),d.getMessageListener(),d.getSubscribeOptions())}};return a}();function w(){return"WebSocket"in window}e.exports=new b()}),null);
__d("BaseGraphQLSubscription",["regeneratorRuntime","Banzai","BanzaiLogger","ChannelClientID","CurrentLocale","CurrentUser","GQLSHeartbeatConfig","GraphQLSubscriptionsConfig","Random","SkywalkerManager","URI","gkx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();var s=m.heartbeat_interval,t=1e4,u=1,v=100,w="gqls_default_logging";a=function(){"use strict";__p&&__p();function a(){}var b=a.prototype;b.getTopic=function(a){throw new Error("getTopic() unimplemented by subclass of BaseGraphQLSubscription")};b.getQueryID=function(){throw new Error("getQueryID() unimplemented by subclass of BaseGraphQLSubscription")};b.getQueryParameters=function(a){throw new Error("getQueryParameters() unimplemented by subclass of BaseGraphQLSubscription")};b.getSubscriptionCallName=function(){throw new Error("getSubscriptionCallName() unimplemented by subclass of BaseGraphQLSubscription")};a.subscribe=function(a,b,c){c===void 0&&(c={});return new this().subscribe(a,b,c)};b.subscribe=function(a,b,c){__p&&__p();var d=this;c===void 0&&(c={});c.forceLogContext==null&&r("676906")&&o.coinflip(v)&&(c.forceLogContext=w);var e=this.getQueryParameters(a);c.forceLogContext!=null&&(e["%options"]={client_logged_context:c.forceLogContext});c.receiveLifecycleEvents&&(e["%options"]=babelHelpers["extends"]({},e["%options"],{heartbeat:{interval:s}}));var f={};f.transformContext=JSON.stringify(this.getTransformContext(a,e));c.policy!=null&&(f.policy=c.policy);c.customOptions!=null&&(f.customOptions=JSON.stringify(c.customOptions));a=this.getTopic(a);var h=p.getSubscriptionType(a);this.$1("client_subscribe",e,c,h);var i=p.subscribe(a,function(a){d.$1("receivepayload",e,c,h),b(babelHelpers["extends"]({__type:"data"},JSON.parse(a.payload)))},{context:f,onUnsubscribeEager:function(){d.$1("client_unsubscribe",e,c,h)},gqlsLifecycleHandler:function(a){return g.async(function(c){while(1)switch(c.prev=c.next){case 0:b({__type:"lifecycle_event",state:a});case 1:case"end":return c.stop()}},null,this)}});return{getContext:function(){return i.getContext()},unsubscribe:function(){i.unsubscribe()}}};a.subscribeWithIcebreaker_EXPERIMENTAL=function(a,b,c){return new this().subscribeWithIcebreaker_EXPERIMENTAL(a,b,c)};b.subscribeWithIcebreaker_EXPERIMENTAL=function(a,b,c){__p&&__p();var d=new q("https://streaming-graph.facebook.com/gqls_bore");d.setQueryData({access_token:c});c=this.getTopic(a);var e={topic:c,locale:k.get(),queryID:this.getQueryID(),serializedQueryParameters:JSON.stringify(this.getQueryParameters(a))};d.addQueryData(e);var f=new EventSource(d.toString(),{withCredentials:!0});f.addEventListener("message",function(a){b(JSON.parse(JSON.parse(a.data).payload))},!1);return{getContext:function(){return e},unsubscribe:function(){f.close()}}};b.getTransformContext=function(a,b){var c=0;return{viewerID:this.getViewerID(a),appID:c,locale:k.get(),queryID:this.getQueryID(),serializedQueryParameters:JSON.stringify(b)}};b.getViewerID=function(a){return l.getID()};b.$1=function(a,b,c,d){if(h.isEnabled("gqls_web_logging")){var e=n.shouldAlwaysLog||c.forceLogContext?u:t;o.coinflip(e)&&i.log("GraphQLSubscriptionsLoggerConfig",{clienttime:Date.now()/1e3,client_sample_weight:e,event:a,force_log_context:c.forceLogContext,handle_type:d,mechanism:"skywalker",query_id:parseInt(this.getQueryID(),10),query_params:b,session_id:j.getID(),subscription_call:this.getSubscriptionCallName()})}};return a}();e.exports=a}),null);
__d("WebGraphQLSubscriptionHelper",[],(function(a,b,c,d,e,f){"use strict";e.exports={getExports:function(a){var b=a.docID,c=a.queryID;return{getDocID:function(){return b},getLegacyQueryID:function(){return c}}}}}),null);
__d("MSiteCommentCreateSimpleWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f,g){"use strict";e.exports=g.getExports({docID:"1460519033984219",queryID:"715901305267016"})}),null);
__d("MSiteUFICommentSimpleSubscription",["BaseGraphQLSubscription","MSiteCommentCreateSimpleWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/feedback_id_"+a};c.getQueryID=function(){return h.getDocID()};c.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:i(),feedback_id:a})}};c.getSubscriptionCallName=function(){return"comment_create_subscribe"};return b}(g);e.exports=a}),null);
__d("MSiteCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f,g){"use strict";e.exports=g.getExports({docID:"1659551594055113",queryID:"449892118711349"})}),null);
__d("MSiteUFICommentSubscription",["BaseGraphQLSubscription","MSiteCommentCreateWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/feedback_id_"+a};c.getQueryID=function(){return h.getDocID()};c.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:i(),feedback_id:a})}};c.getSubscriptionCallName=function(){return"comment_create_subscribe"};return b}(g);e.exports=a}),null);
__d("MSiteFeedbackLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f,g){"use strict";e.exports=g.getExports({docID:"1418598598173623",queryID:"644201235775644"})}),null);
__d("MSiteUFILikeSubscription",["BaseGraphQLSubscription","MSiteFeedbackLikeWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/feedback_id_"+a};c.getQueryID=function(){return h.getDocID()};c.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:i(),feedback_id:a})}};c.getSubscriptionCallName=function(){return"feedback_like_subscribe"};return b}(g);e.exports=a}),null);
__d("CommentLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f,g){"use strict";e.exports=g.getExports({docID:"1435334373168219",queryID:"1723155404680538"})}),null);
__d("UFICommentLikeSubscription",["BaseGraphQLSubscription","CommentLikeWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/top_level_feedback_id_"+a};c.getQueryID=function(){return h.getDocID()};c.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:i(),top_level_feedback_id:a})}};c.getSubscriptionCallName=function(){return"comment_like_subscribe"};return b}(g);e.exports=a}),null);
__d("MqttWsClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var b=a.prototype;b.log=function(){h.log("logger:MqttWsClientLoggerConfig",this.$1,g.BASIC)};b.logVital=function(){h.log("logger:MqttWsClientLoggerConfig",this.$1,g.VITAL)};b.logImmediately=function(){h.log("logger:MqttWsClientLoggerConfig",this.$1,{signal:!0})};b.clear=function(){this.$1={};return this};b.getData=function(){return babelHelpers["extends"]({},this.$1)};b.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.setAppID=function(a){this.$1.app_id=a;return this};b.setAttemptNumber=function(a){this.$1.attempt_number=a;return this};b.setConnectionStatus=function(a){this.$1.connection_status=a;return this};b.setDuration=function(a){this.$1.duration=a;return this};b.setErrorCode=function(a){this.$1.error_code=a;return this};b.setErrorMessage=function(a){this.$1.error_message=a;return this};b.setEventType=function(a){this.$1.event_type=a;return this};b.setFailTotal=function(a){this.$1.fail_total=a;return this};b.setHostname=function(a){this.$1.hostname=a;return this};b.setHref=function(a){this.$1.href=a;return this};b.setOnline=function(a){this.$1.online=a;return this};b.setPlatform=function(a){this.$1.platform=a;return this};b.setPublishStatus=function(a){this.$1.publish_status=a;return this};b.setSessionID=function(a){this.$1.session_id=a;return this};b.setSubscribedTopics=function(a){this.$1.subscribed_topics=h.serializeVector(a);return this};b.setSuccessTotal=function(a){this.$1.success_total=a;return this};b.setTime=function(a){this.$1.time=a;return this};b.setTimePassed=function(a){this.$1.time_passed=a;return this};b.setTopic=function(a){this.$1.topic=a;return this};b.setUserSessionID=function(a){this.$1.user_session_id=a;return this};b.setVC=function(a){this.$1.vc=a;return this};b.setWeight=function(a){this.$1.weight=a;return this};return a}();b={app_id:!0,attempt_number:!0,connection_status:!0,duration:!0,error_code:!0,error_message:!0,event_type:!0,fail_total:!0,hostname:!0,href:!0,online:!0,platform:!0,publish_status:!0,session_id:!0,subscribed_topics:!0,success_total:!0,time:!0,time_passed:!0,topic:!0,user_session_id:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("RealtimeRequestStreamWebClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var b=a.prototype;b.log=function(){h.log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,g.BASIC)};b.logVital=function(){h.log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,g.VITAL)};b.logImmediately=function(){h.log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,{signal:!0})};b.clear=function(){this.$1={};return this};b.getData=function(){return babelHelpers["extends"]({},this.$1)};b.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.setClientSessionID=function(a){this.$1.client_session_id=a;return this};b.setClientTimeMs=function(a){this.$1.client_time_ms=a;return this};b.setMessage=function(a){this.$1.message=a;return this};b.setSeverity=function(a){this.$1.severity=a;return this};b.setTime=function(a){this.$1.time=a;return this};b.setUserFbid=function(a){this.$1.user_fbid=a;return this};b.setVC=function(a){this.$1.vc=a;return this};b.setWeight=function(a){this.$1.weight=a;return this};return a}();b={client_session_id:!0,client_time_ms:!0,message:!0,severity:!0,time:!0,user_fbid:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("intlSummarizeNumber",["FbtNumberType","IntlCompactDecimalNumberFormatConfig","IntlVariations","intlNumUtils"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=3,l=14,m={ROUND:"ROUND",TRUNCATE:"TRUNCATE"},n={SHORT:"SHORT",LONG:"LONG"};function a(a,b,c,d){__p&&__p();c===void 0&&(c=n.SHORT);d===void 0&&(d=m.ROUND);c=h[c==n.SHORT?"short_patterns":"long_patterns"];var e=a===0?0:Math.floor(Math.log10(Math.abs(a)));e>l&&(e=l);var f=o(a,e,b,d,c),p=f[0],q=f[1];f=f[2];if(f){e+=1;f=o(a,e,b,d,c);p=f[0];q=f[1];f[2]}d=g.getVariation(p)||i.NUMBER_OTHER;f=e.toString();f=(c=c)!=null?(c=c[f])!=null?c[d.toString()]:c:c;if(!f||e<k||f.positive_prefix_pattern===""&&f.positive_suffix_pattern===""){d=b===void 0?0:b;return j.formatNumberWithThousandDelimiters(a,d)}return f&&f.min_integer_digits===0&&p===1?f.positive_prefix_pattern+f.positive_suffix_pattern:(f&&f.positive_prefix_pattern||"")+j.formatNumberWithThousandDelimiters(p,q)+(f&&f.positive_suffix_pattern||"")}function o(a,b,c,d,e){__p&&__p();var f=b.toString();f=(e=e)!=null?(e=e[f])!=null?e[i.NUMBER_OTHER.toString()]:e:e;e=f&&f.min_integer_digits||b+1;var g=b-e+1;g=Math.abs(a)/Math.pow(10,g);var h=c!=null;c=h?c:f&&f.min_fraction_digits;c==null&&(c=b>2?1:0);f=d==m.TRUNCATE?j.truncateLongNumber(g.toString(),c):g.toFixed(c);d=parseFloat(f)*(a<0?-1:1);return[d,d%1===0&&!h?0:c,f.length>e+(c>0?c+1:0)+(g>=0?0:1)&&b<l]}e.exports=a}),null);
__d("MUFI",["BanzaiLogger","ClientIDs","MLiveData","MSiteUFICommentSimpleSubscription","MSiteUFICommentSubscription","MSiteUFILikeSubscription","Stratcom","UFICommentLikeSubscription","UFIReactionsUtils","URI","destroyOnUnload","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();var s="m_live_ufi",t,u=[],v=function(a){a=a.getData();a&&G(a,!0)},w=function(a,b){g.log("LiveWWWFeedbackLoggerConfig",{event:"receive_payload",is_m_site:!0,mechanism:"graphql_subscriptions",time_since_sub:b,update_type:a})},x=function(a,b){var c=n.subscribe(a,function(c){B(a,c,Date.now()-b)});u.push(c)},y=function(a,b){var c=l.subscribe(a,function(c){C(a,c,Date.now()-b)});u.push(c)},z=function(a,b){var c=k.subscribe(a,function(c){D(a,c,Date.now()-b)});u.push(c)},A=function(a,b){var c=j.subscribe(a,function(c){E(a,c,Date.now()-b)});u.push(c)},B=function(a,b,c){w("comment_like",c);a=b&&b.comment_like_subscribe&&b.comment_like_subscribe.feedback;if(!a)return;G({action_data:{action_type:"m-action-like-comment",client_id:b.comment_like_subscribe.client_mutation_id},feedback_data:{ft_ent_identifier:a.legacy_comment_token,has_viewer_liked:a.does_viewer_like,like_count:a.likers?a.likers.count:0,request_id:null}})},C=function(a,b,c){w("like",c);c=b&&b.feedback_like_subscribe&&b.feedback_like_subscribe.feedback;if(!c)return;var d=c.viewer_feedback_reaction_info?c.viewer_feedback_reaction_info.key:0,e=c.viewer_likes_count&&c.viewer_likes_count.text,f=c.viewer_does_not_like_count&&c.viewer_does_not_like_count.text,g=c.viewer_likes_sentence,h=c.viewer_does_not_like_sentence,i=c.viewer_likes_reaction_sentence,j=c.viewer_does_not_like_reaction_sentence,k=o.getReactionCountMapFromSummary(c.reactions_summary),l,m,n={};c.does_viewer_like?(m=[g,h],l=[e,f],n.current=i,n.alternate=j):(m=[h,g],l=[f,e],n.current=j,n.alternate=i);G({action_data:{action_type:"m-action-like",client_id:b.feedback_like_subscribe.client_mutation_id},feedback_data:{ft_ent_identifier:a,has_viewer_liked:c.does_viewer_like,like_count:c.likers?c.likers.count:0,like_fallback:!0,like_sentences:m,like_friend_sentences:l,like_counts:l,request_id:null,viewerreaction:d,reactioncount:c.reactors?c.reactors.count:0,reactionsentences:n,reactioncountmap:k}})},D=function(a,b,c){__p&&__p();w("comment",c);c=b&&b.comment_create_subscribe&&b.comment_create_subscribe.feedback;var d=b&&b.comment_create_subscribe&&b.comment_create_subscribe.comment;if(!c||!d)return;var e=d.author,f=b.comment_create_subscribe.viewer;if(!e||!f)return;f=f.account_user?f.account_user.id:null;f={id:e.id,is_friend:e.is_viewer_friend,is_viewer:!!(f&&e.id===f),name:e.name,short_name:e.short_name,profile_pic:e.prof_pic&&e.prof_pic.uri,profile_pic_2x:e.prof_pic_2x&&e.prof_pic_2x.uri,uri:e.url};e=null;if(d.attachments.length){var g=d.attachments[0],h=g.style_list;if(h&&h.length&&h[0]=="sticker"){var i=g.target;e={metadata:{source_uri:i.img.uri,source_uri_2x:i.img_2x.uri,width:i.img.width,height:i.img.height,frameCount:i.frame_count,frameRate:i.frame_rate,framesPerCol:i.frames_per_column,framesPerRow:i.frames_per_row,sprite_uri:i.sprite_img&&i.sprite_img.uri,sprite_uri_2x:i.sprite_img_2x&&i.sprite_img_2x.uri},type:"sticker"}}else if(h&&h.length&&h[0]=="photo"){i=g.target;e={metadata:{source_uri:i.photo_img&&i.photo_img.uri,width:i.photo_img.width,height:i.photo_img.height,href:i.url},type:"photo"}}else h&&h.length&&h[0]=="share"&&(e={type:"share",metadata:{}})}g=d.m_edit_uri?new p(d.m_edit_uri).removeQueryData("redirect").toString():null;i=null;d.m_inline_reply_data&&(i={composer_id:d.m_inline_reply_data.composer_id,placeholder_id:d.m_inline_reply_data.placeholder_id,load_composer_uri:d.m_inline_reply_data.load_uri_raw,logging_target_fbid:d.m_inline_reply_data.logging_id});h={};if(d.feedback.reactions_summary){var j=d.feedback;h.can_react=j.can_viewer_react;h.reactioncount=j.reactors.count;h.reactioncountmap=o.getReactionCountMapFromSummary(j.reactions_summary);h.reactioncountreduced=j.reaction_count_reduced?j.reaction_count_reduced:j.reactors.count;h.viewerreaction=j.viewer_feedback_reaction_info?j.viewer_feedback_reaction_info.key:0}j=c.comments;var k=c.comment_count_reduced;c=c.top_level_comments;j=j&&j.count;var l=c.count;c=c.display_count;j!=null&&(l=j,k!=null?c=k:c=r(j));G({action_data:babelHelpers["extends"]({action_type:"m-action-add-comment",author:f,attachment:e,body:d.body,can_edit:d.can_viewer_edit,can_like:d.feedback.can_viewer_like,can_remove:d.can_viewer_delete,can_reply:d.feedback.can_viewer_comment,can_report:d.can_viewer_report,can_share:d.can_viewer_share,client_id:b.comment_create_subscribe.client_mutation_id,comment_fbid:d.legacy_fbid,comment_id:d.legacy_token,ft_ent_identifier:a,has_viewer_liked:d.feedback.does_viewer_like,is_featured:d.is_featured,is_hidden:d.is_hidden_by_viewer||d.spam_display_mode==="spam",is_reply:!!d.parent_comment,is_translatable:d.translation_available_for_viewer,like_count:d.feedback.likers.count,timestamp:d.created_time,like_uri:d.m_like_uri,replies_uri:d.m_replies_uri,report_uri:d.m_report_uri,delete_uri:d.m_delete_uri,edit_uri:g,hide_uri:d.m_hide_uri,inline_reply_data:i},h),feedback_data:{ft_ent_identifier:a,comment_count:l,reduced_comment_count:c,request_id:null}})},E=function(a,b,c){__p&&__p();w("comment",c);c=b&&b.comment_create_subscribe&&b.comment_create_subscribe.comment;if(!c||!a)return;var d=c.legacy_token;b=b.comment_create_subscribe.client_mutation_id;b=b&&h.isExistingClientID(b);if(b)return;b=!!c.comment_parent;if(b)return;c=Object.keys(i.get(d).getData()).length;if(c!==0)return;m.invoke("m:ufi:live-comments:new-comment",null,{commentToken:d,feedbackTargetID:a})},F=function(){for(var a=0;a<u.length;a++){var b=u[a];b&&b.unsubscribe()}u=[]};function G(a,b){__p&&__p();var c=a.feedback_data,d=c&&c.ft_ent_identifier;if(d){a=a.action_data;if(a){var e=a.action_type,f=a.client_id&&h.isExistingClientID(a.client_id);if(b){b=null;e==="m-action-add-comment"?b="comment":e==="m-action-like-comment"?b="comment_like":(e==="m-action-like"||e==="m-action-reaction")&&(b="like");b&&g.log("LiveWWWFeedbackLoggerConfig",{event:"receive_payload",is_m_site:!0,mechanism:"livesend",originated_locally:f,update_type:b})}if(f)return;delete a.client_id;if(e==="m-action-add-comment"&&!a.is_reply){b=Object.keys(i.get(a.comment_id).getData()).length;if(b!==0)return;f=i.get(d).getData().comments||[];f.push(a.comment_id);c.comments=f;i.set(a.comment_id,a)}}i.update(d,c)}}function a(a,b){if(!b.gqls)t||(t=m.listen(s,null,v));else{var c=Date.now();b.likes&&y(a,c);b.comments&&(b.simple_comments?A(a,c):z(a,c));b.comment_likes&&x(a,c);q(F)}}e.exports={addAction:G,init:a}}),null);
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","nullthrows"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(){}var b=a.prototype;b.patchRequestHeaders=function(a){var b={},c=g.bladerunner_www_sandbox;if(c!=null){var d=h(a.method);d.startsWith("FBLQ:")||(b["javascript-sandbox"]=c)}for(var e in a)b[e]=a[e];return b};return a}();b=new a();e.exports=b}),null);
__d("BladeRunnerLogger",["BanzaiODS","CurrentUser","FBLogger","RealtimeRequestStreamWebClientTypedLogger","gkx"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l="bladerunner_js_client",m={info:"info",warning:"warning",exception:"exception"};a=function(){"use strict";__p&&__p();function a(){this.$1=this.$4(),this.setFBLoggerLevel(1)}var b=a.prototype;b.info=function(a){this.$3>=2&&i(l).info(a),this.$5(m.info,a)};b.warn=function(a){this.$3>=1&&i(l).warn(a),this.$5(m.warning,a)};b.exception=function(a,b){b===void 0&&(b="");b=b+" "+a.toString();this.$3>=0&&i(l).warn(b);this.$5(m.exception,b)};b.bumpCounter=function(a,b){b===void 0&&(b=1),g.bumpEntityKey("BladeRunnerClient",a,b)};b.setClientSessionId=function(a){this.$2=a};b.setFBLoggerLevel=function(a){this.$3=a};b.$5=function(a,b){if(this.$1){a=new j().setClientTimeMs(Date.now()).setSeverity(a).setMessage(b).setClientSessionID(this.$2).setUserFbid(h.getID());a.log()}};b.$4=function(){return k("676834")};return a}();b=new a();e.exports=b}),null);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=function(){"use strict";__p&&__p();function a(){}var b=a.prototype;b.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")};a.readObject=function(b){var c=new a();c.streamId=q(b.streamId);c.requestType=q(b.requestType);c.payload=t(b.payload);c.headers=w(b.headers);c.extraHeader=t(b.extraHeader);c.requestTarget=t(b.requestTarget);return c};return a}(),k=function(){"use strict";__p&&__p();function a(){}a.readObject=function(b){var c=new a();c.streamId=q(b.streamId);c.dataId=r(b.dataId);c.data=t(b.data);c.shouldAck=y(b.shouldAck);return c};var b=a.prototype;b.decodeData=function(){if(this.data==null)throw new Error("Expected data");return g.decode(this.data)};return a}(),l=function(){"use strict";__p&&__p();function a(){}a.readObject=function(b){var c=new a();c.streamId=q(b.streamId);c.dataId=q(b.dataId);c.success=x(b.success);c.message=t(b.message);c.code=r(b.code);return c};return a}(),m=function(){"use strict";function a(){}a.readObject=function(b){var c=new a();c.streamId=r(b.streamId);c.message=t(b.message);return c};return a}(),n=function(){"use strict";__p&&__p();function a(){}a.readObject=function(b){var c=new a();c.streamId=q(b.streamId);c.status=q(b.status);c.message=t(b.message);c.code=r(b.code);c.shouldRetry=y(b.shouldRetry);c.retryDelayMs=r(b.retryDelayMs);return c};return a}(),o=function(){"use strict";__p&&__p();function a(){}a.readObject=function(b){var c=new a();c.streamId=q(b.streamId);c.newBody=t(b.newBody);c.newExtraHeader=t(b.newExtraHeader);c.patchExtraHeader=t(b.patchExtraHeader);c.killBody=y(b.killBody);c.temporary=y(b.temporary);return c};return a}(),p=function(){"use strict";__p&&__p();function a(){}var b=a.prototype;b.getRequest=function(){if(this.type==i.StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};b.getData=function(){if(this.type==i.StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};b.getDataAck=function(){if(this.type==i.StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};b.getStatusUpdate=function(){if(this.type==i.StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};b.getLog=function(){if(this.type==i.StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};b.getRewriteRequest=function(){if(this.type==i.StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")};b.getStreamId=function(){__p&&__p();if(this.type==i.StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==i.StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==i.StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==i.StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==i.StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;throw new Error("Frame with unexpected type")};a.readObject=function(b){__p&&__p();var c=new a();c.type=q(b.type);switch(c.type){case i.StreamFrameType.REQUEST:c.request=j.readObject(u(b.request));break;case i.StreamFrameType.DATA:c.data=k.readObject(u(b.data));break;case i.StreamFrameType.DATA_ACK:c.dataAck=l.readObject(u(b.dataAck));break;case i.StreamFrameType.STATUS_UPDATE:c.statusUpdate=n.readObject(u(b.statusUpdate));break;case i.StreamFrameType.LOG:c.log=m.readObject(u(b.log));break;case i.StreamFrameType.REWRITE_REQUEST:c.rewriteRequest=o.readObject(u(b.rewriteRequest));break;default:h.warn("Frame with unexpected type: "+c.type);return null}return c};a.newRequestFrame=function(b){var c=new a();c.type=i.StreamFrameType.REQUEST;c.request=b;return c};a.newDataFrame=function(b){var c=new a();c.type=i.StreamFrameType.DATA;c.data=b;return c};a.newDataAckFrame=function(b){var c=new a();c.type=i.StreamFrameType.DATA_ACK;c.dataAck=b;return c};a.newStatusUpdateFrame=function(b){var c=new a();c.type=i.StreamFrameType.STATUS_UPDATE;c.statusUpdate=b;return c};a.newLogFrame=function(b){var c=new a();c.type=i.StreamFrameType.LOG;c.log=b;return c};a.newRewriteRequestFrame=function(b){var c=new a();c.type=i.StreamFrameType.REWRITE_REQUEST;c.rewriteRequest=b;return c};return a}();a=function(){"use strict";__p&&__p();function a(a,b){this.batchId=a,this.frames=b}var b=a.prototype;b.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")};b.write=function(){return JSON.stringify(this)};a.read=function(b){__p&&__p();b=JSON.parse(b);var c=b.batchId||0,d=[];for(var b=b.frames,e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;g=p.readObject(g);g!=null&&d.push(g)}return new a(c,d)};return a}();function q(a){if(typeof a==="number")return a;throw new Error("Expected number")}function r(a){return a==null?null:q(a)}function s(a){if(typeof a==="string")return a;throw new Error("Expected string")}function t(a){return a==null?null:s(a)}function u(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function v(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function w(a){return a==null?null:v(a)}function x(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function y(a){return a==null?null:x(a)}e.exports={GatewayStreamBatch:a,GatewayStreamData:k,GatewayStreamDataAck:l,GatewayStreamFrame:p,GatewayStreamLog:m,GatewayStreamRequest:j,GatewayStreamRewriteRequest:o,GatewayStreamStatusUpdate:n}}),null);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=1e3;a=function(){"use strict";__p&&__p();function a(a,b,c){this.$2=a,this.$1=b,this.$3=c}var b=a.prototype;b.onProxyResponse=function(a){__p&&__p();this.$4(a);var b=[];for(var c=a.getFrames(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;this.$2.witnessFrame(f)&&b.push(f)}b.length>0&&this.$5(new i.GatewayStreamBatch(a.batchId,b))};b.onDisconnect=function(){this.$2.resetErrors();var a=new i.GatewayStreamStatusUpdate();a.streamId=this.$2.getRequest().streamId;a.status=h.StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new i.GatewayStreamBatch(null,[i.GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};b.$4=function(a){__p&&__p();var b=this;a=a.getFrames().filter(function(a){return a.type==h.StreamFrameType.STATUS_UPDATE});for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.getStatusUpdate();if(e.status==h.StreamStatus.CLOSED||e.status==h.StreamStatus.REJECTED){this.$2.onError();var f=e.shouldRetry!=null&&e.shouldRetry,i=e.message!=null?e.message:"null";if(f&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){e.status=h.StreamStatus.PAUSED;var l=k;e.retryDelayMs!=null&&(l=e.retryDelayMs);g.info("Can retry: stream "+e.streamId+" closed with status "+e.status+", message "+i+". Error count: "+this.$2.getErrorCount()+", retryDelay "+l+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?g.bumpCounter("stream_closed_already_retrying"):(g.bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),l>0?j(function(){return b.$6()},l):this.$6())}else g.info("Will not retry: stream "+e.streamId+" closed with status "+e.status+", message "+i+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+f.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),f?g.bumpCounter("stream_closed_retry_exceeded"):g.bumpCounter("stream_closed_no_retry"),this.$3.removeStream(e.streamId)}}};b.$6=function(){this.$2.setRetryRequestScheduled(!1),this.$2.isAlive()&&this.$3.sendRetryStreamRequest(this.$2)};b.$5=function(a){__p&&__p();g.bumpCounter("send_to_handler");var b=[];this.$1.onBatch(a);for(var a=a.getFrames(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;try{switch(e.type){case h.StreamFrameType.DATA:this.$1.onData(e.getData().decodeData());b.push(e.getData());break;case h.StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(e.getStatusUpdate().status);break;case h.StreamFrameType.LOG:e=e.getLog().message;e!=null&&this.$1.onLog(e);break;default:throw new Error("Frame with unexpected type")}}catch(a){g.bumpCounter("send_to_handler_error"),g.exception(a,"Failed sending frame to stream handler")}}this.$7(b)};b.$7=function(a){__p&&__p();var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.shouldAck===!0&&e.dataId!=null){var f=new i.GatewayStreamDataAck();f.streamId=e.streamId;f.dataId=e.dataId;f.success=!0;b.push(f)}}this.$3.sendDataAcks(b)};return a}();e.exports=a}),null);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={},this.$2=new Set()}var b=a.prototype;b.addHook=function(a){this.$2.add(a)};b.removeHook=function(a){this.$2["delete"](a)};b.onConnectAttempt=function(){this.$2.forEach(function(a){a.onConnectAttempt()})};b.onConnectFailure=function(){this.$2.forEach(function(a){a.onConnectFailure()})};b.onConnected=function(){this.$2.forEach(function(a){a.onConnected()})};b.onConnectSuccess=function(){this.$2.forEach(function(a){a.onConnectSuccess()})};b.onConnectionLost=function(){this.$2.forEach(function(a){a.onConnectionLost()})};b.onSubscribe=function(a){this.$2.forEach(function(b){b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$2.forEach(function(b){b.onUnsubscribe(a)})};b.onPublish=function(a){this.$2.forEach(function(b){b.onPublish(a)})};b.onMessage=function(a){this.$2.forEach(function(b){b.onMessage(a)})};return a}();e.exports=a}),null);
__d("FantailLogger",["FantailConfig"],(function(a,b,c,d,e,f,g){__p&&__p();var h=g.FantailLogQueue;a={debug:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];h&&(c=h.get(a)).debug.apply(c,[b].concat(e))},info:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];h&&(c=h.get(a)).info.apply(c,[b].concat(e))},warn:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];h&&(c=h.get(a)).warn.apply(c,[b].concat(e))},error:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];h&&(c=h.get(a)).error.apply(c,[b].concat(e))}};e.exports=a}),null);
__d("Log",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={DEBUG:3,INFO:2,WARNING:1,ERROR:0};b=function(a,b,c){for(var d=arguments.length,e=new Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];var h=0,i=c.replace(/%s/g,function(){return String(e[h++])}),j=window.console;j&&g.level>=b&&j[a in j?a:"log"](i)};var g={level:-1,Level:a,debug:b.bind(null,"debug",a.DEBUG),info:b.bind(null,"info",a.INFO),warn:b.bind(null,"warn",a.WARNING),error:b.bind(null,"error",a.ERROR),log:b};e.exports=g}),null);
__d("MqttLogger",["BanzaiODS","FantailLogger","FBLogger","Log","LogHistory","MqttWsClientTypedLogger","Random","gkx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();var o="mqtt_client",p="MqttJsClient",q=null,r={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish"};a=function(){__p&&__p();a.getInstance=function(){q||(q=new a());return q};function a(){this.$1=k.getInstance(o),this.$2=0,this.$3=n("778292"),this.$4=Math.floor(m.random()*Number.MAX_SAFE_INTEGER),this.$5=Date.now()}var b=a.prototype;b.setAppId=function(a){this.$2===0&&(this.$2=a)};b.logConnect=function(a){var b=a.sessionID,c=a.connectionStatus,d=a.duration,e=a.hostname,f=a.attemptNumber,g=a.failTotal,h=a.successTotal,i=a.subscribedTopics,j=a.errorCode;a=a.errorMessage;var k=c?"success":"failed";this.bumpCounter(r.CONNECT+"."+k);k=new l().setUserSessionID(this.$4).setSessionID(b).setHref(window.location.hostname).setConnectionStatus(c).setDuration(d).setHostname(e).setAttemptNumber(f).setFailTotal(g).setSuccessTotal(h).setTimePassed(Date.now()-this.$5).setSubscribedTopics(i).setErrorCode(j).setErrorMessage(a);this.$6(r.CONNECT,k)};b.logDisconnect=function(a){var b=a.sessionID,c=a.errorCode,d=a.errorMessage;a=a.duration;this.bumpCounter(r.DISCONNECT);b=new l().setUserSessionID(this.$4).setSessionID(b).setHref(window.location.hostname).setDuration(a).setErrorCode(c).setErrorMessage(d).setTimePassed(Date.now()-this.$5);this.$6(r.DISCONNECT,b)};b.logPublish=function(a){var b=a.sessionID,c=a.topic,d=a.connectionStatus;a=a.publishStatus;this.bumpCounter(r.PUBLISH+"."+c);b=new l().setUserSessionID(this.$4).setHref(window.location.hostname).setSessionID(b).setTopic(c).setConnectionStatus(d).setPublishStatus(a).setTimePassed(Date.now()-this.$5);this.$6(r.PUBLISH,b)};b.logError=function(a,b){try{i(o).catching(a).mustfix(b),this.$7(h.error,b)}catch(a){}};b.logErrorWarn=function(a,b){try{i(o).catching(a).warn(b),this.$7(h.warn,b)}catch(a){}};b.logWarn=function(a,b){try{this.$1.warn(a,b),this.$7(h.warn,b)}catch(a){}};b.debugTrace=function(a,b){try{this.$1.debug(a,b),this.$7(h.debug,b)}catch(a){}};b.bumpCounter=function(a){this.$2!==0&&g.bumpEntityKey("mqtt_ws_client",this.$2+"."+a),g.bumpEntityKey("mqtt_ws_client",a)};b.$6=function(a,b){b.setEventType(a);b.setAppID(this.$2);b.setOnline(this.$8());var c=JSON.stringify(b.getData());this.$1.log(a,c);a!==r.PUBLISH&&b.log();this.$7(h.info,c)};b.$7=function(a,b){n("676936")&&a(p,b)};b.$8=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};return a}();e.exports=a}),null);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,b){this.errorCode=a,this.errorMessage=b};b=function(a,b){this.mqttError=a,this.connAck=b};c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));e.exports={MqttError:a,MqttChannelError:c,ConnectFailure:b}}),null);
/**
 * License: https://www.facebook.com/legal/license/Irg6QaR_7LF/
 */
__d("paho-mqtt",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();(function(a,b){typeof f==="object"&&typeof e==="object"?e.exports=b():typeof define==="function"&&define.amd?define(b):typeof f==="object"?f=b():(typeof a.Paho==="undefined"&&(a.Paho={}),a.Paho.MQTT=b())})(this,function(){__p&&__p();var b=function(b){__p&&__p();var c="@VERSION@",d={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},e=function(a,b){__p&&__p();for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(Object.prototype.hasOwnProperty.call(b,c)){if(typeof a[c]!==b[c])throw new Error(j(h.INVALID_TYPE,[typeof a[c],c]))}else{var d="Unknown property, "+c+". Valid properties are:";for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d=d+" "+e);throw new Error(d)}},f=function(a,b){return function(){return a.apply(b,arguments)}},h={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out. SocketState: {0}, HasSocketError: {1}."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out. HasSocketError: {0}."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed: code {0} reason {1} wasClean {2}."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},i={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},j=function(a,b){__p&&__p();a=a.text;if(b){var c,d;for(var e=0;e<b.length;e++){c="{"+e+"}";d=a.indexOf(c);if(d>0){var f=a.substring(0,d);d=a.substring(d+c.length);a=f+b[e]+d}}}return a},k=[0,6,77,81,73,115,100,112,3],l=[0,4,77,81,84,84,4],m=function(a,b){this.type=a;for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(this[c]=b[c])};m.prototype.encode=function(){__p&&__p();var a=(this.type&15)<<4,b=0,c=[],e=0,f;this.messageIdentifier!==void 0&&(b+=2);switch(this.type){case d.CONNECT:switch(this.mqttVersion){case 3:b+=k.length+3;break;case 4:b+=l.length+3;break}b+=s(this.clientId)+2;this.willMessage!==void 0&&(b+=s(this.willMessage.destinationName)+2,f=this.willMessage.payloadBytes,f instanceof Uint8Array||(f=new Uint8Array(h)),b+=f.byteLength+2);this.userName!==void 0&&(b+=s(this.userName)+2);this.password!==void 0&&(b+=s(this.password)+2);break;case d.SUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=s(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case d.UNSUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=s(this.topics[g]),b+=c[g]+2;break;case d.PUBREL:a|=2;break;case d.PUBLISH:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&(a|=1);e=s(this.payloadMessage.destinationName);b+=e+2;var h=this.payloadMessage.payloadBytes;b+=h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer));break;case d.DISCONNECT:break;default:break}var i=r(b),j=i.length+1;b=new ArrayBuffer(b+j);var m=new Uint8Array(b);m[0]=a;m.set(i,1);if(this.type==d.PUBLISH)j=p(this.payloadMessage.destinationName,e,m,j);else if(this.type==d.CONNECT){switch(this.mqttVersion){case 3:m.set(k,j);j+=k.length;break;case 4:m.set(l,j);j+=l.length;break}a=0;this.cleanSession&&(a=2);this.willMessage!==void 0&&(a|=4,a|=this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));this.userName!==void 0&&(a|=128);this.password!==void 0&&(a|=64);m[j++]=a;j=o(this.keepAliveInterval,m,j)}this.messageIdentifier!==void 0&&(j=o(this.messageIdentifier,m,j));switch(this.type){case d.CONNECT:j=p(this.clientId,s(this.clientId),m,j);this.willMessage!==void 0&&(j=p(this.willMessage.destinationName,s(this.willMessage.destinationName),m,j),j=o(f.byteLength,m,j),m.set(f,j),j+=f.byteLength);this.userName!==void 0&&(j=p(this.userName,s(this.userName),m,j));this.password!==void 0&&(j=p(this.password,s(this.password),m,j));break;case d.PUBLISH:m.set(h,j);break;case d.SUBSCRIBE:for(var g=0;g<this.topics.length;g++)j=p(this.topics[g],c[g],m,j),m[j++]=this.requestedQos[g];break;case d.UNSUBSCRIBE:for(var g=0;g<this.topics.length;g++)j=p(this.topics[g],c[g],m,j);break;default:}return b};function n(a,b){__p&&__p();var c=b,e=a[b],f=e>>4;e=e&=15;b+=1;var g,h=0,i=1;do{if(b==a.length)return[null,c];g=a[b++];h+=(g&127)*i;i*=128}while((g&128)!==0);g=b+h;if(g>a.length)return[null,c];i=new m(f);switch(f){case d.CONNACK:h=a[b++];h&1&&(i.sessionPresent=!0);i.returnCode=a[b++];break;case d.PUBLISH:c=e>>1&3;f=q(a,b);b+=2;h=u(a,b,f);b+=f;c>0&&(i.messageIdentifier=q(a,b),b+=2);f=new z(a.subarray(b,g));(e&1)==1&&(f.retained=!0);(e&8)==8&&(f.duplicate=!0);f.qos=c;f.destinationName=h;i.payloadMessage=f;break;case d.PUBACK:case d.PUBREC:case d.PUBREL:case d.PUBCOMP:case d.UNSUBACK:i.messageIdentifier=q(a,b);break;case d.SUBACK:i.messageIdentifier=q(a,b);b+=2;i.returnCode=a.subarray(b,g);break;default:break}return[i,g]}function o(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function p(a,b,c,d){d=o(b,c,d);t(a,c,d);return d+b}function q(a,b){return 256*a[b]+a[b+1]}function r(a){var b=new Array(1),c=0;do{var d=a%128;a=a>>7;a>0&&(d|=128);b[c++]=d}while(a>0&&c<4);return b}function s(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d>2047?(55296<=d&&d<=56319&&(c++,b++),b+=3):d>127?b+=2:b++}return b}function t(a,b,c){__p&&__p();c=c;for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);if(55296<=e&&e<=56319){var f=a.charCodeAt(++d);if(isNaN(f))throw new Error(j(h.MALFORMED_UNICODE,[e,f]));e=(e-55296<<10)+(f-56320)+65536}e<=127?b[c++]=e:e<=2047?(b[c++]=e>>6&31|192,b[c++]=e&63|128):e<=65535?(b[c++]=e>>12&15|224,b[c++]=e>>6&63|128,b[c++]=e&63|128):(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128,b[c++]=e>>6&63|128,b[c++]=e&63|128)}return b}function u(a,b,c){__p&&__p();var d="",e,f=b;while(f<b+c){var g=a[f++];if(g<128)e=g;else{var i=a[f++]-128;if(i<0)throw new Error(j(h.MALFORMED_UTF,[g.toString(16),i.toString(16),""]));if(g<224)e=64*(g-192)+i;else{var k=a[f++]-128;if(k<0)throw new Error(j(h.MALFORMED_UTF,[g.toString(16),i.toString(16),k.toString(16)]));if(g<240)e=4096*(g-224)+64*i+k;else{var l=a[f++]-128;if(l<0)throw new Error(j(h.MALFORMED_UTF,[g.toString(16),i.toString(16),k.toString(16),l.toString(16)]));if(g<248)e=262144*(g-240)+4096*i+64*k+l;else throw new Error(j(h.MALFORMED_UTF,[g.toString(16),i.toString(16),k.toString(16),l.toString(16)]))}}}e>65535&&(e-=65536,d+=String.fromCharCode(55296+(e>>10)),e=56320+(e&1023));d+=String.fromCharCode(e)}return d}var v=function(a,b,c){__p&&__p();this._client=a;this._window=b;this._keepAliveInterval=c*1e3;this.isReset=!1;var e=new m(d.PINGREQ).encode(),f=function(a){return function(){return i.apply(a)}},i=function(){!this.isReset?(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(h.PING_TIMEOUT.code,j(h.PING_TIMEOUT,[this._client._hasSocketError]))):(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(e),this.timeout=g(f(this),this._keepAliveInterval))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=g(f(this),this._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(a,b,c,d,e){this._window=b;c||(c=30);b=function(b,a,c){return function(){return b.apply(a,c)}};this.timeout=g(b(d,a,e),c*1e3);this.cancel=function(){this._window.clearTimeout(this.timeout)}},x=function(a,c,d,e,f){__p&&__p();if(!("WebSocket"in b&&b.WebSocket!==null))throw new Error(j(h.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in b&&b.ArrayBuffer!==null))throw new Error(j(h.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",a,c,d,e,f);this.host=c;this.port=d;this.path=e;this.uri=a;this.clientId=f;this._wsuri=null;this._localKey=c+":"+d+(e!="/mqtt"?":"+e:"")+":"+f+":";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0};x.prototype.host=null;x.prototype.port=null;x.prototype.path=null;x.prototype.uri=null;x.prototype.clientId=null;x.prototype.socket=null;x.prototype.connected=!1;x.prototype.maxMessageIdentifier=6e4;x.prototype.connectOptions=null;x.prototype.hostIndex=null;x.prototype.onConnected=null;x.prototype.onConnectionLost=null;x.prototype.onMessageDelivered=null;x.prototype.onMessageArrived=null;x.prototype.traceFunction=null;x.prototype._msg_queue=null;x.prototype._buffered_msg_queue=null;x.prototype._connectTimeout=null;x.prototype.sendPinger=null;x.prototype.receivePinger=null;x.prototype._reconnectInterval=1;x.prototype._reconnecting=!1;x.prototype._hasSocketError=!1;x.prototype._reconnectTimeout=null;x.prototype.disconnectedPublishing=!1;x.prototype.disconnectedBufferSize=5e3;x.prototype.receiveBuffer=null;x.prototype._traceBuffer=null;x.prototype._MAX_TRACE_ENTRIES=100;x.prototype.connect=function(a){__p&&__p();var b=this._traceMask(a,"password");this._trace("Client.connect",b,this.socket,this.connected);if(this.connected)throw new Error(j(h.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(j(h.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};x.prototype.subscribe=function(a,b){__p&&__p();this._trace("Client.subscribe",a,b);if(!this.connected)throw new Error(j(h.INVALID_STATE,["not connected"]));var c=new m(d.SUBSCRIBE);c.topics=[a];b.qos!==void 0?c.requestedQos=[b.qos]:c.requestedQos=[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:j(a)})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.SUBSCRIBE_TIMEOUT.code,errorMessage:j(h.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};x.prototype.unsubscribe=function(a,b){__p&&__p();this._trace("Client.unsubscribe",a,b);if(!this.connected)throw new Error(j(h.INVALID_STATE,["not connected"]));var c=new m(d.UNSUBSCRIBE);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.UNSUBSCRIBE_TIMEOUT.code,errorMessage:j(h.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};x.prototype.send=function(a){this._trace("Client.send",a);wireMessage=new m(d.PUBLISH);wireMessage.payloadMessage=a;a.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage,null));this._schedule_message(wireMessage);return wireMessage.messageIdentifier};x.prototype.disconnect=function(){this._trace("Client.disconnect");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw new Error(j(h.INVALID_STATE,["not connecting or connected"]));wireMessage=new m(d.DISCONNECT);this._notify_msg_sent[wireMessage]=f(this._disconnected,this);this._schedule_message(wireMessage)};x.prototype.getTraceLog=function(){if(this._traceBuffer!==null){this._trace("Client.getTraceLog",new Date());this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var a in this._sentMessages)this._trace("_sentMessages ",a,this._sentMessages[a]);for(var a in this._receivedMessages)this._trace("_receivedMessages ",a,this._receivedMessages[a]);return this._traceBuffer}};x.prototype.startTrace=function(){this._traceBuffer===null&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date(),c)};x.prototype.stopTrace=function(){delete this._traceBuffer};x.prototype._doConnect=function(a){__p&&__p();if(this.connectOptions.useSSL){var b=a.split(":");b[0]="wss";a=b.join(":")}this._wsuri=a;this.connected=!1;this.connectOptions.ignoreSubProtocol?this.socket=new WebSocket(a):this.connectOptions.mqttVersion<4?this.socket=new WebSocket(a,["mqttv3.1"]):this.socket=new WebSocket(a,["mqtt"]);this.socket.binaryType="arraybuffer";this.socket.onopen=f(this._on_socket_open,this);this.socket.onmessage=f(this._on_socket_message,this);this.socket.onerror=f(this._on_socket_error,this);this.socket.onclose=f(this._on_socket_close,this);this.sendPinger=new v(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new v(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new w(this,window,this.connectOptions.timeout,this._onConnectTimeout,[])};x.prototype._schedule_message=function(a){this._msg_queue.push(a),this.connected&&this._process_queue()};x.prototype.store=function(a,b){};x.prototype.restore=function(a){};x.prototype._process_queue=function(){var a=null,b=this._msg_queue.reverse();while(a=b.pop())this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};x.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error("Too many messages:"+b);while(this._sentMessages[this._message_identifier]!==void 0)this._message_identifier++;a.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;a.type===d.PUBLISH&&this.store("Sent:",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};x.prototype._on_socket_open=function(){var a=new m(d.CONNECT,this.connectOptions);a.clientId=this.clientId;this._socket_send(a);this.connected=!0;this.connectOptions.onSocketOpen&&this.connectOptions.onSocketOpen()};x.prototype._on_socket_message=function(a){this._trace("Client._on_socket_message",a.data);a=this._deframeMessages(a.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};x.prototype._deframeMessages=function(a){__p&&__p();a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{c=0;while(c<a.length){var d=n(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}c<a.length&&(this.receiveBuffer=a.subarray(c))}catch(a){d=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(h.INTERNAL_ERROR.code,j(h.INTERNAL_ERROR,[a.message,d]));return}return b};x.prototype._handleMessage=function(a){__p&&__p();this._trace("Client._handleMessage",a);try{switch(a.type){case d.CONNACK:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();this.connectOptions.cleanSession&&(this._sentMessages={},this._receivedMessages={});if(a.returnCode===0)this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this.connected=!1;this._disconnected(h.CONNACK_RETURNCODE.code,j(h.CONNACK_RETURNCODE,[a.returnCode,i[a.returnCode]]),a.returnCode);break}var b=[];for(var c in this._sentMessages)Object.prototype.hasOwnProperty.call(this._sentMessages,c)&&b.push(this._sentMessages[c]);if(this._buffered_msg_queue.length>0){var e=null,f=this._buffered_msg_queue.reverse();while(e=f.pop())b.push(e),this.onMessageDelivered&&(this._notify_msg_sent[e]=this.onMessageDelivered(e.payloadMessage,null))}var b=b.sort(function(a,b){return a.sequence-b.sequence});for(var f=0,e=b.length;f<e;f++){var g=b[f];if(g.type==d.PUBLISH&&g.pubRecReceived){var k=new m(d.PUBREL,{messageIdentifier:g.messageIdentifier});this._schedule_message(k)}else this._schedule_message(g)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});f=!1;this._reconnecting&&(f=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(f,this._wsuri);this._process_queue();break;case d.PUBLISH:this._receivePublish(a);break;case d.PUBACK:e=a.messageIdentifier;var g=this._sentMessages[e];g&&(delete this._sentMessages[e],this.onMessageDelivered&&this.onMessageDelivered(g.payloadMessage,e));break;case d.PUBREC:var g=this._sentMessages[a.messageIdentifier];if(g){g.pubRecReceived=!0;var k=new m(d.PUBREL,{messageIdentifier:a.messageIdentifier});this.store("Sent:",g);this._schedule_message(k)}break;case d.PUBREL:b=this._receivedMessages[a.messageIdentifier];b&&(this._receiveMessage(b),delete this._receivedMessages[a.messageIdentifier]);f=new m(d.PUBCOMP,{messageIdentifier:a.messageIdentifier});this._schedule_message(f);break;case d.PUBCOMP:e=a.messageIdentifier;var g=this._sentMessages[e];delete this._sentMessages[e];this.onMessageDelivered&&this.onMessageDelivered(g.payloadMessage,e);break;case d.SUBACK:var g=this._sentMessages[a.messageIdentifier];g&&(g.timeOut&&g.timeOut.cancel(),a.returnCode[0]===128?g.onFailure&&g.onFailure(a.returnCode):g.onSuccess&&g.onSuccess(a.returnCode),delete this._sentMessages[a.messageIdentifier]);break;case d.UNSUBACK:var g=this._sentMessages[a.messageIdentifier];g&&(g.timeOut&&g.timeOut.cancel(),g.callback&&g.callback(),delete this._sentMessages[a.messageIdentifier]);break;case d.PINGRESP:this.sendPinger.reset();break;case d.DISCONNECT:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,j(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,j(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(a){k=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(h.INTERNAL_ERROR.code,j(h.INTERNAL_ERROR,[a.message,k]));return}};x.prototype._on_socket_error=function(a){this.connectOptions.ignoreSocketError||(this._reconnecting||this._disconnected(h.SOCKET_ERROR.code,j(h.SOCKET_ERROR,[a.data])),this.connectOptions.onSocketError&&this.connectOptions.onSocketError(a)),this._hasSocketError=!0};x.prototype._on_socket_close=function(a){this._reconnecting||this._disconnected(h.SOCKET_CLOSE.code,j(h.SOCKET_CLOSE,a!=null?[a.code,a.reason,a.wasClean]:[]))};x.prototype._socket_send=function(a){if(a.type==1){var b=this._traceMask(a,"password");this._trace("Client._socket_send",b)}else this._trace("Client._socket_send",a);this.socket.send(a.encode());this.sendPinger.reset()};x.prototype._receivePublish=function(a){__p&&__p();switch(a.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(a);break;case 1:var b=new m(d.PUBACK,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store("Received:",a);b=new m(d.PUBREC,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}};x.prototype._receiveMessage=function(a){this.onMessageArrived&&this.onMessageArrived(a.payloadMessage)};x.prototype._connected=function(a,b){this.onConnected&&this.onConnected(a,b)};x.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=this._reconnectInterval*2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};x.prototype._onConnectTimeout=function(){this._disconnected(h.CONNECT_TIMEOUT.code,j(h.CONNECT_TIMEOUT,[this.socket.readyState,this._hasSocketError]))};x.prototype._disconnected=function(a,b,c){__p&&__p();this._trace("Client._disconnected",a,b);if(a!==void 0&&this._reconnecting){this._reconnectTimeout=new w(this,window,this._reconnectInterval,this._reconnect);return}this.sendPinger.cancel();this.receivePinger.cancel();this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._msg_queue=[];this._buffered_msg_queue=[];this._notify_msg_sent={};this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.readyState===1&&this.socket.close(),delete this.socket);if(this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else{a===void 0&&(a=h.OK.code,b=j(h.OK));if(this.connected){this.connected=!1;this.onConnectionLost&&this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});if(a!==h.OK.code&&this.connectOptions.reconnect){this._reconnectInterval=1;this._reconnect();return}}else this.connectOptions.mqttVersion===4&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b,connack:c})}};x.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)typeof arguments[a]!=="undefined"&&arguments.splice(a,1,JSON.stringify(arguments[a]));var b=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:b})}if(this._traceBuffer!==null)for(var a=0,c=arguments.length;a<c;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),a===0?this._traceBuffer.push(arguments[a]):typeof arguments[a]==="undefined"?this._traceBuffer.push(arguments[a]):this._traceBuffer.push("  "+JSON.stringify(arguments[a]))};x.prototype._traceMask=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(d==b?c[d]="******":c[d]=a[d]);return c};var y=function(a,b,c,d){__p&&__p();var f;if(typeof a!=="string")throw new Error(j(h.INVALID_TYPE,[typeof a,"host"]));if(arguments.length==2){d=b;f=a;var g=f.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(g)a=g[4]||g[2],b=parseInt(g[7]),c=g[8];else throw new Error(j(h.INVALID_ARGUMENT,[a,"host"]))}else{arguments.length==3&&(d=c,c="/mqtt");if(typeof b!=="number"||b<0)throw new Error(j(h.INVALID_TYPE,[typeof b,"port"]));if(typeof c!=="string")throw new Error(j(h.INVALID_TYPE,[typeof c,"path"]));var i=a.indexOf(":")!==-1&&a.slice(0,1)!=="["&&a.slice(-1)!=="]";f="ws://"+(i?"["+a+"]":a)+":"+b+c}var k=0;for(var l=0;l<d.length;l++){var m=d.charCodeAt(l);55296<=m&&m<=56319&&l++;k++}if(typeof d!=="string"||k>65535)throw new Error(j(h.INVALID_ARGUMENT,[d,"clientId"]));var n=new x(f,a,b,c,d);this._getHost=function(){return a};this._setHost=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getPort=function(){return b};this._setPort=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getPath=function(){return c};this._setPath=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getURI=function(){return f};this._setURI=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getClientId=function(){return n.clientId};this._setClientId=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getOnConnected=function(){return n.onConnected};this._setOnConnected=function(a){if(typeof a==="function")n.onConnected=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onConnected"]))};this._getDisconnectedPublishing=function(){return n.disconnectedPublishing};this._setDisconnectedPublishing=function(a){n.disconnectedPublishing=a};this._getDisconnectedBufferSize=function(){return n.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){n.disconnectedBufferSize=a};this._getConnectOptions=function(){return n.connectOptions};this._getOnConnectionLost=function(){return n.onConnectionLost};this._setOnConnectionLost=function(a){if(typeof a==="function")n.onConnectionLost=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onConnectionLost"]))};this._getOnMessageDelivered=function(){return n.onMessageDelivered};this._setOnMessageDelivered=function(a){if(typeof a==="function")n.onMessageDelivered=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onMessageDelivered"]))};this._getOnMessageArrived=function(){return n.onMessageArrived};this._setOnMessageArrived=function(a){if(typeof a==="function")n.onMessageArrived=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onMessageArrived"]))};this._getTrace=function(){return n.traceFunction};this._setTrace=function(a){if(typeof a==="function")n.traceFunction=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onTrace"]))};this.connect=function(d){__p&&__p();d=d||{};e(d,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",ignoreSocketError:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",onSocketOpen:"function",onSocketError:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",ignoreSubProtocol:"boolean",uris:"object"});d.keepAliveInterval===void 0&&(d.keepAliveInterval=60);if(d.mqttVersion>4||d.mqttVersion<3)throw new Error(j(h.INVALID_ARGUMENT,[d.mqttVersion,"connectOptions.mqttVersion"]));d.mqttVersion===void 0?(d.mqttVersionExplicit=!1,d.mqttVersion=4):d.mqttVersionExplicit=!0;if(d.password!==void 0&&d.userName===void 0)throw new Error(j(h.INVALID_ARGUMENT,[d.password,"connectOptions.password"]));if(d.willMessage){if(!(d.willMessage instanceof z))throw new Error(j(h.INVALID_TYPE,[d.willMessage,"connectOptions.willMessage"]));d.willMessage.stringPayload=null;if(typeof d.willMessage.destinationName==="undefined")throw new Error(j(h.INVALID_TYPE,[typeof d.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}typeof d.cleanSession==="undefined"&&(d.cleanSession=!0);if(d.hosts){if(!(d.hosts instanceof Array))throw new Error(j(h.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));if(d.hosts.length<1)throw new Error(j(h.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));var g=!1;for(var b=0;b<d.hosts.length;b++){if(typeof d.hosts[b]!=="string")throw new Error(j(h.INVALID_TYPE,[typeof d.hosts[b],"connectOptions.hosts["+b+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(d.hosts[b])){if(b===0)g=!0;else if(!g)throw new Error(j(h.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}else if(g)throw new Error(j(h.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}if(!g){if(!d.ports)throw new Error(j(h.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(!(d.ports instanceof Array))throw new Error(j(h.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(d.hosts.length!==d.ports.length)throw new Error(j(h.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));d.uris=[];for(var b=0;b<d.hosts.length;b++){if(typeof d.ports[b]!=="number"||d.ports[b]<0)throw new Error(j(h.INVALID_TYPE,[typeof d.ports[b],"connectOptions.ports["+b+"]"]));g=d.hosts[b];var a=d.ports[b],i=g.indexOf(":")!==-1;f="ws://"+(i?"["+g+"]":g)+":"+a+c;d.uris.push(f)}}else d.uris=d.hosts}n.connect(d)};this.subscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};e(b,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(typeof b.qos!=="undefined"&&!(b.qos===0||b.qos===1||b.qos===2))throw new Error(j(h.INVALID_ARGUMENT,[b.qos,"subscribeOptions.qos"]));n.subscribe(a,b)};this.unsubscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};e(b,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");n.unsubscribe(a,b)};this.send=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof z)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(j(h.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));n.send(e)}else e=new z(b),e.destinationName=a,arguments.length>=3&&(e.qos=c),arguments.length>=4&&(e.retained=d),n.send(e)};this.publish=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof z)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(j(h.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));return n.send(e)}else{e=new z(b);e.destinationName=a;arguments.length>=3&&(e.qos=c);arguments.length>=4&&(e.retained=d);return n.send(e)}};this.disconnect=function(){n.disconnect()};this.getTraceLog=function(){return n.getTraceLog()};this.startTrace=function(){n.startTrace()};this.stopTrace=function(){n.stopTrace()};this.isConnected=function(){return n.connected}};Object.defineProperties(y.prototype,{host:{get:function(){return this._getHost()},set:function(a){this._setHost(a)}},port:{get:function(){return this._getPort()},set:function(a){this._setPort(a)}},path:{get:function(){return this._getPath()},set:function(a){this._setPath(a)}},clientId:{get:function(){return this._getClientId()},set:function(a){this._setClientId(a)}},onConnected:{get:function(){return this._getOnConnected()},set:function(a){this._setOnConnected(a)}},disconnectedPublishing:{get:function(){return this._getDisconnectedPublishing()},set:function(a){this._setDisconnectedPublishing(a)}},disconnectedBufferSize:{get:function(){return this._getDisconnectedBufferSize()},set:function(a){this._setDisconnectedBufferSize(a)}},onConnectionLost:{get:function(){return this._getOnConnectionLost()},set:function(a){this._setOnConnectionLost(a)}},connectOptions:{get:function(){return this._getConnectOptions()}},onMessageDelivered:{get:function(){return this._getOnMessageDelivered()},set:function(a){this._setOnMessageDelivered(a)}},onMessageArrived:{get:function(){return this._getOnMessageArrived()},set:function(a){this._setOnMessageArrived(a)}},trace:{get:function(){return this._getTrace()},set:function(a){this._setTrace(a)}}});var z=function(a){__p&&__p();var b;if(typeof a==="string"||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw j(h.INVALID_ARGUMENT,[a,"newPayload"]);this._getPayloadString=function(){if(typeof b==="string")return b;else return u(b,0,b.length)};this._getPayloadBytes=function(){if(typeof b==="string"){var a=new ArrayBuffer(s(b));a=new Uint8Array(a);t(b,a,0);return a}else return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(typeof a==="string")c=a;else throw new Error(j(h.INVALID_ARGUMENT,[a,"newDestinationName"]))};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(a===0||a===1||a===2)d=a;else throw new Error("Invalid argument:"+a)};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(typeof a==="boolean")e=a;else throw new Error(j(h.INVALID_ARGUMENT,[a,"newRetained"]))};var f=!1;this._getDuplicate=function(){return f};this._setDuplicate=function(a){f=a}};Object.defineProperties(z.prototype,{payloadString:{get:function(){return this._getPayloadString()}},payloadBytes:{get:function(){return this._getPayloadBytes()}},destinationName:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},topic:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},qos:{get:function(){return this._getQos()},set:function(a){this._setQos(a)}},retained:{get:function(){return this._getRetained()},set:function(a){this._setRetained(a)}},duplicate:{get:function(){return this._getDuplicate()},set:function(a){this._setDuplicate(a)}}});var A=function(a,b){a=new m(d.CONNECT,a);a.clientId=b;return a},B=function(a,b){b=new m(b);b.topics=[a];b.requestedQos=[1];b.messageIdentifier=this.messageSequenceId++;return b},C=function(a){return B(a,d.SUBSCRIBE)},D=function(a){return B(a,d.UNSUBSCRIBE)},E=function(a,b,c){var e;e=new z(b);e.destinationName=a;arguments.length>=3&&(e.qos=c);var f;f=new m(d.PUBLISH);f.payloadMessage=e;f.messageIdentifier=this.messageSequenceId++;return f},F=function(a){__p&&__p();a=new Uint8Array(a);var b=[],c=0;while(c<a.length){var d=n(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}return b};return{TESTING_CLIENT_IMPL:x,Client:y,Message:z,Encoder:{encodeConnect:A,encodePublish:E,encodeSubscribe:C,encodeUnsubscribe:D,messageSequenceId:1},Decoder:{decode:F}}}(window);return b})}),null);
__d("MqttWsClient",["MqttLogger","MqttTypes","gkx","paho-mqtt"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=h.ConnectFailure,l=h.MqttError,m=function(a){};a=function(){__p&&__p();function a(a){this.$2=a,this.$3=g.getInstance(),this.$1=new j.Client(this.$2,"mqttwsclient"),this.$4={}}var b=a.prototype;b.connect=function(a){__p&&__p();var b=this;this.$4=a;this.$1.onConnectionLost=function(b){a.onConnectionLost(new l(b.errorCode,b.errorMessage))};this.$1.onMessageArrived=function(c){try{var d=c.destinationName;b.$3.bumpCounter("message_arrived.ws."+d);a.onMessageArrived(d,c.payloadString)}catch(a){b.$3.logError(a,"Unable to parse message");b.$3.bumpCounter((d="error_processing_message."+c.destinationName)!=null?d:"null")}};this.$1.onMessageDelivered=function(b,c){return a.onMessageDelivered(b,c)};this.$1.connect({userName:a.userName,mqttVersion:a.mqttVersion,keepAliveInterval:a.keepAliveInterval,onFailure:function(b){if(b!=null){var c=new l(b.errorCode,b.errorMessage);c=new k(c,b.connack)}else c=new k(new l(1,"No ResponseObject"),-1);a.onConnectFailure(c)},onSuccess:function(){return a.onConnectSuccess()},ignoreSubProtocol:a.ignoreSubProtocol,onSocketOpen:function(){return a.onConnection()},onSocketError:function(b){return a.onConnectionError(b)},ignoreSocketError:i("811275")})};b.unsubscribe=function(a){this.$1.unsubscribe(a)};b.subscribe=function(a){this.$1.subscribe(a,{})};b.publish=function(a,b,c){return this.$1.publish(a,b,c,!1)};b.isConnected=function(){return this.$1.isConnected()};b.disconnect=function(){this.$4!=null&&(this.$4.onConnectSuccess=m,this.$4.onConnectFailure=m,this.$4.onConnection=m,this.$4.onConnectionError=m,this.$4.onMessageArrived=m,this.$4.onMessageDelivered=m),this.$1.connectOptions!=null&&(this.$1.connectOptions.onConnectSuccess=m,this.$1.connectOptions.onConnectFailure=m,this.$1.connectOptions.onConnection=m,this.$1.connectOptions.onConnectionError=m,this.$1.connectOptions.onMessageArrived=m,this.$1.connectOptions.onMessageDelivered=m),this.isConnected()&&this.$1.disconnect()};return a}();e.exports=a}),null);
__d("MqttConnection",["Promise","MqttConnectionHookCollection","MqttLogger","MqttTypes","MqttWsClient","Random","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();j.ConnectFailure;var o=j.MqttChannelError;j.MqttError;var p=10,q="publish",r="subscribe",s="unsubscribe",t=function(a){},u=18e4,v=5*1e3,w=15,x=21,y=new Set(["AMQJS0007E","AMQJS0008I"]);function z(a){return a!=null?a.split(" ")[0]:""}a=function(){__p&&__p();function a(){__p&&__p();this.$7=!1;this.$10=i.getInstance();this.$11="Disconnected";this.$16=new Set();this.$18=[];this.$19=new Map();this.$20=0;this.$21=0;this.$17=0;this.$13=0;this.$14=0;this.$7=!1;this.$5="";this.$12="";this.$15=0;this.$9="";this.$8=0;this.$6=null;var a=function(){};this.$1=a;this.$2=a;this.$3=a;this.$22=new h();this.$4=function(){return[]}}var b=a.prototype;b.run=function(a){__p&&__p();var b=this,c=a.onStateChange,d=a.onJSError,e=a.onMessageReceived,f=a.endpoint,g=a.deviceId,h=a.userFbid,i=a.appId,j=a.subscribedTopics,k=a.capabilities;a=a.extraConnectMessageProvider;if(this.$7){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=c;this.$3=e;this.$5=f;this.$9=g;this.$12=h;this.$15=i;this.$7=!0;this.$13=0;this.$17=k;this.$2=d||t;j&&j.forEach(function(a){return b.$16.add(a)});this.$4=a;this.$23()};b.shutdown=function(){this.$24(),this.$7=!1,this.$10.debugTrace("shutdown","Shutdown")};b.subscribe=function(a){this.$16.add(a);if(!this.$25(r))return m("676932");this.$26(a);return!0};b.publish=function(a,b,c){var d={resolve:function(){},reject:function(a){}},e=new g(function(a,b){d.resolve=a,d.reject=b}),f=this.$25(q),h="unknown";if(!f)c.skipBuffer===!0?(h="skipped",d.resolve()):(this.$18.push({topic:a,payload:b,qos:c.qos,ack:d}),h="buffered");else{b=this.$27(a,b,c.qos,d);h=b===!0?"published":"failed"}this.$10.logPublish({sessionID:this.$8,topic:a,connectionStatus:f,publishStatus:h});return e};b.unsubscribe=function(a){this.$16["delete"](a);if(!this.$25(s))return!1;this.$28(a);return!0};b.addHook=function(a){this.$22.addHook(a)};b.removeHook=function(a){this.$22.removeHook(a)};b.isRunning=function(){return this.$7};b.testOnlyGetSubscribedTopics=function(){return this.$16};b.$24=function(){this.$7&&this.$6!=null&&(this.$29("Disconnected"),this.$6!=null&&this.$6.disconnect(),this.$6=null)};b.$29=function(a){a!==this.$11&&(this.$11=a,this.$1(a))};b.$30=function(){return new k(this.$5)};b.$23=function(){__p&&__p();var a=this;if(!this.$7)return;this.$29("Connecting");var b=Date.now();this.$8=this.$31();var c=Array.from(this.$16);try{this.$6=this.$30();if(this.$6==null)throw new Error("Invalid State: Unable to create client");var d=this.$32(),e=Date.now(),f={u:this.$12,s:this.$8,cp:1,ecp:this.$17,chat_on:!0,fg:1,d:this.$33(),ct:"websocket",mqtt_sid:"",aid:this.$15,st:c,pm:d,dc:""};this.$6!=null&&(this.$6.connect({userName:JSON.stringify(f),mqttVersion:3,keepAliveInterval:p,ignoreSubProtocol:!0,onConnectFailure:function(b){return a.$34(b,e,c)},onConnectSuccess:function(){return a.$35(e,c)},onConnection:function(){return a.$36(d,c)},onConnectionError:function(b){return a.$37(b)},onConnectionLost:function(b){return a.$38(b)},onMessageArrived:function(b,c){return a.$39(b,c)},onMessageDelivered:function(b,c){return a.$40(b,c)}}),this.$22.onConnectAttempt())}catch(a){this.$10.bumpCounter("js_error_in_init_exception"),this.$29("Disconnected"),this.$41(!1,b,c,14,a.message),a&&this.$10.logErrorWarn(a,"js error"),this.$42(new o(!1,"js error",a),"client_init")}};b.$32=function(){var a=this.$4(),b=65536;a=a.map(function(a){a.messageId=b--;return a});return a};b.$43=function(){var a=this;this.$18.forEach(function(b){a.$27(b.topic,b.payload,b.qos,b.ack)});this.$18=[]};b.$26=function(a){try{if(this.$6!=null){this.$6.subscribe(a);this.$10.debugTrace("subscribe","Subscribing to "+a);this.$22.onSubscribe(a);return!0}}catch(b){this.$10.logError(b,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+a)}return!1};b.$28=function(a){try{if(this.$6!=null){this.$6.unsubscribe(a);this.$10.debugTrace("unsubscribe","Unsubscribing to "+a);this.$22.onUnsubscribe(a);return!0}}catch(b){this.$10.logError(b,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+a)}return!1};b.$27=function(a,b,c,d){__p&&__p();if(this.$6!=null)try{b=this.$6.publish(a,b,c);c=b!=null?b:"null";this.$10.debugTrace("_publish","publish "+a+" with messageId:"+c);this.$22.onPublish(a);b!=null?this.$19.set(b,d):d.resolve();return!0}catch(b){this.$10.logError(b,"Exception publishing");this.$10.bumpCounter("publish_exception."+a);d.reject(b);return!1}else return!1};b.$44=function(a){__p&&__p();var b=this;a===void 0&&(a=null);if(!this.$7)return;this.$24();this.$45();this.$8=-1;this.$14=0;a=(a=a)!=null?a:Math.pow(2,Math.min(this.$13,6))*(1e3+l.random()*200);this.$10.debugTrace("_scheduleReconnect","Reconnect in "+a+" ms");n(function(){b.$23()},a);this.$13+=1};b.$45=function(){if(!m("807517"))return;var a=Date.now()-this.$14,b=this.$14!==0&&a>v,c=this.$13>w;(b||c)&&(this.$13=0);this.$14!==0&&a<=v&&this.$10.bumpCounter("short_lived_session");c&&this.$10.bumpCounter("connection_attempt_limit")};b.$31=function(){return Math.floor(l.random()*Number.MAX_SAFE_INTEGER)};b.$33=function(){return this.$9};b.$25=function(a){__p&&__p();if(!this.$7){this.$10.debugTrace("_ensureConnected","Mqtt connection: "+a+" called when not running");return!1}if(this.$6==null){this.$10.debugTrace("_ensureConnected","Mqtt connection: "+a+" called when not connected, ignored");return!1}var b=this.$6.isConnected();if(!b){this.$10.debugTrace("_ensureConnected","Mqtt connection: "+a+" called with client not connected");return!1}return!0};b.$41=function(a,b,c,d,e){a===!0?this.$21++:this.$20++,this.$10.logConnect({sessionID:this.$8,connectionStatus:a,duration:Date.now()-b,hostname:this.$5,attemptNumber:this.$13,failTotal:this.$20,successTotal:this.$21,subscribedTopics:c,errorCode:d,errorMessage:e})};b.$34=function(a,b,c){__p&&__p();var d=a.mqttError,e=d.errorMessage;this.$10.debugTrace("connect","Connect failed "+e);this.$22.onConnectFailure();this.$41(!1,b,c,d.errorCode,e);if(a.connAck!=null){this.$10.bumpCounter("connect_failure."+a.connAck);if(a.connAck===x){this.$44(u);return}}y.has(z(e))&&this.$42(new o(!0,e),"connect_failure");this.$44()};b.$36=function(a,b){var c=this;this.$10.debugTrace("Connect","Socket established");this.$22.onConnected();b.forEach(function(a){c.$22.onSubscribe(a)});a.forEach(function(a){c.$22.onPublish(a.topic)});this.$43()};b.$35=function(a,b){this.$10.debugTrace("connect","Connect success"),this.$22.onConnectSuccess(),this.$41(!0,a,b),this.$29("Connected"),this.$46(b),m("807517")||(this.$13=0),this.$14=Date.now(),this.$18.length>0&&this.$10.bumpCounter("publish_buffer_not_empty")};b.$38=function(a){a.errorCode&&this.$10.logDisconnect({sessionID:this.$8,errorCode:a.errorCode,errorMessage:a.errorMessage,duration:Date.now()-this.$14}),this.$10.debugTrace("connect","connection lost"),this.$22.onConnectionLost(),this.$44()};b.$37=function(a){m("676934")?this.$10.bumpCounter("websocket_error.error"):this.$42(new o(!0,"socket error",a),"websocket_error")};b.$39=function(a,b){this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$22.onMessage(a);this.$10.bumpCounter("message_arrived."+a);try{this.$3(a,b)}catch(b){this.$10.logError(b,"Listener threw error"),this.$10.bumpCounter("listener_error."+a)}};b.$40=function(a,b){a=b!=null?b:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+a+"}");if(b==null)return;a=this.$19.get(b);if(a==null)return;this.$19["delete"](b);a.resolve()};b.$46=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$16.has(a)||b.unsubscribe(a)});a=new Set(this.$16);a.forEach(function(a){c.has(a)||b.subscribe(a)})};b.$42=function(a,b){try{this.$10.bumpCounter("js_error_in_init");this.$10.bumpCounter(b+".error");var c=a?a.message:"error";this.$10.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(a,"JS error while trying to log previous error")}};return a}();e.exports=a}),null);
__d("MqttChannel",["ChannelClientID","MqttConnection","MqttLogger"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){__p&&__p();var b=a.endpoint,c=a.userFbid,d=a.appId,e=a.initialSubscribedTopics;a=a.capabilities;this.$8=i.getInstance();this.$8.setAppId(d);this.$9=d;this.$10=c;this.$1=b;this.$4="Disconnected";this.$2=[];this.$3=new Set();this.$5=new Map();this.$7=new h();this.$6=g.getID();this.$11(e,a)}var b=a.prototype;b.$11=function(a,b){__p&&__p();var c=this;if(this.$7.isRunning()){this.$12("run","Connection started calling run again");return}this.$7.run({onStateChange:function(a){c.$13(a)},onJSError:function(a){c.$14(a)},onMessageReceived:function(a,b){c.$15(a,b)},deviceId:this.$6,endpoint:this.$1,userFbid:this.$10,appId:this.$9,subscribedTopics:a,extraConnectMessageProvider:function(){return c.$16()},capabilities:b})};b.shutdown=function(){this.$7&&this.$7.shutdown()};b.publish=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return this.$7.publish(a,b,c)};b.subscribe=function(a,b){this.$7.subscribe(a);var c=this.$5.get(a);!c?(c=[b],this.$5.set(a,c)):c.push(b)};b.subscribeChannelEvents=function(a){this.$2.push(a)};b.registerExtraConnectPayloadProvider=function(a){var b=this;this.$3.add(a);if(this.$7.isRunning()){a=a.getPublishMessages();a.forEach(function(a){b.$7.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};b.unregisterExtraConnectPayloadProvider=function(a){this.$3["delete"](a)};b.unsubscribe=function(a){this.$7.unsubscribe(a),this.$5["delete"](a)};b.getDeviceId=function(){return this.$6};b.getConnectionState=function(){return this.$4};b.getEndpoint=function(){return this.$1};b.addHook=function(a){this.$7.addHook(a)};b.removeHook=function(a){this.$7.removeHook(a)};b.testOnlyResetState=function(){this.$1="",this.$2=[],this.$4="Disconnected",this.$5=new Map(),this.$8=i.getInstance(),this.$7=new h(),this.$6=g.getID()};b.testOnlyGetSubscribedTopics=function(){return new Set(this.$5.keys())};b.testOnlyGetConnectionSubscribedTopics=function(){return this.$7.testOnlyGetSubscribedTopics()};b.testOnlyMessageReceived=function(a,b){this.$15(a,b)};b.testOnlyAddTopicListener=function(a,b){var c=this.$5.get(a);!c?(c=[b],this.$5.set(a,c)):c.push(b)};b.$15=function(a,b){__p&&__p();var c=this.$5.get(a);if(!c)this.$8.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var a=c,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;try{e(b)}catch(a){this.$8.logError(a,"Listener exception"),this.$8.bumpCounter("listener_error")}}};b.$14=function(a){__p&&__p();for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};b.$13=function(a){this.$4=a,this.$12("_changeState","Connection state = "+a),this.$17(a)};b.$17=function(a){__p&&__p();for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onMQTTStateChanged(a)}};b.$16=function(){var a=[];this.$3.forEach(function(b){b=b.getPublishMessages();Array.prototype.push.apply(a,b)});return a};b.$12=function(a,b){this.$8.debugTrace(a,"Mqtt channel: "+b)};return a}();e.exports=a}),null);
__d("FBMqttChannel",["MqttChannel","MqttWebConfig"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=new g({endpoint:h.endpoint,userFbid:h.fbid,appId:h.appID,initialSubscribedTopics:h.subscribedTopics,capabilities:h.capabilities})}),null);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal","FBMqttChannel","uuid"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m="Connected",n="Disconnected",o=32*1024,p="/br_sr",q="/sr_res",r=null;a=function(){__p&&__p();function a(a){this.$1=[],this.$2=0,this.$3=null,this.$4=0,this.$5=new Map(),this.$6=a!=null?a:k,h.setClientSessionId(l()),this.$7()}a.get=function(){r==null&&(r=new a(k));return r};var b=a.prototype;b.sendNewStreamRequest=function(b,c){c=new g(b,c,this);var d=b.getRequest();this.$5.set(d.streamId,c);this.getStreamCount()<=a.maxStreamCount?this.$8(d):(h.bumpCounter("socket_request_throttled_max_streams"),h.warn("Maximum stream count reached, will not send request: "+JSON.stringify(b.getRequest().getHeaders())),this.$9(c,d.streamId))};b.sendRetryStreamRequest=function(a){this.$8(a.getRequest())};b.sendCancel=function(a){h.bumpCounter("socket_send_cancel");var b=new j.GatewayStreamStatusUpdate();b.streamId=a;b.status=i.StreamStatus.CLOSED;this.$10(b);this.removeStream(a)};b.sendDataAcks=function(a){h.bumpCounter("socket_send_data_ack",a.length),this.$11(a)};b.removeStream=function(a){this.$5["delete"](a)};b.getStreamCount=function(){return this.$5.size};b.getNextStreamId=function(){this.$4++;return this.$4};b.onMQTTStateChanged=function(a){this.$12();if(a!=n&&a!=m||this.$3==a)return;this.$3=a;h.info("MQTTStateChanged: "+a);a==n?(h.bumpCounter("mqtt_state_disconnected"),this.$13()):a==m&&h.bumpCounter("mqtt_state_connected")};b.$8=function(a){h.bumpCounter("socket_send_request"),this.$1.push(j.GatewayStreamFrame.newRequestFrame(a)),this.$12()};b.$10=function(a){this.$1.push(j.GatewayStreamFrame.newStatusUpdateFrame(a)),this.$12()};b.$11=function(a){__p&&__p();for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$1.push(j.GatewayStreamFrame.newDataAckFrame(d))}this.$12()};b.$14=function(){this.$2++;return this.$2};b.$12=function(){if(this.$6.getConnectionState()===m&&this.$1.length>0){try{this.$15(this.$1)}finally{this.$1=[]}return!0}return!1};b.$15=function(a){__p&&__p();var b=new j.GatewayStreamBatch(this.$14(),a);b=b.write();if(b.length>o){var c=Math.floor(a.length/2);if(c===0)throw new Error("Publish is too long: "+b.length);this.$15(a.slice(0,c));this.$15(a.slice(c,a.length))}else try{h.info("send message to "+p+" "+b),this.$6.publish(p,b),h.bumpCounter("mqtt_publish_success")}catch(a){h.exception(a,"Failed publishing to MQTT");h.bumpCounter("mqtt_publish_error");throw a}};b.$7=function(){__p&&__p();var a=this;h.info("Starting socket with endpoint "+this.$6.getEndpoint()+" useragent "+navigator.userAgent);this.$16();this.onMQTTStateChanged(this.$6.getConnectionState());this.$6.subscribeChannelEvents({onMQTTStateChanged:function(b){a.onMQTTStateChanged(b)},onJSError:function(a){var b=a!=null&&typeof a.isRecoverable==="boolean"?a.isRecoverable:!1;b?h.bumpCounter("mqtt_channel_recoverable_error"):(h.warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),h.bumpCounter("mqtt_channel_error"))}});this.$6.subscribe(p,function(a){throw new Error("Unexpected response: "+p+" "+a.toString())});this.$6.subscribe(q,function(b){a.$17(b)})};b.$17=function(a){a=j.GatewayStreamBatch.read(a);this.processBatch(a)};b.processBatch=function(a){__p&&__p();try{h.bumpCounter("socket_process_batch");h.info("Received batch "+JSON.stringify(a));var b=null;for(var c=a.getFrames(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=f.getStreamId();b==null&&(b=f);if(f!=null&&b!=f)throw new Error("Received batch with frames for multiple streams")}if(b!=null){f=this.$5.get(b);f!=null?f.onProxyResponse(a):h.info("Received batch with frames for unknown stream id: "+b)}else h.info("Received batch with no frames")}catch(a){h.exception(a,"Failed processing batch from MQTT");h.bumpCounter("socket_process_batch_error");throw a}};b.$13=function(){this.$5.forEach(function(a,b,c){a.onDisconnect()})};b.$9=function(a,b){var c=new j.GatewayStreamStatusUpdate();c.streamId=b;c.status=i.StreamStatus.REJECTED;c.shouldRetry=!1;c.retryDelayMs=0;b=new j.GatewayStreamBatch(null,[j.GatewayStreamFrame.newStatusUpdateFrame(c)]);a.onProxyResponse(b)};b.$16=function(){"WebSocket"in window||(h.warn("Browser does not support websocket"),h.bumpCounter("websocket_not_supported"))};return a}();a.maxStreamCount=2e3;e.exports=a}),null);
__d("BladeRunnerStream",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a}var b=a.prototype;b.getStreamHandler=function(){return this.$1};b.cancel=function(){};b.isAlive=function(){return!1};b.getStatus=function(){return null};b.getStreamId=function(){return 0};return a}();e.exports=a}),null);
__d("BladeRunnerStreamState",["BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var b=a.prototype;b.getRequest=function(){return this.$1};b.isAlive=function(){return!(this.$2==g.StreamStatus.CLOSED||this.$2==g.StreamStatus.REJECTED)};b.getLastStatus=function(){return this.$2};b.setLastStatus=function(a){this.$2=a};b.onError=function(){this.$3+=1};b.getErrorCount=function(){return this.$3};b.resetErrors=function(){this.$3=0};b.getRetryRequestScheduled=function(){return this.$6};b.setRetryRequestScheduled=function(a){this.$6=a};b.witnessFrame=function(a){__p&&__p();switch(a.type){case g.StreamFrameType.STATUS_UPDATE:var b=a.getStatusUpdate(),c=!0;switch(b.status){case g.StreamStatus.ACCEPTED:c=!this.$4;this.$4||(this.$4=!0);break;case g.StreamStatus.STARTED:c=this.getLastStatus()!=g.StreamStatus.STARTED;break;case g.StreamStatus.PAUSED:c=this.getLastStatus()==g.StreamStatus.STARTED;break;case g.StreamStatus.CLOSED:case g.StreamStatus.REJECTED:default:c=!0}this.setLastStatus(b.status);return c;case g.StreamFrameType.REWRITE_REQUEST:this.$7(a.getRewriteRequest());return!1;default:return!0}};b.setRetriesAllowed=function(a){this.$5=a};b.getRetriesAllowed=function(){return this.$5};b.$7=function(a){if(a.patchExtraHeader!=null)return;a.temporary!=null||a.temporary==!0||(a.newBody!=null&&(this.$1.payload=a.newBody),a.newExtraHeader!=null&&(this.$1.extraHeader=a.newExtraHeader,this.$1.headers=JSON.parse(a.newExtraHeader)),a.killBody!=null&&a.killBody==!0&&(this.$1.payload=null))};return a}();e.exports=a}),null);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=4;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d){b=a.call(this,b)||this;b.$BladeRunnerSocketStream1=d;b.$BladeRunnerSocketStream2=new h(c);b.$BladeRunnerSocketStream2.setRetriesAllowed(k);return b}var c=b.prototype;c.send=function(){this.$BladeRunnerSocketStream1.sendNewStreamRequest(this.$BladeRunnerSocketStream2,this.getStreamHandler())};c.cancel=function(){this.isAlive()&&(this.$BladeRunnerSocketStream1.sendCancel(this.$BladeRunnerSocketStream2.getRequest().streamId),this.$BladeRunnerSocketStream2.setLastStatus(i.StreamStatus.CLOSED))};c.isAlive=function(){return this.$BladeRunnerSocketStream2.isAlive()};c.getStatus=function(){return this.$BladeRunnerSocketStream2.getLastStatus()};c.getStreamId=function(){return this.$BladeRunnerSocketStream2.getRequest().streamId};return b}(g);e.exports=a}),null);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a!=null?a:j.get()}var b=a.prototype;b.requestStream=function(a,b,c){var d=new m.GatewayStreamRequest();d.streamId=this.$1.getNextStreamId();d.requestType=l.StreamRequestType.BLADE_RUNNER;d.headers=h.patchRequestHeaders(a);d.extraHeader=JSON.stringify(d.headers);d.payload=b!=null?g.encode(b):null;a=new k(c,d,this.$1);a.send();return a};b.logInfo=function(a){i.info(a)};b.bumpCounter=function(a){i.bumpCounter(a)};return a}();e.exports=a}),null);
__d("SkywalkerUtils",["CurrentLocale","RTISubscriptionManagerConfig"],(function(a,b,c,d,e,f,g,h){__p&&__p();a={patchContext:function(a){a=a||{};a.locale=g.get();if(h.assimilator){var b=h.assimilator;b.tierType!=null&&(a.tierType=b.tierType);b.sandboxIP!=null&&b.sandboxPort!=null&&b.sandboxHostname!=null&&(a.sandboxIP=b.sandboxIP,a.sandboxPort=b.sandboxPort,a.sandboxHostname=b.sandboxHostname)}return a}};e.exports=a}),null);