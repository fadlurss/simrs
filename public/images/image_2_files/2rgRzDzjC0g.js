if (self.CavalryLogger) { CavalryLogger.start_js(["wqoua"]); }

__d("MCompositionFormatFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FORMAT_ID:"format_id",PREVIOUS_FORMAT_ID:"prev_format_id"})}),null);
__d("MCompositionFormatID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO:"photo",SLIDESHOW:"slideshow"})}),null);
__d("MCompositionFormatStore",["MCompositionFormatFields","MCompositionFormatID","MCompositionStore","MCompositionStoreID","emptyFunction","invariant","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();c=b("MCompositionConstants").ActionTypes;function a(a){if(a){var b=a[g.FORMAT_ID];Object.values(h).indexOf(b)!==-1||l(0,183);b=m.get(g.FORMAT_ID,null);a[g.PREVIOUS_FORMAT_ID]=b}return a}var m=new i(j.FORMAT,g).setRequiredFields(g.FORMAT_ID).setHandlerFor(c.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(c.COMPOSITION_INITIALIZE,a).setHandlerFor(c.FORMAT_CHANGE,a).register();e.exports=m}),null);
__d("MCompositionPageRecommendationsFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENTRY_POINT:"entry_point",PAGE_ID:"page_id",PAGE_NAME:"page_name",RECOMMENDATION_TYPE:"recommendation_type",SURFACE:"surface"})}),null);
__d("MCompositionPageRecommendationsStore",["MCompositionPageRecommendationsFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){c=b("MCompositionConstants").ActionTypes;function a(a){a=a||{};return a}d=new h(i.PAGE_RECOMMENDATIONS,g).setHandlerFor(c.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(c.COMPOSITION_INITIALIZE,a).register();e.exports=d}),null);
__d("MCompositionSlideshowFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IS_VALID:"is_valid"})}),null);
__d("MCompositionSlideshowStore",["MCompositionDispatcher","MCompositionPhotoFields","MCompositionPhotoStore","MCompositionSlideshowFields","MCompositionStore","MCompositionStoreID","MMultiPhotoUploaderAttachmentState","SlideshowConstants","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();c=b("MCompositionConstants").ActionTypes;function a(a){g.waitFor([i.toUpdate()]);a=i.get(h.PHOTO_INFO_LIST,null);var b=p.getAll(),c={};c[j.IS_VALID]=Boolean(a&&a.length>=n.min_photo_num&&a.length<=n.max_photo_num&&a.filter(function(a){return a.state!==m.UPLOADED}).length===0);return babelHelpers["extends"]({},b,c)}var p=new k(l.SLIDESHOW,j).setRequiredFields(j.IS_VALID).setHandlerFor(c.COMPOSITION_FINALIZE,o.thatReturnsNull).setHandlerFor(c.COMPOSITION_INITIALIZE,a).setHandlerFor(c.PHOTO_CHANGE,a).register();e.exports=p}),null);
__d("MComposerLoggerPublishingListeners",["MComposerLogger","MComposerWaterfallEvent"],(function(a,b,c,d,e,f,g,h){a=function(a,b){"use strict";this.error=this.fail=function(){g.logWithSessionID(h.COMPOSER_POST_FAILURE,a,b)},this.done=function(){g.logWithSessionID(h.COMPOSER_POST_SUCCESS,a,b)}};e.exports=a}),null);
__d("SlideshowCreationWaterfallLogger",["MarauderLogger"],(function(a,b,c,d,e,f,g){a={logEvent:function(b,c,a){c=c||{},g.log(b,a,c,void 0,void 0,void 0)}};e.exports=a}),null);
__d("MComposerSlideshowLogger",["MCompositionConfigFields","MCompositionConfigStore","MCompositionPhotoFields","MCompositionPhotoStore","SlideshowCreationWaterfallLogger"],(function(a,b,c,d,e,f,g,h,i,j,k){a={log:function(a){var b=h.get(g.SESSION_ID,null),c=j.get(i.PHOTO_INFO_LIST,[]).length;k.logEvent(a,{photo_count:c,composer_session_id:b},"composer_slideshow")}};e.exports=a}),null);
__d("MComposerNavigationMixin",["MComposerNavigation","invariant"],(function(a,b,c,d,e,f,g,h){__p&&__p();a={__navigationPolicy:null,currentNavigationPolicy:function(){this.hasNavigationPolicy()||h(0,6080);return this.__navigationPolicy},hasNavigationPolicy:function(){return!!this.__navigationPolicy},newNavigationPolicy:function(){var a=this;this.hasNavigationPolicy()&&h(0,6081);this.__navigationPolicy=g.newPolicy().addOnClose(function(){return a.__navigationPolicy=null});return this.__navigationPolicy},cleanupSoftState:function(){g.cleanupSoftState()}};e.exports=a}),null);
__d("MAlbumPicker",["CSS","DOM","MComposerNavigationMixin","MLegacyDataStore","Stratcom","$","eventsMixinDeprecated","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){__p&&__p();var c;c=a.call(this)||this;c._root=b;c._albumList=h.scry(c._root,"div","album-list")[0];c._createAlbumRoot=h.scry(c._root,"div","create-album")[0];c._albumListInputs=c._getAlbumListInputs();for(var b=0;b<c._albumListInputs.length;b++){var d=c._albumListInputs[b];if(d.checked){d=j.get(d);c._currentSelectedAlbumID=d.album_id;break}}c._listeners=[k.listen("click","cancel_album_picker",function(){c._navigateAwayAndCancel()}),k.listen("click","album-input",c._onAlbumSelected.bind(babelHelpers.assertThisInitialized(c)))];c._albumList&&c._createAlbumRoot&&(c._listeners.push(k.listen("click","create-album-item",c._openCreateAlbum.bind(babelHelpers.assertThisInitialized(c)))),c._listeners.push(k.listen("click","cancel_create_album",c._cancelCreateAlbum.bind(babelHelpers.assertThisInitialized(c)))),c._listeners.push(k.listen("MPhotosCreateAlbum:created",null,c._onCreateAlbum.bind(babelHelpers.assertThisInitialized(c)))));return c}var c=b.prototype;c._getAlbumListInputs=function(){return h.scry(this._albumList,"input").filter(function(a){return a.type==="radio"})};c._navigateAway=function(){var a=this;if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().addOnClose(function(){return h.hide(a._root)}).close()};c._navigateAwayAndCancel=function(){var a=this;if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().addOnClose(function(){return a._cancel()}).close()};c.hide=function(){this._navigateAway()};c.show=function(){var a=this;this.newNavigationPolicy().addOnCloseByBrowser(function(){return a._cancel()}).addOnOpen(function(){return h.show(a._root)}).open();this._albumListInputs.length===0&&(this._albumListInputs=this._getAlbumListInputs())};c.resetAlbumSelection=function(){this._currentSelectedAlbumID=null;for(var a=0;a<this._albumListInputs.length;a++){var b=this._albumListInputs[a],c=j.get(b);c.is_mobile_uploads_album?(b.checked=!0,this._currentSelectedAlbumID=c.album_id):b.checked=!1}};c._openCreateAlbum=function(a){k.invoke("MAlbumPicker:createalbum:open"),h.hide(this._albumList),h.show(this._createAlbumRoot)};c._closeCreateAlbum=function(){k.invoke("MAlbumPicker:createalbum:close"),h.hide(this._createAlbumRoot),h.show(this._albumList)};c._cancelCreateAlbum=function(){var a=this;this._albumListInputs.forEach(function(b){var c=j.get(b);c.album_id===a._currentSelectedAlbumID&&(b.checked=!0)});this._closeCreateAlbum()};c._onCreateAlbum=function(a){a=a.getData();this._closeCreateAlbum();this._chooseAlbum(!1,a.album_id,a.privacy_id)};c._onAlbumSelected=function(a){a=a.getNode("album-input");a=j.get(a);var b=a.is_mobile_uploads_album,c=a.album_id;a=a.privacy_id;this._currentSelectedAlbumID=c;this._chooseAlbum(b,c,a)};c._chooseAlbum=function(a,b,c){g.conditionClass(l("album-button"),"active",!a),this._navigateAway(),this.invoke("choose-album",{is_mobile_uploads_album:a,album_id:b,privacy_id:c})};c._cancel=function(){h.hide(this._root),this.invoke("cancel")};b.fromID=function(a){a=l(a);var c=j.get(a);c._albumPicker||(c._albumPicker=new b(a));return c._albumPicker};return b}(n(i));m(a,["cancel","choose-album"]);Object.assign(a.prototype,{_root:null,_listeners:null});e.exports=a}),null);
__d("GroupSellSurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({POPOVER_PERMALINK:"popover_permalink",EMAIL:"email",GROUP_MEGAPHONE:"group_megaphone",QUICK_PROMOTION:"quick_promotion",GLOBAL_SEARCH_MODULE_RESULT:"global_search_module_result",GROUP_MODAL_NUX:"group_modal_nux",YOUR_POSTS:"your_posts",YOUR_POSTS_PAGE:"your_posts_page",YOUR_POSTS_PAGE_OTHER_GROUPS:"your_posts_page_other_groups",FOR_SALE_HOVERCARD:"for_sale_hovercard",FOR_SALE_CONTEXT_ITEM:"for_sale_context_item",RECOMMENDATION_BADGE:"recommendation_badge",TARGET_USER_FOR_SALE_POSTS:"target_user_for_sale_posts",SELLER_PROFILE:"seller_profile",GROUP_POST_CHEVRON:"group_post_chevron",FEED_POST_CHEVRON:"feed_post_chevron",ADMIN_SETTING_PAGE:"admin_setting_page",SCRIPTS:"scripts",CRT_SCRIPTS:"crt_scripts",TESTS:"tests",DELETE_INTERCEPT:"delete_intercept",INTERN_CONSOLE:"intern_console",GROUP_MALL:"group_mall",BROWSE_CATEGORIES:"browse_categories",CATEGORY_MALL:"category_mall",GROUP_SEARCH:"group_search",GROUP_MALL_SELL_COMPOSER:"group_mall_sell_composer",FORSALE_ISLAND:"forsale_island",CROSS_GROUP_FORSALE_ISLAND:"cross_group_forsale_island",PRODUCT_MALL:"product_mall",MESSAGE_PERMALINK:"permalink",FEED_STORY:"feed_story",GROUP_COMPOSER:"group_composer",UNKNOWN:"unknown",DIRECT_LINK:"direct_link",GROUP_MALL_HEADER_NAV:"group_mall_header_nav",GROUP_MALL_ISLAND_NAV:"island_nav",YOUR_POSTS_ISLAND_NAV:"your_posts_island_nav",MARK_AS_SOLD_REMINDER:"mas_reminder",RIGHT_HAND_COLUMN_CATEGORY_SHOWALL:"rhc_category_showall",YOUR_POSTS_UNSOLD_NOTIFICATION:"your_posts_unsold_notif",RIGHT_HAND_COLUMN:"right_hand_column",SAVED_SEARCH_NOTIF:"saved_search_notif",INVENTORY_MANAGEMENT:"inventory_management",GROUP_MALL_SUGGESTIONS:"group_mall_suggestions",CLEANER:"group_sell_cleaner",PURPOSE_TRIGGER:"group_sell_purpose_trigger",PURPOSE_BACKFILL:"group_sell_purpose_backfill",HIGH_CONFIDENCE_SALE_SCRIPT:"high_confidence_sale_script",EDIT_GROUP_SETTINGS_DESKTOP:"edit_group_settings_desktop",EDIT_GROUP_SETTINGS_MOBILE:"edit_group_settings_mobile",MAYBE_FOR_SALE_SCRIPT:"maybe_for_sale_script",LANDING_PAGE_BOOKMARK:"landing_page_bookmark",LANDING_PAGE_SUGGESTED_GROUPS:"landing_page_suggested_groups",LANDING_PAGE_SUGGESTED_GROUPS_CARD:"landing_page_suggested_groups_card",LANDING_PAGE_SUGGESTED_GROUPS_MAP:"landing_page_suggested_groups_map",LANDING_PAGE_YOUR_POSTS:"landing_page_your_posts",LANDING_PAGE_YOUR_GROUPS:"landing_page_your_groups",LANDING_PAGE_YOUR_SALES_RHC:"landing_page_your_sales_rhc",LANDING_PAGE_AD:"lp_ad",LANDING_PAGE_MOBILE:"landing_page_mobile",EGO_SGNY:"ego_sgny",GROUPS_BROWSER:"groups_browser",LOW_QUALITY_GROUP_SELL_CLEAN_SCRIPT:"low_quality_group_sell_clean_script",GROUPS_YOU_SHOULD_JOIN:"groups_you_should_join",PRODUCT_DETAIL:"product_detail",MARKETPLACE_COMPOSER:"marketplace_composer",MARKETPLACE_YOUR_POSTS:"marketplace_your_posts",MARKETPLACE_UPSELL_DIALOG:"marketplace_upsell_dialog",MARKETPLACE_CROSS_POST_UNSOLD_GROUP:"marketplace_cross_post_unsold_group",MARKETPLACE_CROSS_POST_SUGGESTIONS:"marketplace_cross_post_suggestions",MARKETPLACE_FULLSCREEN_CROSS_POST_SUGGESTIONS:"marketplace_fullscreen_cross_post_suggestions",MARKETPLACE_INVENTORY_XPOST_VIEW:"marketplace_inventory_xpost_view",MARKETPLACE_INVENTORY_XPOST_VIEW_WWW:"marketplace_inventory_xpost_view_www",AUTO_STRUCTURE_SCRIPT:"auto_structure_script",NLU_PROMPT:"nlu_prompt",MARKETPLACE_GALLERY:"marketplace_gallery",MARKETPLACE_GYSJ:"marketplace_gysj",CROSS_GROUP_FEED:"cross_group_feed",BUY_AND_SELL_SEARCH_RESULTS:"buy_and_sell_search_results",XGROUP_ITEMS_FOR_SALE_NOTIFICATION:"xgroup_fs_notif",GROUP_COMMERCE_RN_PDP:"group_commerce_rn_pdp",GROUP_COMMERCE_RN_BOOKMARK:"group_commerce_rn_bookmark",GROUP_COMMERCE_NATIVE_PERMALINK:"group_commerce_native_permalink",CITY_COMMUNITY:"city_community",MARKETPLACE:"marketplace",NOTIFICATION:"notification",BOOKMARK:"bookmark",NEWSFEED:"newsfeed",GROUPS:"groups",TIMELINE:"timeline",BUY_SELL_GROUP_MEGA_MALL:"buy_sell_group_mega_mall",BUY_SELL_GROUP_MINI_MALL:"buy_sell_group_mini_mall",DISCOVERY_FEED_STORY:"discovery_feed_story",MESSENGER_BANNER:"messenger_banner",GROUPCOMM_INAPP_MESSENGER:"groupcomm_inapp_messenger"})}),null);
__d("GroupSellUserActionEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MARK_AS_SOLD:"mark_as_sold",MARK_AS_AVAILABLE:"mark_as_available",MARK_AS_ARCHIVE:"mark_as_archive",MARK_AS_UNARCHIVE:"mark_as_unarchive",MARK_AS_PENDING:"mark_as_pending",NON_FOR_SALE_MARK_AS_SOLD:"non_for_sale_mark_as_sold",NON_FOR_SALE_MARK_AS_PENDING:"non_for_sale_mark_as_pending",GROUP_POST:"group_post",MARKETPLACE_POST:"marketplace_post",PROFILE_POST:"profile_post",LAUNCH_EDIT:"launch_edit",GROUP_POST_EDIT:"group_post_edit",GROUP_POST_REPORT:"group_post_report",ADMIN_OPT_IN:"admin_opt_in",ADMIN_OPT_OUT:"admin_opt_out",ADMIN_NOT_FOR_SALE:"admin_not_for_sale",ADMIN_DO_NOT_WANT:"admin_do_not_want",GROUP_CURRENCY_CHANGE:"group_currency_change",OPT_IN_MEGAPHONE_SEEN:"opt_in_megaphone_seen",OPT_IN_NOTIFICATION_SENT:"opt_in_notification_sent",AUTO_OPT_IN_MEGAPHONE_SEEN:"auto_opt_in_megaphone_seen",AUTO_OPTED_IN_MEGAPHONE_SEEN:"auto_opted_in_megaphone_seen",GROUP_PURPOSES_NUX_SEEN:"group_purposes_nux_seen",GROUP_PURPOSE_SELECTED:"group_purpose_selected",GROUP_NON_FOR_SALE_POST:"group_non_for_sale_post",GROUP_MARKED_AS_MAY_BE_FOR_SALE:"group_marked_as_may_be_for_sale",GROUP_CRT_CATEGORIZED_FOR_SALE:"group_crt_categorized_for_sale",GROUP_CRT_CATEGORIZED_FOR_SALE_FAIL:"group_crt_categorized_for_sale_fail",GROUP_ENABLED:"group_enabled",GROUP_DISABLED:"group_disabled",GROUP_NON_FOR_SALE_POST_INTERCEPT_WORDS:"group_non_for_sale_post_intercept_words",GROUP_NON_FOR_SALE_POST_NLU_INTERCEPT:"group_non_for_sale_post_nlu_intercept",GROUP_NON_FOR_SALE_POST_NLU_ATTEMPT:"group_non_for_sale_post_nlu_attempt",GROUP_NON_FOR_SALE_POST_NLU_ERROR:"group_non_for_sale_post_nlu_error",GROUP_NON_FOR_SALE_POST_NLU_TIMEOUT:"group_non_for_sale_post_nlu_timeout",ADMIN_GROUP_PURPOSE_EDIT_DISALLOWED:"admin_group_purpose_edit_disallowed",ADMIN_GROUP_REQUEST_PURPOSE_CHANGE:"admin_group_request_purpose_change",FOR_SALE_POST_APPROVE:"for_sale_post_approve",NON_FOR_SALE_POST_APPROVE:"non_for_sale_post_approve",FOR_SALE_POST_DELETED:"for_sale_post_deleted",NON_FOR_SALE_POST_DELETED:"non_for_sale_post_deleted",GROUP_NON_FOR_SALE_POST_INTERCEPT_CREATED:"group_non_for_sale_post_intercept_created",LAUNCH_MESSAGE_SELLER_DIALOG:"launch_message_seller_dialog",MESSAGE_SELLER:"message_seller",SHARED_TO_GROUP:"shared_to_group",RECENT_ACTIVITY_PAGE_CONTENT:"recent_activity_page_content",RECENT_ACTIVITY_DELETE_ITEM:"recent_activity_delete_item",SAVED_SEARCH_CREATED:"saved_search_created",SAVED_SEARCH_DELETED:"saved_search_deleted",SAVED_SEARCH_NOTIFICATION_SENT:"saved_search_notification_sent",INCOMPLETE_POST_SAVED_AS_NON_FOR_SALE:"incomplete_post_saved_as_non_for_sale",GROUP_CROSS_POST_ATTEMPTED:"group_cross_post_attempted",JOIN_XPOST_ATTEMPTED:"join_xpost_attempted",MARKETPLACE_CROSSPOST_TURNED_ON:"marketplace_crosspost_turned_on",MARKETPLACE_CROSSPOST_TURNED_OFF:"marketplace_crosspost_turned_off",EDIT_SYNC_ATTEMPTED:"edit_sync_attempted",EDIT_SYNC_SUCCESS:"edit_sync_success",CROSS_POST_SUGGESTIONS_CLOSED:"cross_post_suggestions_closed",CATEGORY_SET:"category_set",SSFY_SEE_MORE_CLICK:"ssfy_see_more_click",COMPOSER_TOOLTIP_NUX_SEEN:"composer_tooltip_nux_seen",AUTHOR_COMMENT:"author_comment",GROUP_NON_FOR_SALE_POST_INTERCEPT_ATTEMPTED:"group_non_for_sale_post_intercept_attempted",GROUP_NON_FOR_SALE_POST_INTERCEPT_DETECTED:"group_non_for_sale_post_intercept_detected",GROUP_NON_FOR_SALE_POST_INTERCEPT_DECLINED:"group_non_for_sale_post_intercept_declined",GROUP_NON_FOR_SALE_POST_INTERCEPT_ACCEPTED:"group_non_for_sale_post_intercept_accepted",H_SCROLL_STORY_CLICKED:"h_scroll_story_clicked",XGROUP_ITEMS_FOR_SALE_NOTIF_OPT_OUT:"xgroup_fs_notif_opt_out",XGROUP_ITEMS_FOR_SALE_NOTIF_OPT_IN:"xgroup_fs_notif_opt_in",CLIENT_LIKE:"client_like",CLIENT_COMMENT:"client_comment",MARKETPLACE_POST_CREATION_FAIL_SIMILAR_POST:"MARKETPLACE_POST_CREATION_FAIL_SIMILAR_POST",MARKETPLACE_POST_CREATION_FAIL_NO_MARKETPLACE_ID:"marketplace_post_creation_fail_no_marketplace_id",THEME_CARD_SELL_CLICK:"theme_card_sell_click",COMPOSER_ZIP_CODE_AUTO_FILL_SUCCESS:"composer_zip_code_auto_fill_success",COMPOSER_ZIP_CODE_AUTO_FILL_FAILURE:"composer_zip_code_auto_fill_failure",COMPOSER_ZIP_CODE_INVALID_ENTRY:"composer_zip_code_invalid_entry",COMPOSER_ZIP_CODE_NO_INFERRED_COUNTRY:"composer_zip_code_no_inferred_country",COMPOSER_ZIP_CODE_LAT_LONG_NOT_FOUND:"composer_zip_code_lat_long_not_found",COMPOSER_ZIP_CODE_SAVED:"composer_zip_code_saved",COMPOSER_NEIGHBORHOOD_AUTO_FILL_SUCCESS:"composer_neighborhood_auto_fill_success",COMPOSER_NEIGHBORHOOD_AUTO_FILL_FAILURE:"composer_neighborhood_auto_fill_failure",COMPOSER_CLEAR_CROSS_POST_MENU:"composer_clear_cross_post_menu",COMPOSER_OPEN_CROSS_POST_MENU:"composer_open_cross_post_menu",COMPOSER_SELECT_RECENT_CROSS_POST_PLACES:"composer_select_recent_cross_post_places",LOCATION_GEOPROFILE_FALLBACK_NO_PREDICTED_ZIPCODE:"location_geoprofile_fallback_no_predicted_zipcode",LOCATION_NO_PREDICTED_HOME_CITY:"location_no_predicted_home_city",LOCATION_NO_PREDICTED_ZIPCODE:"location_no_predicted_zipcode",LOCATION_NO_BUY_LOCATION:"location_no_buy_location",LOCATION_NO_SELL_LOCATION:"location_no_sell_location",LOCATION_NO_SELL_LOCATION_LS_IS_OFF:"location_no_sell_location_is_off",LOCATION_RESET_SELL_LOCATION:"location_reset_sell_location",COMMERCE_INVENTORY_ENTER:"commerce_inventory_enter",COMPOSER_GROUP_SALE_POST_INTERCEPT:"composer_group_sale_post_intercept",COMPOSER_GROUP_SALE_POST_INTERCEPT_ACCEPTED:"composer_group_sale_post_intercept_accepted",COMPOSER_GROUP_SALE_POST_INTERCEPT_DECLINED:"composer_group_sale_post_intercept_declined",COMPOSER_INIT_WITH_MEDIA:"composer_init_with_media",COMPOSER_POST_WITH_MEDIA:"composer_post_with_media",FOR_SALE_ITEM_MESSAGE_SELLER_BUTTON_CLICKED:"for_sale_item_message_seller_button_clicked",FOR_SALE_ITEM_SAVE_BUTTON_CLICKED:"for_sale_item_save_button_clicked",FOR_SALE_ITEM_SEE_DETAILS_BUTTON_CLICKED:"for_sale_item_see_details_button_clicked",COMCOM_TEL_CLICK:"comcom_tel_click",COMCOM_COPY_NUM_CLICK:"comcom_copy_num_click",COMCOM_NUM_CLICK:"comcom_num_click",COMCOM_CREATE_CONTACT_CLICK:"comcom_create_contact_click",COMCOM_SEND_SMS_CLICK:"comcom_send_sms_click",COMCOM_METADATA_TAG_CLICK:"comcom_metadata_tag_click",MESSAGING_THREAD_CREATED:"messaging_thread_created",GROUP_MALL_TOP_CATEGORIES_VIEW:"group_mall_top_categories_view",CATEGORY_CLICK:"category_click",TOP_CATEGORIES_SEE_ALL_CLICK:"top_categories_see_all_click",REMOVE_SALE_FORMAT:"remove_sale_format",ATTACKER_OVERWROTE_STATUS:"attacker_overwrote_status",NF_PIVOT_HSCROLL_VIEW:"nf_pivot_hscroll_view",NF_PIVOT_HSCROLL_SEE_MORE_CLICK:"nf_pivot_hscroll_see_more_click",NF_PIVOT_HSCROLL_CARD_CLICK:"nf_pivot_hscroll_card_click",NF_PIVOT_HSCROLL_CARD_IMPRESSION:"nf_pivot_hscroll_card_impression",ADDRESS_ADD_FAILED:"address_add_failed",ADDRESS_ADD_SUCCESS:"address_add_success",LABEL_CREATED:"label_created",LABEL_CREATION_FAILED:"label_creation_failed"})}),null);
__d("GroupSellUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var b=a.prototype;b.log=function(){h.log("logger:GroupSellUserActionsLoggerConfig",this.$1,g.BASIC)};b.logVital=function(){h.log("logger:GroupSellUserActionsLoggerConfig",this.$1,g.VITAL)};b.logImmediately=function(){h.log("logger:GroupSellUserActionsLoggerConfig",this.$1,{signal:!0})};b.clear=function(){this.$1={};return this};b.getData=function(){return babelHelpers["extends"]({},this.$1)};b.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.setAccountstatus=function(a){this.$1.accountstatus=a;return this};b.setAppID=function(a){this.$1.appid=a;return this};b.setAppversion=function(a){this.$1.appversion=a;return this};b.setCategoryID=function(a){this.$1.category_id=a;return this};b.setClassifierWords=function(a){this.$1.classifier_words=h.serializeVector(a);return this};b.setClientCarrier=function(a){this.$1.client_carrier=a;return this};b.setClientUserID=function(a){this.$1.client_userid=a;return this};b.setClienttime=function(a){this.$1.clienttime=a;return this};b.setContainermodule=function(a){this.$1.containermodule=a;return this};b.setCountry=function(a){this.$1.country=a;return this};b.setCrossPostTargets=function(a){this.$1.cross_post_targets=h.serializeVector(a);return this};b.setDescription=function(a){this.$1.description=a;return this};b.setDeviceid=function(a){this.$1.deviceid=a;return this};b.setDuplicateHash=function(a){this.$1.duplicate_hash=a;return this};b.setEvent=function(a){this.$1.event=a;return this};b.setForSaleItemFbType=function(a){this.$1.for_sale_item_fb_type=a;return this};b.setGroupID=function(a){this.$1.group_id=a;return this};b.setGroupMembersCountBucket=function(a){this.$1.group_members_count_bucket=a;return this};b.setGroupMessageID=function(a){this.$1.group_message_id=a;return this};b.setGroupPostHash=function(a){this.$1.group_post_hash=a;return this};b.setHashid=function(a){this.$1.hashid=a;return this};b.setInterceptWords=function(a){this.$1.intercept_words=a;return this};b.setInterestCommentBucket=function(a){this.$1.interest_comment_bucket=a;return this};b.setInterestLikeBucket=function(a){this.$1.interest_like_bucket=a;return this};b.setInterestMessageBucket=function(a){this.$1.interest_message_bucket=a;return this};b.setIsAdmin=function(a){this.$1.is_admin=a;return this};b.setIsEdit=function(a){this.$1.is_edit=a;return this};b.setIsFsGroup=function(a){this.$1.is_fs_group=a;return this};b.setIsMarketplace=function(a){this.$1.is_marketplace=a;return this};b.setIsemployee=function(a){this.$1.isemployee=a;return this};b.setLatitude=function(a){this.$1.latitude=a;return this};b.setLocationID=function(a){this.$1.location_id=a;return this};b.setLongitude=function(a){this.$1.longitude=a;return this};b.setMarketplaceXpostCheckboxShown=function(a){this.$1.marketplace_xpost_checkbox_shown=a;return this};b.setMarketplaceXpostCheckedOnComposerLoad=function(a){this.$1.marketplace_xpost_checked_on_composer_load=a;return this};b.setMarketplaceXpostCheckedOnPost=function(a){this.$1.marketplace_xpost_checked_on_post=a;return this};b.setMarketplaceXpostExperimentQeMode=function(a){this.$1.marketplace_xpost_experiment_qe_mode=a;return this};b.setMarketplaceXpostFirstTimeCheckboxSeen=function(a){this.$1.marketplace_xpost_first_time_checkbox_seen=a;return this};b.setMarketplaceXpostSplitQeMode=function(a){this.$1.marketplace_xpost_split_qe_mode=a;return this};b.setName=function(a){this.$1.name=a;return this};b.setNumPhotos=function(a){this.$1.num_photos=a;return this};b.setOriginatedGroupID=function(a){this.$1.originated_group_id=a;return this};b.setPickupNote=function(a){this.$1.pickup_note=a;return this};b.setPriceAmount=function(a){this.$1.price_amount=a;return this};b.setPriceCurrency=function(a){this.$1.price_currency=a;return this};b.setPriceType=function(a){this.$1.price_type=a;return this};b.setProductAvailability=function(a){this.$1.product_availability=a;return this};b.setProductItemID=function(a){this.$1.product_item_id=a;return this};b.setReferralSurface=function(a){this.$1.referral_surface=a;return this};b.setSavedSearchID=function(a){this.$1.saved_search_id=a;return this};b.setSavedSearchResultCount=function(a){this.$1.saved_search_result_count=a;return this};b.setSavedSearchText=function(a){this.$1.saved_search_text=a;return this};b.setSellOptionsID=function(a){this.$1.sell_options_id=a;return this};b.setSeq=function(a){this.$1.seq=a;return this};b.setSessionid=function(a){this.$1.sessionid=a;return this};b.setSurface=function(a){this.$1.surface=a;return this};b.setSyncMetadataID=function(a){this.$1.sync_metadata_id=a;return this};b.setTaxonCategoryPath=function(a){this.$1.taxon_category_path=a;return this};b.setTime=function(a){this.$1.time=a;return this};b.setTitle=function(a){this.$1.title=a;return this};b.setUuid=function(a){this.$1.uuid=a;return this};b.setVC=function(a){this.$1.vc=a;return this};b.setWeight=function(a){this.$1.weight=a;return this};b.updateExtraData=function(a){a=i(h.serializeMap(a));h.checkExtraDataFieldNames(a,j);this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var j={accountstatus:!0,appid:!0,appversion:!0,category_id:!0,classifier_words:!0,client_carrier:!0,client_userid:!0,clienttime:!0,containermodule:!0,country:!0,cross_post_targets:!0,description:!0,deviceid:!0,duplicate_hash:!0,event:!0,for_sale_item_fb_type:!0,group_id:!0,group_members_count_bucket:!0,group_message_id:!0,group_post_hash:!0,hashid:!0,intercept_words:!0,interest_comment_bucket:!0,interest_like_bucket:!0,interest_message_bucket:!0,is_admin:!0,is_edit:!0,is_fs_group:!0,is_marketplace:!0,isemployee:!0,latitude:!0,location_id:!0,longitude:!0,marketplace_xpost_checkbox_shown:!0,marketplace_xpost_checked_on_composer_load:!0,marketplace_xpost_checked_on_post:!0,marketplace_xpost_experiment_qe_mode:!0,marketplace_xpost_first_time_checkbox_seen:!0,marketplace_xpost_split_qe_mode:!0,name:!0,num_photos:!0,originated_group_id:!0,pickup_note:!0,price_amount:!0,price_currency:!0,price_type:!0,product_availability:!0,product_item_id:!0,referral_surface:!0,saved_search_id:!0,saved_search_result_count:!0,saved_search_text:!0,sell_options_id:!0,seq:!0,sessionid:!0,surface:!0,sync_metadata_id:!0,taxon_category_path:!0,time:!0,title:!0,uuid:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("GroupSellLogger",["GroupSellSurface","GroupSellUserActionEvents","GroupSellUserActionsTypedLogger"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={logComposerTooltipNUXSeen:function(a){new i().setEvent(h.COMPOSER_TOOLTIP_NUX_SEEN).setGroupID(a).log()},_formatComposerInterceptWords:function(a,b){var c=[];b&&(c=b.slice());a&&a>0&&c.push(a.toString()+" prices count");return c.join(",")},logComposerInterceptAttempted:function(a){new i().setEvent(h.GROUP_NON_FOR_SALE_POST_INTERCEPT_ATTEMPTED).setGroupID(a).log()},logComposerInterceptDetected:function(a,b,c){new i().setEvent(h.GROUP_NON_FOR_SALE_POST_INTERCEPT_DETECTED).setGroupID(a).setInterceptWords(j._formatComposerInterceptWords(b,c)).log()},logComposerInterceptCreated:function(a,b,c){new i().setEvent(h.GROUP_NON_FOR_SALE_POST_INTERCEPT_CREATED).setGroupID(a).setInterceptWords(j._formatComposerInterceptWords(b,c)).log()},logComposerInterceptAccepted:function(a,b,c){new i().setEvent(h.GROUP_NON_FOR_SALE_POST_INTERCEPT_ACCEPTED).setGroupID(a).setInterceptWords(j._formatComposerInterceptWords(b,c)).log()},logComposerInterceptDeclined:function(a,b,c){new i().setEvent(h.GROUP_NON_FOR_SALE_POST_INTERCEPT_DECLINED).setGroupID(a).setInterceptWords(j._formatComposerInterceptWords(b,c)).log()},logHScrollViewPermalink:function(a,b){new i().setEvent(h.H_SCROLL_STORY_CLICKED).setGroupID(a).setGroupMessageID(b).log()},logNLUTimeout:function(a){new i().setEvent(h.GROUP_NON_FOR_SALE_POST_NLU_TIMEOUT).setGroupID(a).log()},logNLUError:function(a){new i().setEvent(h.GROUP_NON_FOR_SALE_POST_NLU_ERROR).setGroupID(a).log()},logNonForSaleMarkAsSold:function(a,b,c){new i().setEvent(h.NON_FOR_SALE_MARK_AS_SOLD).setGroupID(a).setGroupMessageID(b).setDescription(c).setSurface(g.DELETE_INTERCEPT).log()},logClearCrossPostMenu:function(a){new i().setEvent(h.COMPOSER_CLEAR_CROSS_POST_MENU).setGroupID(a).log()},logOpenCrossPostMenu:function(a,b){new i().setEvent(h.COMPOSER_OPEN_CROSS_POST_MENU).setGroupID(a).addToExtraData("has_recent_places",b.toString()).log()},logSelectRecentPlaces:function(a){new i().setEvent(h.COMPOSER_SELECT_RECENT_CROSS_POST_PLACES).setGroupID(a).log()}};e.exports=j}),null);
__d("MGroupSellInterceptUtil",["escapeRegex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={parseInterceptedPrices:function(a,b){__p&&__p();var c=[];if(!b)return c;var d=new RegExp("\\d+","ig"),e=new RegExp(g(b)+"\\s*\\d+","ig");b=new RegExp("\\d+(?=\\s*"+g(b)+")","ig");e=a.match(e);e&&e.forEach(function(a){return c=c.concat(a.match(d))});e=a.match(b);e&&(c=c.concat(e));return c}};e.exports=a}),null);
__d("MStructuredComposerOGInput",["CSS","DOM","MAjaxify","MarauderLogger","MComposerLogger","MComposerNavigationMixin","MComposerOGStrings","MComposerWaterfallEvent","MCompositionMinutiaeFields","MCompositionMinutiaeStore","MCompositionUserActions","MRequest","MSubscriptionsHandlerMixin","MUnifiedTaggerConstants","MViewport","Stratcom","cx","mixin","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){__p&&__p();var z=t.SHOW_UNIFIED_TAGGER,A=55;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f){__p&&__p();var g;g=a.call(this)||this;g.$MStructuredComposerOGInput1=b;g.$MStructuredComposerOGInput2=!0;g.$MStructuredComposerOGInput3=!0;g.$MStructuredComposerOGInput4=null;g.$MStructuredComposerOGInput5=c;g.$MStructuredComposerOGInput6=d;g.$MStructuredComposerOGInput7=d.parentNode;g.$MStructuredComposerOGInput8=f;g.$MStructuredComposerOGInput9=h.find(g.$MStructuredComposerOGInput1,"input","og-action-input");g.$MStructuredComposerOGInput10=h.find(g.$MStructuredComposerOGInput1,"input","og-object-input");g.$MStructuredComposerOGInput11=h.find(g.$MStructuredComposerOGInput1,"input","og-phrase-input");g.$MStructuredComposerOGInput12=h.find(g.$MStructuredComposerOGInput1,"input","og-icon-input");g.$MStructuredComposerOGInput13=h.find(g.$MStructuredComposerOGInput1,"input","og-suggestion-mechanism");g.$MStructuredComposerOGInput14=h.find(g.$MStructuredComposerOGInput1,"input","og-hide-attachment");g.$MStructuredComposerOGInput15=!1;g.$MStructuredComposerOGInput16=null;g.$MStructuredComposerOGInput17=h.find(g.$MStructuredComposerOGInput1,"ul","og-tag");g.$MStructuredComposerOGInput18=e;g.$MStructuredComposerOGInput8&&g.addSubscriptions(g.$MStructuredComposerOGInput18.listen("clear",function(){g.$MStructuredComposerOGInput8.clear(),g.$MStructuredComposerOGInput19()}),g.$MStructuredComposerOGInput8.addListener("clear",function(){return g.$MStructuredComposerOGInput19()}));g.addSubscriptions(g.$MStructuredComposerOGInput18.listen("submit",g.$MStructuredComposerOGInput20.bind(babelHelpers.assertThisInitialized(g))),p.addChangeListener(function(){return g.$MStructuredComposerOGInput21()}),g.$MStructuredComposerOGInput18.listen("iconChanged",function(a){__p&&__p();if(z)v.invoke("MComposer:tagger:update:og-icon",null,{icon:a.icon_src});else{var b=h.find(g.$MStructuredComposerOGInput17,"li","token");b=h.find(b,"i");h.replace(b,a.icon)}g.$MStructuredComposerOGInput12.value=a.custom_icon_id;g.$MStructuredComposerOGInput22();g.$MStructuredComposerOGInput8&&(g.$MStructuredComposerOGInput4["{icon}"]=h.create("i",{className:a.icon.className,style:a.icon.style}),g.$MStructuredComposerOGInput8.setValue(g.$MStructuredComposerOGInput4));v.invoke("MStructuredComposerOGInput-done",null,{icon_changed:!0});k.log(n.MINUTIAE_CHANGE_ICON,{action_type_id:a.action_type_id,query:a.query})}),g.$MStructuredComposerOGInput18.listen("cancel",function(){v.invoke("MStructuredComposerOGInput-done",null,{cancel:!0}),k.log(n.MINUTIAE_CANCEL),g.$MStructuredComposerOGInput22()}),g.$MStructuredComposerOGInput18.listen("cancelIconSelection",function(a){k.log(n.MINUTIAE_CHANGE_ICON_CANCEL,{action_type_id:a.action_type_id,query:a.query})}));g.addSubscriptions(v.listen("click","inline-og-button",function(){y(function(){g.$MStructuredComposerOGInput23()},10)}));z?g.addSubscriptions(v.listen("MComposer:tagger:click",t.TOKEN_TYPES.OBJECT,g.$MStructuredComposerOGInput24.bind(babelHelpers.assertThisInitialized(g))),v.listen("MComposer:tagger:click",t.TOKEN_TYPES.ICON,function(){return g.$MStructuredComposerOGInput25()})):g.addSubscriptions(h.listen(g.$MStructuredComposerOGInput1,"click","og-tags",g.$MStructuredComposerOGInput26.bind(babelHelpers.assertThisInitialized(g))),h.listen(g.$MStructuredComposerOGInput1,"click","remove-token",g.$MStructuredComposerOGInput27.bind(babelHelpers.assertThisInitialized(g))));g.addSubscriptions(v.listen("MComposer:open:activity",null,function(){g.$MStructuredComposerOGInput3=!1,g.$MStructuredComposerOGInput28()}),v.listen("click","og_included_place_checkin",g.$MStructuredComposerOGInput29.bind(babelHelpers.assertThisInitialized(g))),h.listen(g.$MStructuredComposerOGInput5,"click",null,g.$MStructuredComposerOGInput24.bind(babelHelpers.assertThisInitialized(g))),h.listen(g.$MStructuredComposerOGInput7,"click","close-composer-attachment",g.$MStructuredComposerOGInput30.bind(babelHelpers.assertThisInitialized(g))));return g}var c=b.prototype;c.$MStructuredComposerOGInput19=function(){this.reset(),this.$MStructuredComposerOGInput31(),v.invoke("MStructuredComposerOGInput-done",null,{remove:!0}),k.log(n.MINUTIAE_REMOVE)};c.$MStructuredComposerOGInput30=function(){var a={};a[o.SHOW_ATTACHMENT]=!1;q.minutiaeSet(babelHelpers["extends"]({},p.getAll(),a))};c.$MStructuredComposerOGInput20=function(a){var b={};for(var c in o){var d=o[c];b[d]=a[d]}q.minutiaeSet(b)};c.$MStructuredComposerOGInput21=function(){__p&&__p();var a=h.find(this.$MStructuredComposerOGInput17,"li","token");this.$MStructuredComposerOGInput32();var b=p.get(o.ACTION_TYPE_ID);if(!b)return;var c=p.get(o.CUSTOM_ICON_ID),d=p.get(o.ICON_LEGACY),e=p.get(o.ICON),f=p.get(o.OBJECT_NAME),g=p.get(o.OBJECT_ID),i=!this.$MStructuredComposerOGInput15&&p.get(o.SHOW_ATTACHMENT),j=p.get(o.SUGGESTION_MECHANISM),l=p.get(o.USE_DEFAULT_ICON,!1),q=p.get(o.FBT_PHRASE);this.$MStructuredComposerOGInput16=p.get(o.TRIGGERS_EVENT_TAG_EXPANSION)?String(g):null;q||(q=m.getFBTPhrase(b,d,f,g));f&&!g?this.$MStructuredComposerOGInput11.value=f:(this.$MStructuredComposerOGInput11.value="",i?(this.$MStructuredComposerOGInput33(g,f),this.$MStructuredComposerOGInput14.value=!1):(this.$MStructuredComposerOGInput32(),this.$MStructuredComposerOGInput14.value=!0));if(z)v.invoke("MComposer:tagger:update",null,{ogActivity:{id:b,icon:e,object:f}});else{h.remove(a.firstChild);i={"max-width":u.getUseableWidth()-A+"px"};e=h.create("span",{className:"_52x0",style:i},q);h.prependContent(a,e)}this.$MStructuredComposerOGInput8&&(this.$MStructuredComposerOGInput4=q,this.$MStructuredComposerOGInput8.setValue(this.$MStructuredComposerOGInput4));this.$MStructuredComposerOGInput10.value=g;this.$MStructuredComposerOGInput9.value=b;this.$MStructuredComposerOGInput12.value=c;this.$MStructuredComposerOGInput18.hide();this.$MStructuredComposerOGInput34();this.$MStructuredComposerOGInput13.value=j;!g&&!l?(this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.hide(),this.$MStructuredComposerOGInput18.showIconSelector(b,g,f,d)):(this.$MStructuredComposerOGInput22(),v.invoke("MStructuredComposerOGInput-done",null,{add:!0}),k.log(n.MINUTIAE_ADD));v.invoke("MStructuredComposerOGInput:update")};c.$MStructuredComposerOGInput22=function(){this.$MStructuredComposerOGInput3&&this.hasNavigationPolicy()?this.$MStructuredComposerOGInput31():(this.$MStructuredComposerOGInput29(),v.invoke("MComposer:close:activity","og-tagger"))};c.reset=function(){this.$MStructuredComposerOGInput4=null,this.$MStructuredComposerOGInput9.value="",this.$MStructuredComposerOGInput10.value="",this.$MStructuredComposerOGInput11.value="",this.$MStructuredComposerOGInput12.value="",this.$MStructuredComposerOGInput14.value=!1,this.$MStructuredComposerOGInput15=!1,this.$MStructuredComposerOGInput16=null,z&&v.invoke("MComposer:tagger:update",null,{ogActivity:null}),this.$MStructuredComposerOGInput32(),this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.clear(),this.$MStructuredComposerOGInput34(),v.invoke("MStructuredComposerOGInput:update")};c.getEventIDForExpansion=function(){return this.$MStructuredComposerOGInput16};c.setVisible=function(a){this.$MStructuredComposerOGInput2=a,this.$MStructuredComposerOGInput34()};c.setDisableOgTagPreview=function(a){this.$MStructuredComposerOGInput15=a};c.hasValue=function(){return!!this.$MStructuredComposerOGInput9.value};c.getLoggingData=function(){return this.$MStructuredComposerOGInput9.value?{action_type:this.$MStructuredComposerOGInput9.value,object:this.$MStructuredComposerOGInput10.value,object_str:this.$MStructuredComposerOGInput11.value}:null};c.$MStructuredComposerOGInput34=function(){var a=!!this.$MStructuredComposerOGInput9.value;z||(a&&this.$MStructuredComposerOGInput2?h.show:h.hide)(this.$MStructuredComposerOGInput1);(this.$MStructuredComposerOGInput2?h.show:h.hide)(this.$MStructuredComposerOGInput5);g.conditionClass(this.$MStructuredComposerOGInput5,"active",a)};c.$MStructuredComposerOGInput33=function(a,b){this.$MStructuredComposerOGInput32();h.show(this.$MStructuredComposerOGInput6);b="/platform/og/composer/attachment";b=new r(b).setData({object_id:a});i.ajaxify(null,null,b,null)};c.$MStructuredComposerOGInput32=function(){h.replace(h.find(this.$MStructuredComposerOGInput7,"div","og-object-attachment"),this.$MStructuredComposerOGInput6),h.hide(this.$MStructuredComposerOGInput6)};c.$MStructuredComposerOGInput26=function(){k.log(n.MINUTIAE_CHANGE_ICON_INTENT),this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.hide(),this.$MStructuredComposerOGInput25()};c.$MStructuredComposerOGInput24=function(){k.log(n.MINUTIAE_INTENT),j.log("og_composer_icon_clicked"),this.$MStructuredComposerOGInput23()};c.$MStructuredComposerOGInput27=function(a){a.kill(),this.reset(),q.minutiaeRemove(),v.invoke("MStructuredComposerOGInput-done",null,{remove:!0}),k.log(n.MINUTIAE_REMOVE)};c.$MStructuredComposerOGInput35=function(){this.$MStructuredComposerOGInput3=!1,this.$MStructuredComposerOGInput18.cancel()};c.$MStructuredComposerOGInput29=function(){this.$MStructuredComposerOGInput3||(this.$MStructuredComposerOGInput3=!0),this.$MStructuredComposerOGInput18.hide()};c.$MStructuredComposerOGInput28=function(){this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.showIfHasValue(),this.$MStructuredComposerOGInput18.show()};c.$MStructuredComposerOGInput36=function(){this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.hide(),k.log(n.MINUTIAE_CHANGE_ICON_INTENT),this.$MStructuredComposerOGInput18.showIconSelector(this.$MStructuredComposerOGInput9.value,this.$MStructuredComposerOGInput10.value,this.$MStructuredComposerOGInput11.value,this.$MStructuredComposerOGInput12.value)};c.$MStructuredComposerOGInput31=function(){var a=this;this.currentNavigationPolicy().addOnClose(function(){return a.$MStructuredComposerOGInput18.hide()}).close()};c.$MStructuredComposerOGInput37=function(){var a=this;this.currentNavigationPolicy().addOnClose(function(){return a.$MStructuredComposerOGInput35()}).close()};c.$MStructuredComposerOGInput23=function(){var a=this;this.newNavigationPolicy().addOnCloseByBrowser(function(){return a.$MStructuredComposerOGInput35()}).addOnOpen(function(){return a.$MStructuredComposerOGInput28()}).open()};c.$MStructuredComposerOGInput25=function(){var a=this;this.newNavigationPolicy().addOnCloseByBrowser(function(){return a.$MStructuredComposerOGInput35()}).addOnOpen(function(){return a.$MStructuredComposerOGInput36()}).open()};return b}(x(l,s));e.exports=a}),null);
__d("MStructuredComposerPhotoPreviewBootloader",["BootloadedComponent.react","DOM","JSResource","MComposerNavigationMixin","MLoadingSpinner.react","PhotosUploadWaterfallXMixin","PUWSteps","React","ReactDOM","cx","fbt","mixin","performanceNow"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$MStructuredComposerPhotoPreviewBootloader1=b.root;c.$MStructuredComposerPhotoPreviewBootloader2=b.typeaheadConfig;c.$MStructuredComposerPhotoPreviewBootloader3=b.suggestions;c.$MStructuredComposerPhotoPreviewBootloader4=null;c.$MStructuredComposerPhotoPreviewBootloader5=null;c.$MStructuredComposerPhotoPreviewBootloader6=h.find(c.$MStructuredComposerPhotoPreviewBootloader1,"div","structured-composer-photo-preview-card");return c}var c=b.prototype;c.$MStructuredComposerPhotoPreviewBootloader7=function(a,b){var c=h.find(this.$MStructuredComposerPhotoPreviewBootloader1,"div","photo-preview-title");b&&Object.keys(b).length>0&&c?h.setContent(c,q._("Tag photo")):c&&h.setContent(c,q._("Photo Preview"));o.render(n.createElement(g,babelHelpers["extends"]({},this.props,{bootloadLoader:i("MStructuredComposerPhotoPreviewBootloadable.react").__setRef("MStructuredComposerPhotoPreviewBootloader"),bootloadPlaceholder:n.createElement("div",{className:"_4ldw"},n.createElement(k,null),q._("Loading...")),imageSrc:a,initialFaceboxes:b,onTagAdd:this.$MStructuredComposerPhotoPreviewBootloader4,onTagDelete:this.$MStructuredComposerPhotoPreviewBootloader5,typeaheadConfig:this.$MStructuredComposerPhotoPreviewBootloader2,typeaheadSuggestions:this.$MStructuredComposerPhotoPreviewBootloader3})),this.$MStructuredComposerPhotoPreviewBootloader6);h.show(this.$MStructuredComposerPhotoPreviewBootloader1)};c.$MStructuredComposerPhotoPreviewBootloader8=function(){h.hide(this.$MStructuredComposerPhotoPreviewBootloader1),o.unmountComponentAtNode(this.$MStructuredComposerPhotoPreviewBootloader6)};c.show=function(a,b){var c=this;if(this.hasNavigationPolicy())return;this.newNavigationPolicy().addOnOpen(function(){c.$MStructuredComposerPhotoPreviewBootloader7(a,b),c.$MStructuredComposerPhotoPreviewBootloader9=s(),c.logStep(m.CLIENT_PHOTO_PREVIEW_OPEN,{})}).addOnClose(function(){h.hide(c.$MStructuredComposerPhotoPreviewBootloader1),c.logStep(m.CLIENT_PHOTO_PREVIEW_CLOSE,{elapsed_time:s()-c.$MStructuredComposerPhotoPreviewBootloader9})}).open()};c.setOnDeleteXYTag=function(a){this.$MStructuredComposerPhotoPreviewBootloader5=a};c.setOnAddXYTag=function(a){this.$MStructuredComposerPhotoPreviewBootloader4=a};c.hide=function(){if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().close()};c.setWaterfall=function(a,b,c){this.$MStructuredComposerPhotoPreviewBootloader10=a;this.$MStructuredComposerPhotoPreviewBootloader11=b;this.$MStructuredComposerPhotoPreviewBootloader12=c;return this};c.getWaterfallID=function(){return this.$MStructuredComposerPhotoPreviewBootloader10};c.getWaterfallAppName=function(){return this.$MStructuredComposerPhotoPreviewBootloader11};c.getWaterfallSource=function(){return this.$MStructuredComposerPhotoPreviewBootloader12};return b}(r(l,j));e.exports=a}),null);
__d("SlideshowImageUtil",["immutable","SlideshowConstants","SlideshowConstants","invariant"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=i.formats,l="-",m=24,n=1.3,o=10,p=460,q=32,r=.8,s={getCroppingSpec:function(a,b,c,d){if(d&&a){d=Object.keys(a)[0];a=a[d];return{format:h.formats.Original,topLeft:a[0],bottomRight:a[1]}}return this.getFullSizeImageBoxCroppingSpec({width:c.width?c.width:0,height:c.height?c.height:0},{width:b.width,height:b.height})},shouldCropImages:function(a){__p&&__p();var b=a[0].width,c=a[0].height;for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(f.width!==b||f.height!==c)return!0}return!1},getCrops:function(a,b,c){a=this.calculateDefaultCoordinates(a,c);return c={},c[b]=a,c},calculateCropsForFormat:function(a,b,c){__p&&__p();var d=this;if(!a.size)return g.Map();var e=g.Map();switch(b){case k.Original:var f=a.first();f=c.get(f.key);var i=f.height,j=f.width;a.forEach(function(a){e=e.set(a.key,d.getCrops(c.get(a.key),j+h.SIZE_DELIMITER+i,j/i))});break;case k.Wide:a.forEach(function(a){e=e.set(a.key,d.getCrops(c.get(a.key),b,h.LANDSCAPE_ASPECT_RATIO))});break;case k.Square:a.forEach(function(a){e=e.set(a.key,d.getCrops(c.get(a.key),b,h.SQUARE_ASPECT_RATIO))});break;case k.Vertical:a.forEach(function(a){e=e.set(a.key,d.getCrops(c.get(a.key),b,h.VERTICAL_ASPECT_RATIO))});break;default:}return e},calculateDefaultCoordinates:function(a,b){var c,d;a.width/b>a.height?(c=a.height,d=a.height*b):(d=a.width,c=a.width/b);b=(a.width-d)/2;a=(a.height-c)/2;var e=Math.floor(b)-b,f=Math.floor(a)-a;return[[b+e,a+f],[Math.round(b+d+e),Math.round(a+c+f)]]},getPreviewBoxDimensions:function(a,b){__p&&__p();var c=b,d=b;if(a.length>0){a=a[0];a=Object.keys(a)[0];switch(a){case h.formats.Wide:c=b/h.LANDSCAPE_ASPECT_RATIO;break;case h.formats.Vertical:d=b*h.VERTICAL_ASPECT_RATIO;break;case h.formats.Square:break;default:b=a.split(h.SIZE_DELIMITER);a=Number(b[0]);b=Number(b[1]);a>b?c=Math.floor(d*b/a):d=Math.floor(c*a/b);break}}return{width:d,height:c}},getFullSizeImageBoxCroppingSpec:function(a,b){b=b.width/b.height;a=this.calculateDefaultCoordinates(a,b);a.length===2||j(0,1043);return{format:h.formats.Original,topLeft:a[0],bottomRight:a[1]}},getDefaultCroppingSpec:function(a){a=this.calculateDefaultCoordinates(a,1);a.length===2||j(0,1043);return{format:h.formats.Square,topLeft:a[0],bottomRight:a[1]}},getHorizontalAlignmentForAPI:function(a){a=a.split(l);return a[1]},getFontSize:function(a){return Math.floor(m*a)},getFontWeight:function(a){return a?"bold":"normal"},getLineHeight:function(){return n},getOpacity:function(){return r},getTextoverlayMaxEdge:function(a,b){return a-q*b*2-o*b*2},getTextoverlayPadding:function(a){return o*a},getTextoverlayMargin:function(a){return q*a},getScaleMultiplierFromCrops:function(a){a=Object.keys(a)[0];a=a.split(h.SIZE_DELIMITER);var b=Number(a[0]);a=Number(a[1]);return s.getScaleMultiplier(b,a)},getScaleMultiplier:function(a,b){return Math.max(a/p,b/p)},getOuterTextboxCoordinatesForAPI:function(a,b,c){a=Object.keys(a)[0];a=a.split(h.SIZE_DELIMITER);var d=Number(a[0]);a=Number(a[1]);d=s.calculateTextboxCoordinates(a,d,b,c);return[Math.floor(d.marginLeft),Math.floor(a-d.marginTop-d.textHeight),Math.ceil(d.marginLeft+d.textWidth),Math.ceil(a-d.marginTop)]},getInnerTextboxCoordinatesForAPI:function(a,b,c){a=Object.keys(a)[0];a=a.split(h.SIZE_DELIMITER);var d=Number(a[0]);a=Number(a[1]);d=s.calculateTextboxCoordinates(a,d,b,c);return[Math.floor(d.marginLeft),Math.floor(a-d.marginTop-d.textHeight),Math.ceil(d.marginLeft+d.textWidth),Math.ceil(a-d.marginTop)]},convertHexToRGBA:function(a){if(!a)return null;a=a.replace("#","");var b=parseInt(a.substring(0,2),16),c=parseInt(a.substring(2,4),16);a=parseInt(a.substring(4,6),16);return"rgba("+b+","+c+","+a+","+s.getOpacity()+")"},calculateTextboxCoordinates:function(a,b,c,d){__p&&__p();var e=c.text_alignment.split(l),f=e[1];e=e[0];var g=s.getFontSize(d),h=s.getTextoverlayMaxEdge(b,d),i=s.getTextoverlayMaxEdge(a,d),j=document.createElement("div");j.textContent=c.textoverlay_content?c.textoverlay_content:"";j.style.visibility="hidden";j.style.display="inline-block";j.style.wordWrap="break-word";j.style.whiteSpace="pre-wrap";j.style.fontFamily=c.font;j.style.fontWeight=s.getFontWeight(c.bold);j.style.fontSize=g+"px";j.style.textAlign=f;j.style.maxWidth=h+"px";j.style.maxHeight=i+"px";j.style.lineHeight=s.getLineHeight()*g+"px";j.style.padding=s.getTextoverlayPadding(d)+"px";j.style.letterSpacing="0.2px";document.body.appendChild(j);c=j.clientWidth;h=j.clientHeight;document.body.removeChild(j);i=q*d;g=q*d;j=b-q*d;var k=a-q*d;f=="center"?i=Math.min((b-c)/2,j):f=="right"&&(i=Math.min(b-q*d-c,j));e=="center"?g=Math.min((a-h)/2,k):e=="bottom"&&(g=Math.min(a-q*d-h,k));return{marginLeft:i,marginTop:g,textHeight:h,textWidth:c}}};e.exports=s}),null);
__d("SlideshowFrameImage.react",["Image.react","React","SlideshowImageUtil"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.$5=function(){__p&&__p();this.props.croppingSpec?(this.$3={width:this.props.imageWidth,height:this.props.imageHeight},this.$4={x:-this.props.croppingSpec.topLeft[0],y:-this.props.croppingSpec.topLeft[1]},this.$1={width:this.props.croppingSpec.bottomRight[0]+this.$4.x,height:this.props.croppingSpec.bottomRight[1]+this.$4.y}):(this.$3={width:this.props.imageWidth,height:this.props.imageHeight},this.$4={x:0,y:0},this.$1={width:this.props.imageWidth,height:this.props.imageHeight});if(this.props.fitToMaxHeightAndWidth){var a=this.props.maxWidth/this.$1.width;this.$3.width*=a;this.$4.x*=a;this.$1.width*=a;a=this.props.maxHeight/this.$1.height;this.$3.height*=a;this.$4.y*=a;this.$1.height*=a}else{a=Math.min(this.props.maxWidth/this.$1.width,this.props.maxHeight/this.$1.height);this.$3.width*=a;this.$3.height*=a;this.$4.x*=a;this.$4.y*=a;this.$1.width*=a;this.$1.height*=a}this.$2={x:(this.props.maxWidth-this.$1.width)/2,y:(this.props.maxHeight-this.$1.height)/2}};c.$6=function(){var a=this.props.textoverlay,b=i.getScaleMultiplier(this.props.maxWidth,this.props.maxHeight);if(!a||!a.textoverlay_content)return null;var c=i.calculateTextboxCoordinates(this.props.maxHeight,this.props.maxWidth,a,b),d=a.text_alignment.split("-")[1];return h.createElement("div",{style:{backgroundColor:i.convertHexToRGBA(a.background_color),color:a.font_color,position:"absolute",fontFamily:a.font,fontSize:i.getFontSize(b),fontWeight:i.getFontWeight(a.bold),letterSpacing:"0.2px",lineHeight:i.getLineHeight(),marginLeft:c.marginLeft,marginTop:c.marginTop,maxHeight:i.getTextoverlayMaxEdge(this.props.maxHeight,b),maxWidth:i.getTextoverlayMaxEdge(this.props.maxWidth,b),overflow:"hidden",overflowWrap:"break-word",padding:i.getTextoverlayPadding(b),textAlign:d,whiteSpace:"pre-wrap"}},a.textoverlay_content)};c.render=function(){this.$5();return h.createElement("div",{className:this.props.className,style:{position:this.props.positionStyle,width:this.$1.width,height:this.$1.height,left:this.$2.x,top:this.$2.y,overflow:"hidden"}},h.createElement(g,{src:this.props.imageSrc,width:this.$3.width,height:this.$3.height,style:{position:"absolute",left:this.$4.x,top:this.$4.y}}),this.$6())};return b}(h.Component);a.defaultProps={className:null,croppingSpec:null,fitToMaxHeightAndWidth:!1,positionStyle:"absolute",textoverlay:null};e.exports=a}),null);
__d("MSlideshowPlayer.react",["DOM","MImageFetchNotifier","React","ReactDOM","ShimButton.react","SlideshowFrameImage.react","SlideshowImageUtil","Style","SubscriptionsHandler","cancelAnimationFrame","cx","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();a=i.PropTypes;var s=300,t=1.7143;b=i.createClass({displayName:"MSlideshowPlayer",_animationID:null,_timeout:null,_currIndex:0,_subscriptions:null,propTypes:{durationInMS:a.number.isRequired,transitionInMS:a.number.isRequired},getInitialState:function(){return{imagesAllLoaded:!1,playing:!1}},UNSAFE_componentWillMount:function(){var a=this,b=new o(),c=i.Children.count(this.props.children);i.Children.forEach(this.props.children,function(d){d=d.props.src;b.addSubscriptions(h.notifyWhenFetched(d,function(){c--,c===0&&a.setState({imagesAllLoaded:!0})}))});this._subscriptions=b},componentDidMount:function(){this._timeout=null},componentWillUnmount:function(){this._clearTimeout(),this._subscriptions&&this._subscriptions.release()},shouldComponentUpdate:function(a,b){return b.imagesAllLoaded!==this.state.imagesAllLoaded||b.playing!==this.state.playing},_clearTimeout:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._animationID&&(p(this._animationID),this._animationID=null)},_getItemCount:function(){return i.Children.count(this.props.children)},_moveNext:function(){this._currIndex++,this._currIndex>=this._getItemCount()?this._stopPlaying():this._fadeImage()},_setTimeout:function(){this._timeout=setTimeout(this._moveNext,this.props.durationInMS)},_fadeImage:function(){var a=this,b=j.findDOMNode(this.refs[this._currIndex-1]),c=0,d=function d(e){c=c===0?e:c;e=Math.max(1-(e-c)/a.props.transitionInMS,0);n.set(b,"opacity",e);e===0?a._setTimeout():a._animationID=r(d)};this._animationID=r(d)},_resetImages:function(){this._currIndex=0;for(var a=0;a<this._getItemCount();a++)n.set(j.findDOMNode(this.refs[a]),"opacity",1)},_startPlaying:function(){if(this._timeout)return;this.setState({playing:!0},this._setTimeout)},_stopPlaying:function(){this._timeout&&(this.setState({playing:!1}),this._clearTimeout(),this._resetImages())},_getImageDimensions:function(a){if(this.refs[a]){a=g.find(j.findDOMNode(this.refs[a]),"img");return{width:a.naturalWidth,height:a.naturalHeight}}return{width:0,height:0}},_getCurrentImages:function(a,b,c){var d=this;return i.Children.map(this.props.children,function(e,f){var g=d._getImageDimensions(f),h=c?m.getDefaultCroppingSpec(g):null;return i.createElement(l,{imageSrc:e.props.src,imageWidth:g.width,imageHeight:g.height,croppingSpec:h,maxWidth:a,maxHeight:b,ref:f,key:f})}).reverse()},render:function(){var a=this;if(this._getItemCount()===0)return i.createElement("div",null);var b=i.Children.map(this.props.children,function(b,c){return a._getImageDimensions(c)}),c=m.shouldCropImages(b);b=c||!this.state.imagesAllLoaded?1:b[0].width/b[0].height;b=s/Math.max(b,t);return i.createElement("div",{className:"_1k7"},i.createElement("div",{className:"_1k8",style:{width:s,height:b}},this._getCurrentImages(s,b,c)),i.createElement("div",{className:"_1k9"+(this.state.playing||!this.state.imagesAllLoaded?" _1ka":"")},i.createElement(k,{className:"_1o0y",onClick:this._startPlaying})))}});e.exports=b}),null);
__d("SlideshowCreationWaterfallEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SLIDESHOW_INTENT:"intent_slideshow",SLIDESHOW_CANCEL:"cancel_slideshow",SLIDESHOW_POST:"post_slideshow",SLIDESHOW_PREVIEW_INTENT:"intent_slideshow_preview",SLIDESHOW_PREVIEW_CANCEL:"cancel_slideshow_preview",SLIDESHOW_IMAGE_UPLOAD_STARTED:"image_upload_started_slideshow",SLIDESHOW_IMAGE_UPLOAD_SUCCESS:"image_upload_success_slideshow",SLIDESHOW_IMAGES_SELECT_CONFIRM:"images_select_confirm_slideshow",SLIDESHOW_IMAGE_REMOVE:"image_remove_slideshow",SLIDESHOW_ADD_VIDEO_CLICK:"add_video_click_slideshow",SLIDESHOW_VIDEO_UPLOAD_START:"video_upload_start_slideshow",SLIDESHOW_VIDEO_UPLOAD_ERROR:"video_upload_error_slideshow",SLIDESHOW_VIDEO_UPLOAD_SUCCESS:"video_upload_success_slideshow",SLIDESHOW_FRAME_IMAGES_START:"frame_images_start_slideshow",SLIDESHOW_FRAME_IMAGES_SUCCESS:"frame_images_success_slideshow",SLIDESHOW_FRAME_IMAGES_ERROR:"frame_images_error_slideshow",SLIDESHOW_STORYLINE_MOOD_SELECT:"storyline_mood_select_slideshow",SLIDESHOW_MUSIC_CATEGORY_SELECT:"music_category_select_slideshow",SLIDESHOW_STORYLINE_MOOD_REMOVE:"storyline_mood_remove_slideshow",SLIDESHOW_STORYLINE_MOOD_DELETE:"storyline_mood_delete_slideshow",SLIDESHOW_AUDIO_UPLOAD_START:"audio_upload_start_slideshow",SLIDESHOW_AUDIO_UPLOAD_ERROR:"audio_upload_error_slideshow",SLIDESHOW_AUDIO_UPLOAD_SUCCESS:"audio_upload_success_slideshow",SLIDESHOW_DURATION_CHANGE:"duration_change_slideshow",SLIDESHOW_TRANSITION_CHANGE:"transition_change_slideshow",SLIDESHOW_FORMAT_CHANGE:"format_change_slideshow",SLIDESHOW_TAB_CHANGE:"tab_change_slideshow"})}),null);
__d("MStructuredComposerSlideshowPreview",["CSS","DOM","Image.react","MComposerNavigationMixin","MComposerSlideshowLogger","MCompositionPhotoFields","MCompositionPhotoStore","MSlideshowPlayer.react","MSubscriptionsHandlerMixin","React","ReactDOM","SlideshowConstants","SlideshowCreationWaterfallEvent","Stratcom","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();var v="cancel_slideshow_preview",w="show_slideshow_preview",x="submit_slideshow";a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$MStructuredComposerSlideshowPreview1=b;d.$MStructuredComposerSlideshowPreview2=c;d.$MStructuredComposerSlideshowPreview3=null;d.addSubscriptions(h.listen(d.$MStructuredComposerSlideshowPreview2,"click",w,d.$MStructuredComposerSlideshowPreview4.bind(babelHelpers.assertThisInitialized(d))),h.listen(d.$MStructuredComposerSlideshowPreview1,"click",v,d.$MStructuredComposerSlideshowPreview5.bind(babelHelpers.assertThisInitialized(d))),h.listen(d.$MStructuredComposerSlideshowPreview1,"click",x,d.$MStructuredComposerSlideshowPreview6.bind(babelHelpers.assertThisInitialized(d))));return d}var c=b.prototype;c.$MStructuredComposerSlideshowPreview7=function(a){var b=m.get(l.PHOTO_INFO_LIST,[]).map(function(a,b){return p.createElement(i,{src:a.previewURI,key:b})});return q.render(p.createElement(n,{durationInMS:r.photo_duration,transitionInMS:r.photo_transition_duration},b),a)};c.$MStructuredComposerSlideshowPreview4=function(){var a=this;this.newNavigationPolicy().addOnOpen(function(){a.$MStructuredComposerSlideshowPreview3=a.$MStructuredComposerSlideshowPreview7(h.find(a.$MStructuredComposerSlideshowPreview1,"div","slideshow_preview_placeholder")),g.show(a.$MStructuredComposerSlideshowPreview1),k.log(s.SLIDESHOW_PREVIEW_INTENT)}).addOnClose(function(){q.unmountComponentAtNode(h.find(a.$MStructuredComposerSlideshowPreview1,"div","slideshow_preview_placeholder")),g.hide(a.$MStructuredComposerSlideshowPreview1),k.log(s.SLIDESHOW_PREVIEW_CANCEL)}).addOnCloseByBrowser(function(){return g.hide(a.$MStructuredComposerSlideshowPreview1)}).open()};c.$MStructuredComposerSlideshowPreview5=function(){if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().close()};c.$MStructuredComposerSlideshowPreview6=function(){[h.find(this.$MStructuredComposerSlideshowPreview1,"button",x),h.find(this.$MStructuredComposerSlideshowPreview1,"button",v)].forEach(function(a){a.disabled=!0}),t.invoke("MStructuredComposerSlideshowPreview-submit")};c.setSubmitButtonText=function(a){h.setContent(h.find(this.$MStructuredComposerSlideshowPreview1,"button",x),a)};return b}(u(j,o));e.exports=a}),null);
__d("PrivacyRemindersLoggingTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"})}),null);
__d("UnpublishedContentTypeJSConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PUBLISHED:0,SCHEDULED:1,DRAFT:2,ADS_POST:3,GLOBAL_CONTENT:4,PREVIEW:5,INLINE_CREATED:6,VALIDATION:7,LOCATION:8,INSTANT_ARTICLE:9,TAROT_DIGEST:10,BOOST_CANDIDATE:11,REVIEWABLE_BRANDED_CONTENT:12,WOODHENGE:13,AD_BREAK_PREREVIEW:14})}),null);
__d("XPhotosIncrementThumbnailPreviewNUXImpressionsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/photos/tagging/increment_thumbnail_preview_nux_impressions/",{})}),null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/reminders/log_imp/",{type:{type:"String",required:!0}})}),null);
__d("whitelistObjectKeys",[],(function(a,b,c,d,e,f){function a(a,b){var c={};b=Array.isArray(b)?b:Object.keys(b);for(var d=0;d<b.length;d++)typeof a[b[d]]!=="undefined"&&(c[b[d]]=a[b[d]]);return c}e.exports=a}),null);
__d("MStructuredComposer",["ActorURI","BanzaiLogger","CSS","CurrentUser","DateTime","DOM","GroupSellLogger","LoadingIndicator","MAjaxify","MAjaxifyFormTypes","MarauderLogger","MComposerBackgroundUploadProgress","MComposerDataStoreKeys","MComposerDestinationPickerConfig","MComposerEligibility","MComposerEntry","MComposerLogger","MComposerLoggerPublishingListeners","MComposerNavigationConstants","MComposerNavigationMixin","MComposerPresence","MComposerSigils","MComposerSlideshowLogger","MComposerTypes","MComposerWaterfallEvent","MComposition","MCompositionConfigFields","MCompositionConfigStore","MCompositionFormatFields","MCompositionFormatID","MCompositionFormatStore","MCompositionMinutiaeFields","MCompositionMinutiaeStore","MCompositionPageRecommendationsFields","MCompositionPageRecommendationsStore","MCompositionPhotoFields","MCompositionPhotoStore","MCompositionPlaceFields","MCompositionPlaceStore","MCompositionPrivacyStore","MCompositionShareFields","MCompositionShareStore","MCompositionSlideshowFields","MCompositionSlideshowStore","MCompositionStatusFields","MCompositionStatusStore","MCompositionStoreID","MCompositionUserActions","MCompositionWithFields","MCompositionWithStore","MCompositionAudioStore","MCompositionAudioFields","MGroupSellInterceptUtil","MInputFocus","MJSEnvironment","MLegacyDataStore","MMultiPhotoUploaderAttachmentState","MMultiPhotoUploaderAttachmentType","MPrivacyComposerSelector","MRequest","MRequestTypes","MStoriesProductionTrayAsync","MStoriesToast","MStoriesUIConstants","MStructuredComposerOGInput","MStructuredComposerPhotoPreviewBootloader","MStructuredComposerSlideshowPreview","MTagSuggestionsController","MTouchClick","MViewport","PageRecommendationsMinChar","PrivacyConst","PrivacyRemindersLoggingTypes","SlideshowConstants","SlideshowCreationWaterfallEvent","Stratcom","Timezone","UnpublishedContentTypeJSConstants","URI","URLMatcher","UserAgent","Vector","WebGraphQLLegacyHelper","XAsyncRequest","XInlineComposerAudienceEducationController","XPhotosIncrementThumbnailPreviewNUXImpressionsController","XPrivacyRemindersImpressionLoggingController","XWebGraphQLMutationController","$","areEqual","createDeprecatedProperties","cx","fbt","ge","getActiveElement","getObjectValues","gkx","mixin","setTimeoutAcrossTransitions","uuid","whitelistObjectKeys","WildeLoader"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,aa,r,s,ba,t,u,ca,v,da,ea,fa,ga,w,x,ha,y,z,A,B,C,D,ia,E,F,G,H,ja,I,ka,J,K,la,ma,L,M,N,O,na,oa,pa,qa,ra,sa,ta,P,ua,va,wa,Q,xa,ya,za,Aa,Ba,Ca,Da,Ea,R,S,Fa,T,Ga,Ha,Ia,U,Ja,V,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,W,Ua,Va,Wa,X,Y,Xa,Ya,Za,$a,ab,bb,cb){__p&&__p();var Z=b("WildeLoader").MWildeTimelinePublisherBar,db=5,eb=6*3600*1e3,fb=100;d=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(d,b);function d(a,d,e,f,g,h,j,k,m,n,o,p,q,aa,r,t,u,ca){__p&&__p();var v;v=b.call(this)||this;v._resetComposer=function(){__p&&__p();v._onComposerCancel=null;v._onComposerSubmit=null;v._isPageCheckin&&(v._isPageCheckin=!1,v._changeConfig(v._defaultConfig));v._submitted=!1;v._updateSubmitButtonState();l.hide(v._error_btn);v._hasMentions=!1;v._numMentions=0;v._friendsInputController.reset();v._ogTagger&&(v._ogInputController.reset(),U.invoke("composerReset"),v._ogTagger.hide());l.empty(v._xyTagsInput);v._photoAction&&(l.find(v._attachPhoto,"input","photo-input").value="",v._hasPhoto=!1,!v._getIsAlbumDisabled()?(v._removeAlbumAndPhoto(),v._albumPicker.hide()):(l.hide(v._attachPhoto),v._photoOpen=!1),i.conditionClass(v._photoButton,"active",!1),l.show(v._photoButton));v._slideshowToggle&&i.hide(v._slideshowToggle);v._slideshowNUX&&v._slideshowNUX.hasShown()&&(v._slideshowNUX.dismiss(),v._slideshowNUX=null);v._pageInfo&&l.hide(v._pageInfo);v._longReviewTips&&l.hide(v._longReviewTips);v._starsRatableInput&&l.hide(v._starsRatableInput);v._newcomerAudienceNux=null;v._audienceAlignmentFlyout=null;v._showStickyGuardrailFlyout=!1;v._photoButton&&l.show(v._photoButton);var a=v._getPrivacySelector();a&&a.isOpen()&&a.hideMenu();v._privacySelector&&l.show(v._privacySelector);v._updateTagExpansion();v._onlyMeFlyoutShown=!1;v._mentionsEnabled=!0;U.invoke("MComposer:tagger:clear");v._resetPosition();v._determineFormAction();U.invoke("MMentions:clearHiddenInput");U.invoke("MCustomPrivacy::removeListener");v._closeComposer();v._cleanupLogWritten();U.invoke("MMentions:enable");U.invoke("MStructuredComposer:reset");v._multiPhotoUploader&&v._multiPhotoUploader.resetState();O.finalize();v._bgUploadWaitForMediaListener&&(v._bgUploadWaitForMediaListener.remove(),v._bgUploadWaitForMediaListener=null)};v._composerHasContent=function(){if(ba.isComposerEmpty()){v._showError(X._("Please add content to your status before posting"));return!1}return!0};v._handleEditChange=function(){v._hasEditChanges=!0};c=p;v._ogClearablePreview=aa;v._albumPicker=f;v._ogTagger=g;v._multiPhotoUploader=h;v._pageInfo=j;v._createLabel=k;v._updateLabel=m;v._photosPreviewConfig=u;v._photoPreview=null;v._photosPreviewNux=ca;v._numMentions=0;v._hasMentions=!!v._numMentions;v._defaultHideConfig={};v._previewedAttachmentId=-1;v._targetType=n;v._entryPointRef=o;v._stayHiddenUntilOGTaggerCloses=!1;v._logWrittenListener=null;v._onComposerCancel=null;v._onComposerSubmit=null;v._root=a;v._isCreateAlbumDialogOpen=!1;v._mentionsEnabled=!0;v._albumID=W("album_fbid").value;e=W("attach_photo");q=z.get(y.DISABLE_ALBUM,v._defaultHideConfig[y.DISABLE_ALBUM]);!q&&(v._albumPicker||v._multiPhotoUploader)?i.conditionClass(e,"_6-k",!0):l.hide(e);v._mainPage=W("viewport");v._composer=l.find(v._root,"div","composer-main-view");v._composerTitle=l.find(v._composer,"div","composer-title");v._submitButtonNodes=l.scry(v._composer,"button","submit_composer");v._staticTemplates=W("static_templates");v._error_btn=l.find(v._composer,"div","m-status-empty-error");v._forsaleIntercept=l.scry(v._composer,"div","m-forsale-intercept")[0];v._forsaleIntercept&&(v._forsaleInterceptForsale=l.find(v._forsaleIntercept,"button","forsale_intercept_forsale"),v._forsaleInterceptNonForsale=l.find(v._forsaleIntercept,"button","forsale_intercept_nonforsale"),v._groupID=l.find(v._forsaleIntercept,"input","sell-composer-group-id").value);v._forsaleInterceptShown=!1;v._forsaleInterceptDeclinedTimestamp=0;v._form=l.find(v._composer,"form");v._starsRatableInput=l.find(v._form,"div","composer-stars-ratable-input");v._ratingTextContainer=l.scry(v._form,"div","composer-stars-rating-text")[0];v._xyTagsInput=l.find(v._form,"div","xy-tags-input");v._friendsInputController=new c(d,l.find(v._form,"div","with-tags"),l.find(v._form,"button","with-button"));v._multiPhotoUploader&&r&&(v._tagSuggestionsController=new Ea(d,v._multiPhotoUploader,v._targetType,v._form.target.value,v._friendsInputController,t),v._photosPreviewConfig&&v._multiPhotoUploader.getUploader().setProps({onUploadStarted:v._initPhotoPreview.bind(babelHelpers.assertThisInitialized(v))}));v._multiPhotoUploader.getUploader().setProps({onUploadSuccess:v._onUploadSuccess.bind(babelHelpers.assertThisInitialized(v))});v._slideshowToggle=l.scry(v._form,"div","slideshow-toggle")[0];v._slideshowToggleOptions=v._slideshowToggle?l.scry(v._slideshowToggle,"input","slideshow-option"):null;v._slideshowInput=l.scry(v._form,"input","slideshow-input")[0];v._slideshowNoticePhotoMin=l.scry(v._composer,"div","slideshow-photo-min-msg")[0];v._slideshowNoticePhotoMax=l.scry(v._composer,"div","slideshow-photo-max-msg")[0];v._contextualMessage=l.scry(v._form,"div","contextual_message")[0];p=l.scry(v._form,"div","js_placeholder");v._placeholder=p.length>0?p[0]:null;v._textarea=l.find(v._form,"textarea","composer-textarea");v._postTypeInput=l.scry(v._form,"input","unpublished_content_type_input")[0];v._defaultAction=v._form.action;g&&(v._ogInputController=new Ba(l.find(v._form,"div","og-tags"),l.find(v._form,"button","og-button"),l.find(v._form,"div","og-object-attachment"),g,v._ogClearablePreview));v._buttonbar=l.find(v._root,"div","composer-buttons");v._listeners=[];v._editChangesProducers=[ia,I,ka,M,oa];v._postToStoryEnabled=s.default_select_stories;v._postToFeedEnabled=s.default_select_newsfeed;v._textFormatPresetId=null;v._isExternalLinkPreview=!1;v._waitForPollingTagSuggestions=!1;v._saveConfig();v._uploadButtons={audioButton:l.scry(v._form,"button","audio-button")[0],photoButton:l.scry(v._form,"button","photo-button")[0],videoButton:l.scry(v._form,"button","video-button")[0]};return v}var e=d.prototype;e._getNavigationPolicy=function(a,b){var c=this,d=this.newNavigationPolicy().addOnOpen(function(){return c._showComposer(a,b||{})}).addOnOpenChild(function(){return c._hideForInterstitial()}).addOnReturnFromChild(function(){i.conditionShow(c._composer,!c._stayHiddenUntilOGTaggerCloses),c._focusOnTextarea()}).addCloseByBrowserApprover(function(){return c._confirmClose()}).addOnCloseByBrowser(function(){return c._cancelComposer()});this._onComposerCancel&&d.addOnCloseByBrowser(this._onComposerCancel);return d};e._getDefaultCancelConfirmMessage=function(){if(this._composerType===w.EDIT)return X._("Are you sure you want to discard your changes?");else return X._("Are you sure you want to discard this post?")};e._confirmClose=function(){__p&&__p();this._composerType===w.RECOMMENDATION&&h.log("ReviewProductionLoggerConfig",{event:"composer_discard_dialog_shown",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()});u.log(x.COMPOSER_CANCEL_INTENT);var b;this._composerType===w.EDIT?b=this._shouldEditStatus():this._composerType===w.GROUP_SELL?b=this._isValidForSalePost():b=this._shouldPostStatus();b=Ma.isBrowser("Mobile Safari 9")?!1:b;if(b){b=z.get(y.CANCEL_CONFIRMATION_MESSAGE)||this._getDefaultCancelConfirmMessage();if(!a.confirm(b)){this._composerType===w.RECOMMENDATION&&h.log("ReviewProductionLoggerConfig",{event:"composer_discard_dialog_cancel",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()});return!1}this._composerType===w.RECOMMENDATION&&h.log("ReviewProductionLoggerConfig",{event:"composer_discard_dialog_confirm",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()})}this._composerType===w.RECOMMENDATION&&h.log("ReviewProductionLoggerConfig",{event:"composer_cancel",page_id:this._recommendationData.page_id,surface:this._getRecommendationSurface()});return!0};e._navigateAwayFromComposerAndCancel=function(){var a=this;if(!this.hasNavigationPolicy())return;if(!this._confirmClose())return;var b=this.currentNavigationPolicy().addOnClose(function(){return a._cancelComposer()});this._onComposerCancel&&b.addOnClose(this._onComposerCancel);b.close()};e._navigateAwayFromComposer=function(a){var b=this;if(!this.hasNavigationPolicy())return;var c=this.currentNavigationPolicy().addOnClose(function(){return b._resetComposer()});c.setIsOnSubmit();this._onComposerSubmit&&c.addOnClose(this._onComposerSubmit.bind(null,a));c.close()};e._navigateToComposer=function(a,b){if(t.blockNavigateToComposer())return;this._getNavigationPolicy(a,b).open()};e._navigateToComposerAndCheckin=function(){var a=this;if(t.blockNavigateToComposer())return;this._getNavigationPolicy(w.CHECKIN).addOnOpen(function(){l.hide(a._composer),a._startCheckin()}).addOnCloseByBrowser(function(){U.invoke("back","MComposer:dialog:place")}).open()};e._focusOnTextarea=function(){this._skipFocus()||this._textarea.focus()};e._initializeComposition=function(a){a[N.CONFIG]=babelHelpers["extends"]({},this._defaultConfig,a[N.CONFIG]),O.initialize(a)};e._setPlaceholder=function(a){this._placeholder?(this._textarea.placeholder="",l.setContent(this._placeholder,a)):this._textarea.placeholder=a};e._showComposer=function(a,b){__p&&__p();var c=this;b.targetid&&(this._form.target.value=b.targetid);U.invoke("MPrivacyDeferredSelector::init");U.listen("MPrivacyDeferredSelector-loaded",null,function(){this._privacyDeferredSelectorHasLoaded=!0}.bind(this));var d=b[r.COMPOSITION]||{};Object.prototype.hasOwnProperty.call(d,N.CONFIG)||(d[N.CONFIG]=cb(b,Ya(y)));var e=this._getFormInput();this._wasLoadedWithAsyncPlaceholderComposer?this.copyPlaceholderComposerFormTextAndFocus(d):e.value&&e.value.length>0&&this._setCompositionDataStatusText(d,e.value);this._initializeComposition(d);U.invoke("MMentions:reset");this._composerType=z.get(y.COMPOSER_TYPE,a);if(b&&b.og_activity){e={};for(var f in D){d=D[f];e[d]=b.og_activity[d]}O.minutiaeSet(e)}this._logWrittenListener=l.listen(this._textarea,"keyup",null,function(){return c._logWritten()});d=z.get(y.PLACEHOLDER);d&&this._setPlaceholder(d);b=z.get(y.CONTEXTUAL_MESSAGE);this._syncSubmit=z.get(y.SYNC_SUBMIT);this._contextualMessage&&(this._contextualMessage.textContent=b||"",i.conditionShow(this._contextualMessage,!!b));if(this._ogTagger){q.log("og_composer_show_composer");if(!this._ogTaggerLoaded){e="/platform/og/composer/tagger";d=new Q(e).setData({entry_ref:this._entryPointRef}).setType(xa.DEPENDENT);d.listen("postprocess",function(){this._composerType===w.ACTIVITY&&this._ogTagger.toggleIncludedPlaceSelector(!0),q.log("og_composer_async_loaded")}.bind(this));o.ajaxify(null,null,d,null);this._ogTaggerLoaded=!0}}this._multiPhotoUploader&&a===w.PHOTO?this._showMultiPhotoUploader():this._ogTagger&&a===w.ACTIVITY&&this._ogTagger.toggleIncludedPlaceSelector(!0);this._composerType===w.EDIT&&this._observeEditChanges();l.hide(this._mainPage);l.show(this._composer);S.scrollTo(0,0);this._forsaleInterceptShown&&(l.hide(this._forsaleIntercept),this._forsaleInterceptShown=!1);U.invoke("MStructuredComposer-opened",null,{session_id:this._getSessionID(),composer_type:a,target_type:this._targetType,entry_point_ref:this._entryPointRef,opened_time:z.get(y.OPENED_AT)});u.log(x.COMPOSER_ENTRY,{composer_type:a,ref:this._entryPointRef,target_type:this._targetType});b=z.get(y.DISABLE_VOICE_SELECTOR);e=l.scry(this._form,"div","composer-actor-selector")[0];e&&(b?l.hide(e):l.show(e));d=K.get(J.LINK_NO_CHANGE);this._sharePreview&&this._shouldShowLinkPreview()&&this._composerType===w.EDIT&&d&&this._sharePreview.init();this._hasPageRecommendations()&&this._toggleSubmitButtonState(!1);this._backgroundUploadProgress=aa.init();this._backgroundUploadProgress&&(this._waitForPollingTagSuggestions=this._backgroundUploadProgress.isWaitingForTagSuggestions());return!0};e._setCompositionDataStatusText=function(a,b){Object.prototype.hasOwnProperty.call(a,N.STATUS)||(a[N.STATUS]={}),a[N.STATUS][L.TEXT]=b};e._observeEditChanges=function(){var a=this;this._hasEditChanges=!1;this._editChangesProducers.forEach(function(b){a._listeners.push(b.once("change",a._handleEditChange,a))})};e._navigateToComposerAndOpenAudioRecorder=function(a){var b=this;if(t.blockNavigateToComposer())return;this._getNavigationPolicy(w.AUDIO,a).addOnOpen(function(){l.hide(b._composer),U.invoke("MComposer:open:audio")}).addOnClose(function(){U.invoke("MComposer:close:audio")}).open()};e._navigateToComposerAndOpenFriendTagger=function(a){var b=this;if(t.blockNavigateToComposer())return;this._getNavigationPolicy(w.TAG_FRIEND,a).addOnOpen(function(){l.hide(b._composer),U.invoke("MComposer:tagger:open")}).open()};e._navigateToComposerAndShowActivitySelector=function(a){var b=this;if(t.blockNavigateToComposer())return;this._getNavigationPolicy(w.ACTIVITY,a).addOnOpen(function(){l.hide(b._composer),U.invoke("MComposer:open:activity")}).open()};e._navigateToComposerAndShowFileDialog=function(a,b){var c=this;if(t.blockNavigateToComposer())return;this._getNavigationPolicy(w.PHOTO,a).addOnOpen(function(){ta.IS_ANDROID&&c._form.offsetHeight,R.click(W("photo_input"),b)}).open()};e._navigateToComposerAndFocus=function(a,b){__p&&__p();var c=this;if(t.blockNavigateToComposer())return;this._getNavigationPolicy(a,b).addOnOpen(function(){var a=ta.IS_APPLE_WEBKIT_IOS&&ta.OS_VERSION>=7;if(!c._skipFocus()&&a&&!c._audienceAlignmentFlyout&&!c._newcomerAudienceNux&&!c._showStickyGuardrailFlyout){c._textarea.focus();a=c._getStatusText().length;c._textarea.setSelectionRange(a,a)}}).open()};e._showPrivacyEducationOnComposerOpen=function(){this._showStickyGuardrailFlyout?U.invoke("show_sticky_guardrail_flyout",null,{textarea:this._textarea}):this._newcomerAudienceNux?this._showNewcomerAudienceNux():this._audienceAlignmentFlyout&&this._showAudienceAlignmentTux()};e._showNewcomerAudienceNux=function(){this._textarea.blur(),this._newcomerAudienceNux.registerComposer(this._composer),this._newcomerAudienceNux.handleVerticalPadding(),this._newcomerAudienceNux.registerPrivacySelector(this._privacySelector),this._newcomerAudienceNux.show(),this._addNewcomerAudienceNuxListeners()};e._showAudienceAlignmentTux=function(){__p&&__p();if(this._inAudienceAlignmentPublicExp){if(!this._composerEligibleForInterstitial(T.PostParam.EVERYONE))return}else if(this._inAudienceAlignmentOnlyMeExp&&!this._composerEligibleForInterstitial(T.PostParam.ONLY_ME))return;U.invoke("MMentions:decorations:hide",null,{});S.scrollTo(0,0);this._textarea.blur();this._audienceAlignmentFlyout.registerComposer(this._composer);this._audienceAlignmentFlyout.registerPrivacySelector(this._privacySelector);this._audienceAlignmentFlyout.show();this._addAudienceAlignmentNuxListeners()};e._addNewcomerAudienceNuxListeners=function(){this._listeners.push(U.listen("MNewcomerAudienceNux:public",null,function(){this.capturePublicPrivacyRow()}.bind(this)))};e._addAudienceAlignmentNuxListeners=function(){this._listeners.push(U.listen("MPrivacyAudienceAlignment:friends",null,function(){var a=this._getSavedCustomHiddenInput();if(a){a=Qa.getURIBuilder().setString("new_post_param",T.PostParam.FRIENDS.toString()).setBool("update_icon",!0).getURI();new Q(a).send()}else this._friendsPrivacyRow=this._getPrivacyRow("value",T.PostParam.FRIENDS),U.invoke("MPrivacyComposerMenu:updatePrivacy",null,{row:this._friendsPrivacyRow})}.bind(this)))};e.setDefaultHideConfig=function(a){this._defaultHideConfig=a};e._getSavedCustomHiddenInput=function(){return Y(wa.getSavedCustomInputName(),this._root)};e._closePrivacy=function(){var a=this._getPrivacySelector();a&&a.hideMenu()};e._openPrivacy=function(){var a=this._getPrivacySelector();a&&a.showMenu()};e._removeAlbumAndPhoto=function(){var a=Y("default-album");a&&R.click(a);this._multiPhotoUploader||l.hide(W("photo_display"));this._getIsAlbumDisabled()||l.hide(W("album-button"))};e._updateSubmitButtonState=function(){__p&&__p();var a=!0;if(this._composerType===w.RECOMMENDATION){if(this._shortReviewsDisableDone){var b=P.get(this._longReviewTips).threshold,c=this._textarea.value.length,d=P.get(this._longReviewTips).force_length,e=P.get(this._longReviewTips).text_required;d&&(c!==0||e)&&c<b&&(a=!1)}if(this._starsRatableInput){d=l.find(this._starsRatableInput,"input","stars-ratable-input");(!d.value||d.value==="0")&&(a=!1)}}this._submitted&&(a=!1);if(this._photosUploading&&(!this._backgroundUploadProgress||s.composer_sharesheet_visible)){e=l.scry(this._composer,"button","submit_composer");e.forEach(function(a){l.setContent(a,X._("Preparing..."))});a=!1}else this._updatePostType(V.PUBLISHED,!1);!this._postToFeedEnabled&&!this._postToStoryEnabled&&(a=!1);C.get(A.FORMAT_ID)===B.SLIDESHOW&&!ma.get(la.IS_VALID)&&(a=!1);this._toggleSubmitButtonState(a)};e._writeRecommendation=function(a){a=P.get(a);this.captureFriendsPrivacyRow.bind(this);this._changeConfig(a[r.COMPOSITION][N.CONFIG]);this._composerType=w.RECOMMENDATION;this._recommendationData=babelHelpers["extends"]({},a);t.invoke(new ha(a[r.COMPOSITION]))};e._changeSettingsAfterOpen=function(){this._composerType===w.RECOMMENDATION&&this._setupRecommendationAfterOpen()};e._getRecommendationSurface=function(){var a=z.get(y.LOGGING_SURFACE);return!a?"none":a};e._setupRecommendationAfterOpen=function(){__p&&__p();var a=this._recommendationData;h.log("ReviewProductionLoggerConfig",{event:"composer_open",page_id:a.pageid,surface:this._getRecommendationSurface()});this._friendsInputController.setVisible(!1);l.show(this._starsRatableInput);this._pageInfo&&(a.pageinfo?(l.show(this._pageInfo),l.setContent(this._pageInfo,a.pageinfo)):l.hide(this._pageInfo));this._ratingTextContainer&&a.zeroratingtext&&(this._ratingTextContainer.textContent=a.zeroratingtext);this._reviewLength=-1;(this._longReviewTips&&this._longReviewTips.children.length||this._longReviewTips&&P.get(this._longReviewTips).text_required)&&(l.show(this._longReviewTips),this._updateLongReviewTipText());a.viewerrating=a.viewerrating||0;U.invoke("MPagesStarsRatableBase-setStars",null,{rating:a.viewerrating});this._starPicker&&!a.viewerrating&&(l.hide(this._starsRatableInput),this._starPicker.setTitle(a.starpickertitle));this._updateSubmitButtonState();this._hasStartedTyping=!1;this._listeners.push(U._listen("keyup","composer-textarea",function(b){this._hasStartedTyping||h.log("ReviewProductionLoggerConfig",{event:"review_composer_started_typing",page_id:a.pageid,surface:this._getRecommendationSurface()}),this._hasStartedTyping=!0}.bind(this)),U.listen("click","privacy-button",function(a){h.log("ReviewProductionLoggerConfig",{event:"review_composer_privacy_selector_click",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()})}.bind(this)),U.listen("click","submit_composer",function(a){h.log("ReviewProductionLoggerConfig",{event:"composer_done_button_click",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()})}.bind(this)));this.currentNavigationPolicy().addOnCloseByBrowser(function(b){h.log("ReviewProductionLoggerConfig",{event:"composer_cancel",page_id:a.page_id,surface:b})}.bind(this,this._getRecommendationSurface()))};e._updateLongReviewTipText=function(){__p&&__p();if(this._longReviewTips&&this._longReviewTips.children.length){var a=this._textarea.value.length;if(this._reviewLength===a)return;this._reviewLength=a;var b=P.get(this._longReviewTips).threshold,c=P.get(this._longReviewTips).force_length;if(c){c=l.find(this._longReviewTips,"span","composer-review-length-count");var d=X._("{character_count}\/{minimum_length} \u00b7",[X._param("character_count",a),X._param("minimum_length",b)]);b!==1&&l.setContent(c,d+" ");this._updateSubmitButtonState()}c=l.find(this._longReviewTips,"span","composer-short-review");i.conditionShow(c,(a>0||P.get(this._longReviewTips).text_required)&&a<b);d=l.find(this._longReviewTips,"span","composer-long-review");i.conditionShow(d,a>=b)}};e._resetAlbumSelection=function(){this._getIsAlbumDisabled()||i.conditionClass(W("album-button"),"active",!1),this._privacySelector&&l.show(this._privacySelector),W("album_fbid").value="0",W("album_privacy").value="",this._albumChosen=!1,this._albumPicker.resetAlbumSelection()};e._resetPosition=function(){var a=this;if(this._showLoadingIndicator||this._backgroundUploadRunning)return;this.getScrollToElem()&&this.getShouldScroll()&&ab(function(){var b=Y(a.getScrollToElem());b&&S.scrollToNodeWithOffset(b,-5)},0)};e._shouldSubmit=function(){return!y.DISABLE_SUBMIT_REQUEST?!0:!z.get(y.DISABLE_SUBMIT_REQUEST,!1)};e._shouldSyncSubmit=function(){if(this._forceAsync||this._backgroundUploadRunning)return!1;return this._syncSubmit?!0:this._isPageCheckin||this._hasPhotos()||this._isUnpublishedPost};e._shouldShowLinkPreview=function(){var a=z.get(y.DISABLE_LINK);return!a&&this._composerType!==w.SHARE&&(this._composerType===w.ACTIVITY||this._composerType===w.PHOTO||this._composerType===w.CHECKIN||this._composerType===w.STATUS||this._composerType===w.EDIT)&&!this._hasPhoto};e._shouldPostStatus=function(){__p&&__p();if(!K.isEmpty())return!0;var a=l.convertFormToDictionary(this._form),b=$(a.status)!=="",c=$(a.message)!=="",d=$(a.recommendation)!=="";b=b||c||d;c=a.rating!=="0";d=this._friendsInputController.hasTokens();a=this._ogInputController&&this._ogInputController.hasValue();a=this._hasPhotos()||a;var e=!I.isEmpty()||this._isPageCheckin||this._pinPlace;return b||a||e||d||c?!0:!1};e._scheduledInFuture=function(){var a=this._schedulePostAMPM.value=="PM"||this._schedulePostAMPM.value==1?12:0;a=new Date(this._schedulePostYear.value,this._schedulePostMonth.value-1,this._schedulePostDay.value,parseInt(this._schedulePostHour.value,10)+a,this._schedulePostMinute.value,0,0);a=k.fromDate(a,Ja.getEnvironmentTimezoneID());var b=k.localNow(),c=b.addMinutes(10);b=b.addMonths(6);return a>=c&&a<=b};e._shouldEditStatus=function(){return this._hasEditChanges};e._cleanupForsaleIntercept=function(){var a=l.scry(this._form,"input","composer_attachment_sell_currency")[0];a&&this._form.removeChild(a);a=l.scry(this._form,"input","composer_attachment_sell_price")[0];a&&this._form.removeChild(a);a=l.scry(this._form,"input","composer_attachment_sell_title")[0];a&&this._form.removeChild(a)};e._validateNonEmpty=function(a){__p&&__p();if(this._composerType===w.GROUP_SELL)return this._isValidForSalePost();if(this._hasPageRecommendations())return this._isValidPageRecommendationPost(a);if(!this._shouldPostStatus()){a===""&&this._setStatusText("");this._showError(X._("Please add content to your status before posting"));return!1}return!0};e._isValidPageRecommendationPost=function(a){var b=Fa.min_char;if(a.length<b){this._showError(X._("Posts must be at least {min character} characters",[X._param("min character",b)]));return!1}return!0};e._isValidForSalePost=function(){__p&&__p();if(this._composerType!==w.GROUP_SELL)return!0;var a=l.convertFormToDictionary(this._form),b=a.composer_attachment_sell_price,c=a.composer_attachment_sell_title,d=a.has_categories_enabled==="true",e=a.composer_attachment_sell_category,f=a.location_type==="inline";a=a.composer_attachment_sell_pickup_note;if($(c)===""){this._showError(X._("Please add a title to your product"));return!1}if($(c).length>fb){this._showError(X._("Your title must be shorter than 100 characters"));return!1}if($(b)===""){this._showError(X._("Please add a price to your product"));return!1}if(f&&a.length<5){this._showError(X._("Please enter a valid location to your product"));return!1}if(d&&$(e)===""){this._showError(X._("Please select a category for your product"));return!1}return!0};e._postForSale=function(){__p&&__p();var a=$(this._getStatusText()),b=l.scry(this._forsaleIntercept,"input","sell-composer-currency-symbol")[0];if(!this._validateNonEmpty(a)||!b)return;a=ra.parseInterceptedPrices(a,b.value);if(a===null||a.length!==1)return;b=document.createElement("input");b.type="hidden";b.name="composer_attachment_sell_currency";b.setAttribute("data-sigil","composer_attachment_sell_currency");b.value=l.find(this._forsaleIntercept,"input","sell-composer-currency").value;this._form.appendChild(b);b=document.createElement("input");b.type="hidden";b.name="composer_attachment_sell_price";b.setAttribute("data-sigil","composer_attachment_sell_price");b.value=a[0];this._form.appendChild(b);a=document.createElement("input");a.type="hidden";a.name="composer_attachment_sell_title";a.setAttribute("data-sigil","composer_attachment_sell_title");a.value=$(this._getStatusText());this._form.appendChild(a);this._submitted=!0;this._updateSubmitButtonState();m.logComposerInterceptAccepted(this._groupID,1);this._callSubmit()};e._callSubmit=function(){var a=this._multiPhotoUploader&&this._multiPhotoUploader.hasPhotos(this._backgroundUploadProgress);this._backgroundUploadProgress?(a&&this._multiPhotoUploader.logClientPost(),this._submitToBackground()):a?this._multiPhotoUploader.logClientPost(this._submit.bind(this)):this._submit()};e._showForsaleIntercept=function(a){__p&&__p();if(!this._forsaleIntercept)return!1;if(this._forsaleInterceptShown){this._forsaleInterceptDeclinedTimestamp=Date.now();this._cleanupForsaleIntercept();m.logComposerInterceptDeclined(this._groupID,1);return!1}if(this._forsaleInterceptDeclinedTimestamp>0&&Date.now()-this._forsaleInterceptDeclinedTimestamp<eb)return!1;else this._forsaleInterceptDeclinedTimestamp=0;var b=l.scry(this._forsaleIntercept,"input","sell-composer-currency-symbol")[0];if(!b)return!1;a=ra.parseInterceptedPrices(a,b.value);if(a!==null&&a.length===1){l.show(this._forsaleIntercept);this._forsaleInterceptShown=!0;m.logComposerInterceptCreated(this._groupID,1);return!0}else{this._cleanupForsaleIntercept();return!1}};e._pickDestination=function(){s.composer_sharesheet_visible?(this._postToStoryEnabled&&this._postToStory(),this._postToFeedEnabled?this._confirmClicked():window.location.reload()):this._confirmClicked()};e._confirmClicked=function(){__p&&__p();var b=$(this._getStatusText());if(!this._validateNonEmpty(b))return;if(this._showForsaleIntercept(b))return;if(this._postTypeInput.value==V.SCHEDULED&&!this._scheduledInFuture()){this._showError(X._("Scheduled posts need to be shared between 10 minutes and 6 months from when you create them."));return}this._hasPageRecommendations()&&(this._addHiddenInput(this._form,"page_recommendation_type",this._getPageRecommendationType()),this._addHiddenInput(this._form,"page_recommendation_entrypoint",this._getPageRecommendationeEntryPoint()),this._addHiddenInput(this._form,"page_recommendation_surface",this._getPageRecommendationSurface()));this._tagSuggestionsController&&this._tagSuggestionsController.setBackgroundPolling(!0);this._mentionsEnabled||U.invoke("MComposerStatusTextarea:flush",null,{value:this._textarea.value,hasMentions:this._mentionsEnabled});if(!this._albumChosen){b=this._getPrivacySelector();if(b&&b.getSelectedValue()==T.PostParam.ONLY_ME){b=Sa.getURIBuilder().setString("type",Ga.ONLY_ME_IMPRESSION).getURI();o.ajaxify(null,null,new Q(b));var c=this._friendsInputController.hasTokens()||this._hasMentions;if(!c&&!window.confirm(X._("Only you will be able to see this post. Click 'Cancel' to change your audience."))){this._onlyMeFlyoutShown=!0;return}}else this._onlyMeFlyoutShown&&(b=Sa.getURIBuilder().setString("type",Ga.ONLY_ME_CONVERSION).getURI(),o.ajaxify(null,null,new Q(b)))}this._onlyMeFlyoutShown=!1;c=this._ogInputController&&this._ogInputController.getLoggingData();c&&q.log("og_composer_action_created",void 0,c);this._submitted=!0;this._updateSubmitButtonState();if(this._composerType===w.RECOMMENDATION&&(this._longReviewTips&&this._longReviewTips.children.length)){b=P.get(this._longReviewTips).threshold;c=this._textarea.value.length;var d=P.get(this._longReviewTips).force_length,e=P.get(this._longReviewTips).text_required;if(d&&(c!==0||e)&&c<b){if(this._shortReviewsDisableDone)return;d=X._("Your review must be at least {min_length} characters. Do you want to submit your star rating without your review?",[X._param("min_length",b)]);if(!a.confirm(d)){this._submitted=!1;this._updateSubmitButtonState();return}U.invoke("MComposerStatusTextarea:flush",null,{value:"",hasMentions:this._mentionsEnabled})}}u.log(x.COMPOSER_POST,{loaded_time:z.get(y.OPENED_AT),targetId:this._form.target.value||j.getID()});C.get(A.FORMAT_ID)===B.SLIDESHOW&&ga.log(Ia.SLIDESHOW_POST);this._callSubmit()};e._postToStory=function(){__p&&__p();var a=$(this._getStatusText()),b=K.get(J.SHARE_URI)!==null;if(!this._hasPhotos()&&a===""&&!b){a="There must be photos uploaded to the composer or text in order to successfully post to stories.";throw a}b=Oa.getURI({controller:Ta,docID:"1931212663571278"});a=this._formPostToStoryDataObject();var c=ba.isStoryPostEligible(this._isExternalLinkPreview);if(c){c=new Pa().setURI(b).setMethod("POST").setData({variables:JSON.stringify({client_mutation_id:bb(),actor_id:this._form.target.value,input:a})}).setPayloadHandler(function(){ya.uploadCB(!0)}).setErrorHandler(function(a){za.showDefaultToast(Aa.UPLOAD_FAILED),ya.uploadCB(!1)});c.send()}};e._formPostToStoryDataObject=function(){__p&&__p();var a={actor_id:this._form.target.value,client_mutation_id:bb(),source:"MOBILE",logging:{composer_session_id:this._getSessionID(),ref:"mcomposer"},camera_post_context:{deduplication_id:this._getSessionID(),source:"composer"},audiences:[{stories:{self:{target_id:this._form.target.value}}}]},b=$(this._getStatusText());b!==""&&ba.isTextEligible(b)&&(a.message={text:b});b=H.get(G.PHOTO_INFO_LIST,null);if(b!==null){var c=[],d=!1;b.forEach(function(a){a.type==="photo"?c.push({photo:{id:a.fbid}}):a.type==="video"&&(d=!0,c.push({video:{id:a.fbid,notify_when_processed:!0}}))});a.attachments=c;d&&(a.web_graphml_migration_params={is_also_posting_video_to_feed:this._postToFeedEnabled})}b=oa.get(na.TOKENS);if(b!==null){var e=[];b.forEach(function(a){e.push(a.id)});a.with_tags_ids=e}b=I.get(ja.ID);b!==null&&(a.explicit_place_id=b);if(this._ogInputController&&this._ogInputController.hasValue()){b={};var f=ia.get(D.ACTION_TYPE_ID);f&&(b.taggable_activity_id=f);f=ia.get(D.OBJECT_ID);f&&(b.object_id=f);a.inline_activities=[b]}this._textFormatPresetId&&(a.text_format_preset_id=this._textFormatPresetId);f=this._getLinkPreviewInformation();f&&(a.attachments===void 0?a.attachments=[{link:{share_scrape_data:JSON.stringify(f)}}]:a.attachments.push({link:{share_scrape_data:JSON.stringify(f)}}));return a};e._getLinkPreviewInformation=function(){__p&&__p();var a=K.get(J.SHARE_URI)!==null;if(!Za("676786")||!a||!this._isExternalLinkPreview)return null;a={};var b=l.scry(this._form,"input","attachment[type]");a.share_type=b.length>0?b[0].value:null;b={};b.urlInfo={};var c=l.scry(this._form,"input","attachment[params][urlInfo][canonical]");b.urlInfo.canonical=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][urlInfo][final]");b.urlInfo["final"]=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][urlInfo][user]");b.urlInfo.user=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][locale]");b.locale=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][favicon]");b.favicon=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][lang]");b.lang=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][external_author_id]");b.external_author_id=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][title]");b.title=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][summary]");b.summary=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][medium]");b.medium=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][url]");b.url=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][global_share_id]");b.global_share_id=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][url_scrape_id]");b.url_scrape_id=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][hmac]");b.hmac=c.length>0?c[0].value:null;c=l.scry(this._form,"input","attachment[params][external_img]");b.external_img=c.length>0?c[0].value:null;a.share_params=b;a.shared_from_post_id=null;return a};e._toggleShareSelections=function(a){this._postToFeedEnabled=a.getData().postToFeed,this._postToStoryEnabled=a.getData().postToStory,this._updateSubmitButtonState()};e._setTextFormatPresetId=function(a){a&&a.presetID?this._textFormatPresetId=a.presetID:this._textFormatPresetId=null};e._showError=function(a){l.show(this._error_btn),l.setContent(this._error_btn,a)};e._getAsyncContainer=function(){return document.getElementById("structured_composer_async_container")||(this._clickedButton?this._clickedButton.parentNode:null)};e._getSessionID=function(){return z.get(y.SESSION_ID,null)};e._getStatusText=function(){return M.get(L.TEXT,"")};e._setStatusText=function(a){var b={};b[L.TEXT]=a;O.statusUpdate(b)};e._addHiddenInput=function(a,b,c){var d=document.createElement("input");d.type="hidden";d.name=b;d.value=c;a.appendChild(d)};e._hasPageRecommendations=function(){return this._getPageID()!==""&&this._getPageRecommendationType()!==""};e._getPageID=function(){return F.get(E.PAGE_ID,"")};e._getPageRecommendationType=function(){return F.get(E.RECOMMENDATION_TYPE,"")};e._getPageRecommendationSurface=function(){return F.get(E.SURFACE,"")};e._getPageRecommendationeEntryPoint=function(){return F.get(E.ENTRY_POINT,"")};e._submitToBackground=function(){var a=this;this.cleanupSoftState();this._closeComposer();this._showLoadingIndicator=!1;this._setBackgroundUploadRunning(!0);this._multiPhotoUploader.hasPendingPhotos()?this._bgUploadWaitForMediaListener=U.listen("MMultiPhotoUploader:attachments:change",null,function(b){b=b.getData();b.sending===0&&(!a._waitForPollingTagSuggestions||b.polling===0)&&(U.removeCurrentListener(),setTimeout(function(){return a._submit()},0))}):this._submit()};e._submit=function(){__p&&__p();if(!this._shouldSubmit()){this._submitNoRequest();return}this._tagSuggestionsController&&this._tagSuggestionsController.generateHiddenInput(this._xyTagsInput);U.invoke("MComposer:submit");if(this._shouldSyncSubmit()){this._submitSyncRequest();this._cleanupForsaleIntercept();return}this._submitAsyncRequest();this._cleanupForsaleIntercept()};e._getWithTagCount=function(){var a=oa.get(na.TOKENS);return a?a.length:0};e._getXYTagCount=function(){return!this._tagSuggestionsController?0:this._tagSuggestionsController.getNumXYTags()};e._getTagsUser=function(){return this._numMentions};e._scrollToTopOfFeedAfterNextTransition=function(){if(!v.USE_PUSH_STATE)return;U.listen("m:history:change",null,function(){setTimeout(function(){var a=Y("tlFeed");a&&S.scrollToNodeWithOffset(a,-50)},10),U.removeCurrentListener()})};e._submitAsyncRequest=function(){__p&&__p();var a=this,b=l.convertFormToDictionary(this._form),c={};c.hasPhoto=this._hasPhotos();c.hasVideo=this._hasVideos();c.xy_tag_count=this._getXYTagCount();c.with_tag_count=this._getWithTagCount();c.tags_user=this._getTagsUser();c=[new ca(this._getSessionID(),c)];this._backgroundUploadRunning||c.push({postprocess:function(){a.cleanupSoftState()}});this._showLoadingIndicator&&(c.push({response:function(){a._submittingScreen?l.hide(a._submittingScreen):n.hide(),a._navigateAwayFromComposer(b),a._showLoadingIndicator||a._resetPosition()}}),this._submittingScreen?l.show(this._submittingScreen):n.show(!0));this._backgroundUploadRunning||c.push({response:function(){return a._scrollToTopOfFeedAfterNextTransition()}});var d=l.scry(this._form,"input","background_upload")[0];d&&(d.value=this._backgroundUploadRunning?"1":"");this._backgroundUploadRunning&&c.push({error:function(){a._setBackgroundUploadRunning(!1,!0)},"finally":function(){ab(function(){a._setBackgroundUploadRunning(!1)},1e3),a._navigateAwayFromComposer(b)}});d=this._hasPhotos()?"media":"text";o.form(null,this._form,"async_composer",p.CACHE,this._getAsyncContainer(),!1,c,"composer_async_post_"+d,!0);this._staticTemplates.style.height="";if(this._submittingScreen||this._backgroundUploadRunning)return;this._navigateAwayFromComposer(b);this._showLoadingIndicator||this._resetPosition()};e._submitNoRequest=function(){this._staticTemplates.style.height="",this._navigateAwayFromComposer(l.convertFormToDictionary(this._form))};e._submitSyncRequest=function(){this._form.submit(),this._resetPosition()};e._setBackgroundUploadRunning=function(a,b){b===void 0&&(b=!1);this._backgroundUploadRunning=a;this.hasNavigationPolicy()&&this.currentNavigationPolicy().setBackgroundUploadRunning(a);if(b)this._backgroundUploadProgress.showErrorMsg();else{b=this._multiPhotoUploader.getMediaCount()>0;this._backgroundUploadProgress.setBackgroundUploadRunning(a,b)}};e._getIsAlbumDisabled=function(){return!this._albumPicker||z.get(y.DISABLE_ALBUM,this._defaultHideConfig[y.DISABLE_ALBUM])};e._getIsSlideshowDisabled=function(){return!this._slideshowToggle||z.get(y.DISABLE_SLIDESHOW,this._defaultHideConfig[y.DISABLE_SLIDESHOW])};e._updateButtonVisibility=function(a,b,c){a=l.scry(this._form,"button",a)[0];if(a){b=!!z.get(b,this._defaultHideConfig[b]);i.conditionShow(a,c?!b:b)}};e._handlePhotoUpdate=function(){var a=H.get(G.PHOTO_INFO_LIST,null);this._multiPhotoUploader&&a&&a.length>0?(this._uploadButtons.audioButton&&l.hide(this._uploadButtons.audioButton),this._multiPhotoUploader.getUploader().component.setAttachmentsSilent(a),this._showMultiPhotoUploader()):this._uploadButtons.audioButton&&l.show(this._uploadButtons.audioButton)};e._updateSlideshowUIState=function(){var a=C.get(A.FORMAT_ID,null),b=ma.get(la.IS_VALID,!1),c=H.get(G.PHOTO_INFO_LIST,[]).length;this._slideshowInput&&(this._slideshowInput.value=!this._getIsSlideshowDisabled()&&b&&a===B.SLIDESHOW?"1":"0");this._slideshowNoticePhotoMax&&i.conditionShow(this._slideshowNoticePhotoMax,a===B.SLIDESHOW&&c>Ha.max_photo_num);this._slideshowNoticePhotoMin&&i.conditionShow(this._slideshowNoticePhotoMin,a===B.SLIDESHOW&&c<Ha.min_photo_num);this._getIsSlideshowDisabled()?this._slideshowToggle&&i.hide(this._slideshowToggle):c>=Ha.min_photo_num&&(this._slideshowToggle&&i.show(this._slideshowToggle),this._slideshowNUX&&this._slideshowNUX.showIfNotShown())};e._handleFormatUpdate=function(){__p&&__p();var a=C.get(A.FORMAT_ID,null),b=C.get(A.PREVIOUS_FORMAT_ID,null);this._updateSlideshowUIState();this._updateSubmitButtonState();this._slideshowPreviewButton&&i.conditionShow(this._slideshowPreviewButton,a===B.SLIDESHOW);this._submitButtonNodes!==null&&this._submitButtonNodes.forEach(function(b){i.conditionShow(b,a!==B.SLIDESHOW)});this._slideshowToggleOptions!==null&&(this._slideshowToggleOptions.find(function(b){return b.value===(a||B.PHOTO)}).checked=!0);if(!a||a===b)return;H.get(G.PHOTO_INFO_LIST,[]).length;a===B.SLIDESHOW?ga.log(Ia.SLIDESHOW_INTENT):b===B.SLIDESHOW&&ga.log(Ia.SLIDESHOW_CANCEL)};e._handleSlideshowUpdate=function(){this._updateSlideshowUIState()};e._handleSlideshowToggleUpdate=function(a){var b;if(this._getIsSlideshowDisabled())return;a=this._slideshowToggleOptions.find(function(a){return a.checked}).value;O.formatUpdate((b={},b[A.FORMAT_ID]=a,b))};e._handleConfigUpdate=function(){__p&&__p();this._form.action=z.get(y.ACTION);this._composerTitle.textContent=z.get(y.COMPOSER_TITLE);if(this._photoAction){var a=z.get(y.ACTOR_ID);(this._canRemoveActorVC||a!==null&&a!==void 0)&&(this._photoAction=g.create(this._photoAction,a).toString())}this._updateButtonVisibility("photo-button",y.DISABLE_PHOTOS,!0);this._updateButtonVisibility("with-button",y.DISABLE_PEOPLE_TAGS,!0);this._updateButtonVisibility("og-button",y.DISABLE_OG_TAG,!(this._ogTagger===void 0));this._updateButtonVisibility("privacy-button",y.DISABLE_PRIVACY,!0);this._updateButtonVisibility("post-type-button",y.SHOW_POST_TYPE_SELECTOR,!1);z.get(y.SHOW_POST_TYPE_SELECTOR)||(U.invoke("MStructuredComposerPostTypeInput::setPublishNow"),this._updatePostType(V.PUBLISHED,!1));this._updateHiddenForm("target",y.TARGET_ID);z.get(y.DISABLE_MENTIONS,!1)?(U.invoke("MMentions:disable"),this._mentionsEnabled=!1):(U.invoke("MMentions:enable"),this._mentionsEnabled=!0);a=this._ogInputController&&this._ogInputController.hasValue();a&&this._ogInputController.setDisableOgTagPreview(z.get(y.DISABLE_OG_TAG_PREVIEW,!1));a=z.get(y.PLACEHOLDER);a&&this._setPlaceholder(a);a=document.getElementById("composer_album_info");if(a){var b=z.get(y.DISABLE_ALBUM_INFO,this._defaultHideConfig[y.DISABLE_ALBUM_INFO]);b?(i.hide(a),W("album_fbid").value="0"):(i.show(a),W("album_fbid").value=this._albumID)}this._updateSlideshowUIState()};e._updateHiddenForm=function(a,b){a=l.scry(this._form,"input",a)[0];a&&(a.value=z.get(b))};e._handleStatusUpdate=function(){this._updateLongReviewTipText(),this._updateShareScraper(),this._handlePageRecommendationsMinChar()};e._handlePageRecommendationsMinChar=function(){if(!this._hasPageRecommendations())return;var a=M.get(L.TEXT,""),b=a.length>=Fa.min_char;!b?this._contextualMessage.textContent=X._("{current length} \/ {required length} \u00b7 Posts must be at least {required length} characters",[X._param("current length",a.length),X._param("required length",Fa.min_char)]):this._contextualMessage.textContent=this._placeholder.textContent;i.show(this._contextualMessage);this._toggleSubmitButtonState(b)};e._logWritten=function(){if(this._getStatusText().trim()<db)return;u.log(x.COMPOSER_WRITTEN,{publish_target:this._form.target.value||j.getID(),loaded_time:z.get(y.OPENED_AT),written_time:Date.now()});this._cleanupLogWritten()};e._cleanupLogWritten=function(){if(!this._logWrittenListener)return;this._logWrittenListener.remove();this._logWrittenListener=null};e._getFormInput=function(){return l.scry(this._form,"input","mentionsHiddenInput")[0]||this._textarea};e._saveConfig=function(){var a=this._getFormInput();this._defaultConfig={action:this._form.action,targetid:this._form.target.value,inputname:a.name,placeholder:this._placeholder?this._placeholder.textContent:this._textarea.placeholder,composertitle:this._composerTitle.textContent,pinplace:this._pinPlace,forceasync:this._forceAsync};this._defaultConfig[y.BUTTON_TEXT_SUBMIT]=this._submitButtonNodes[0].textContent};e._changeConfig=function(a){var b=this._getFormInput();this._form.action=a.action;this._form.target&&(this._form.target.value=a.targetid);this._setPlaceholder(a.placeholder);this._composerTitle.textContent=a.composertitle;this._pinPlace=a.pinplace;this._forceAsync=a.forceasync;b.name=a.inputname;this._showPostTypeSelectionFlow=a.showposttypeselector};e._extendComposerHeight=function(){this._composer.style.display!=="none"&&(this._staticTemplates.style.height=a.innerHeight+"px")};e.setPrivacySelector=function(a){this._privacySelector=a};e._getPrivacySelector=function(){return this._privacySelector&&wa.getInstance(this._privacySelector)};e._updateShareScraper=function(){__p&&__p();if(!this._shouldShowLinkPreview())return;if(K.get(J.LINK_NO_CHANGE))return;var a=La.permissiveMatch(this._getStatusText()),b=K.get(J.DISABLED_LINKS),c=K.get(J.SHARE_URI);if(a!==c&&(!b||!b[a])){if(this._multiPhotoUploader){b=this._multiPhotoUploader.getUploader().component.getAttachmentCount();if(b===0)this._multiPhotoUploader.resetState();else return}if(a&&c&&c.indexOf(a)!=-1||!a)return;setTimeout(function(){O.shareLinkUpdate(a),O.configDisablePhotosUpdate(!!a)},0)}};e._updatePostType=function(a,b){__p&&__p();var c=this;this._postTypeInput.value=a;var d=null;if(a===V.DRAFT)this._isUnpublishedPost=!0,d=X._("Save");else if(a===V.PUBLISHED){this._isUnpublishedPost=!1;var e=s.composer_sharesheet_visible?X._("Share"):X._(["Post","e8a6dc14f0e4bbd1991e551368111aed",1]);d=b?X._("Backdate"):e}else a===V.SCHEDULED&&(this._isUnpublishedPost=!0,d=X._("Schedule"));if(d){b=l.scry(this._composer,"button","submit_composer");b.forEach(function(a){l.setContent(a,d),c._slideshowPreviewController&&c._slideshowPreviewController.setSubmitButtonText(d)})}};e._updateSchedulePostTime=function(a){this._schedulePostYear=l.find(this._form,"input","scheduled_post_year"),this._schedulePostMonth=l.find(this._form,"input","scheduled_post_month"),this._schedulePostDay=l.find(this._form,"input","scheduled_post_day"),this._schedulePostHour=l.find(this._form,"input","scheduled_post_hour"),this._schedulePostMinute=l.find(this._form,"input","scheduled_post_minute"),this._schedulePostAMPM=l.find(this._form,"input","scheduled_post_ampm"),this._schedulePostYear.value=a.year,this._schedulePostMonth.value=a.month,this._schedulePostDay.value=a.day,this._schedulePostHour.value=a.hour,this._schedulePostMinute.value=a.minute,this._schedulePostAMPM.value=a.ampm};e._updateBackdatedPostTime=function(a){this._backdatedPostYear=l.find(this._form,"input","backdated_post_year"),this._backdatedPostMonth=l.find(this._form,"input","backdated_post_month"),this._backdatedPostDay=l.find(this._form,"input","backdated_post_day"),this._backdatedPostYear.value=a.year,this._backdatedPostMonth.value=a.month,this._backdatedPostDay.value=a.day};e.setPhotoAction=function(a){a&&(this._attachPhoto=W("attach_photo"),this._photoButton=l.find(this._form,"button","photo-button"));this._photoAction=a;return this};e.setKeyboardStateDown=function(){};e.setLongReviewTips=function(a){this._longReviewTips=a};e.setShortReviewsDisableDone=function(a){this._shortReviewsDisableDone=a};e.setSlideshowPreview=function(a){this._slideshowPreview=a,this._slideshowPreviewButton=l.find(this._composer,"button","show_slideshow_preview"),this._slideshowPreviewController=new Da(this._slideshowPreview,this._slideshowPreviewButton)};e.setSlideshowNUX=function(a){this._slideshowNUX=a};e._determineFormAction=function(){this._hasPhotos()&&this._photoAction!==""?this._form.action=this._photoAction:this._form.action=z.get(y.ACTION)||this._defaultAction};e._determineMultiPhotoComposerState=function(){if(!this._multiPhotoUploader)return;this._photoButton&&i.conditionClass(this._photoButton,"active",this._hasPhotos());if(!this._getIsAlbumDisabled()){var a=C.get(A.FORMAT_ID,null);i.conditionShow(W("album-button"),this._hasPhotos()&&a!==B.SLIDESHOW);!this._hasPhotos()&&this._albumChosen&&this._resetAlbumSelection()}};e._showMultiPhotoUploader=function(){if(!this._multiPhotoUploader)return;this._determineMultiPhotoComposerState();this._multiPhotoUploader.alterPreviewGrid(!0);this._getIsSlideshowDisabled()||this._multiPhotoUploader.getUploader().setProps({showDropShadow:!1})};e._hasVideos=function(){return!1};e._hasPhotos=function(){if(this._multiPhotoUploader)return this._multiPhotoUploader.hasPhotos(!!this._backgroundUploadProgress);else if(!this._getIsAlbumDisabled())return this._hasPhoto;else return this._photoOpen&&this._hasPhoto};e._pagePostClicked=function(a){if(!a)return;a=P.get(a);this._changeConfig(a);this._privacySelector&&l.hide(this._privacySelector)};e.start=function(){__p&&__p();var a=this;this._form.addEventListener("reset",function(){if(a._submittingScreen)return;a._resetComposer()});this._listeners.push(U.listen("MComposer:entry:js",null,function(b){var c=b.getData();a._onComposerCancel=c[r.ON_CANCEL];a._onComposerSubmit=c[r.ON_SUBMIT];c[r.ON_OPEN]===w.PHOTO?a._navigateToComposerAndShowFileDialog(c):c[r.ON_OPEN]===w.AUDIO?a._navigateToComposerAndOpenAudioRecorder(c,b):c[r.ON_OPEN]===w.CHECKIN?a._navigateToComposerAndCheckin(c,b):c[r.ON_OPEN]===w.ACTIVITY?a._navigateToComposerAndShowActivitySelector(c,b):c[r.ON_OPEN]===w.TAG_FRIEND?a._navigateToComposerAndOpenFriendTagger(c,b):a._navigateToComposerAndFocus(w.STATUS,c);a._changeSettingsAfterOpen();a._showPrivacyEducationOnComposerOpen()}));this._starsRatableInput&&(this._listeners.push(U.listen("MPagesStarsRatableBase-starsSet",null,this._updateSubmitButtonState.bind(this))),this._listeners.push(U.listen("MPagesStarsRatableBase-starTapped",null,function(a){h.log("ReviewProductionLoggerConfig",{event:"composer_star_click",page_id:this._recommendationData.pageid,star_clicked:a.getData().rating,surface:this._getRecommendationSurface()})}.bind(this))));this._listen("click",fa.ENTRY_TRIGGER_LEGACY,function(b){if(Z&&Z.listenersRegistered())return;b=b.getNode(fa.ENTRY_TRIGGER_LEGACY);var c=P.get(b);c&&c.og_activity&&!c.og_activity.fbt_phrase&&(c.og_activity.fbt_phrase=a._ogTagger._getTagPhrase(c.og_activity.action_type,c.og_activity.icon,c.og_activity.object_str,c.og_activity.object_id,c.og_activity.location_str));a._navigateToComposerAndFocus(w.STATUS,c);a._showPrivacyEducationOnComposerOpen();a._clickedButton=b});if(Ma.isBrowser("Mobile Safari < 8")){var b=!0;this._listen("click","cancel_composer",function(c){b?(b=!1,setTimeout(function(){R.click(c.getTarget(),c)},0)):(b=!0,a._navigateAwayFromComposerAndCancel())})}else this._listen("click","cancel_composer",this._navigateAwayFromComposerAndCancel.bind(this));this._listen("click","submit_composer",this._pickDestination.bind(this));this._listen("click","forsale_intercept_nonforsale",this._confirmClicked.bind(this));this._listen("click","forsale_intercept_forsale",this._postForSale.bind(this));this._listen("m:viewport:scroll-to-header",null,this._extendComposerHeight.bind(this));this._listen("click","checkin_link",function(a){if(Z&&Z.listenersRegistered())return;this._clickedButton=a.getNode("checkin_link");this._navigateToComposerAndCheckin();a.prevent()}.bind(this));this._listeners.push(U.listen("MComposer:close:activity",null,function(){a._stayHiddenUntilOGTaggerCloses=!1,l.show(a._composer)}),U.listen("cancel","MComposer:dialog:place",function(){return a._navigateAwayFromComposerAndCancel()}),U.listen("close","MComposer:dialog:place",function(){l.show(a._composer)}));this._listeners.push(U.listen("MComposer:post:backdate",null,function(b){a._isBackdated=l.find(a._form,"input","is_backdated"),a._isBackdated.value=b.getData().value}));this._listeners.push(U.listen("MComposer:post:draft",null,function(b){b=b.getData();a._updatePostType(b.type,b.isBackdated)}));this._listeners.push(U.listen("MComposer:post:scheduled:time",null,function(b){b=b.getData();a._updateSchedulePostTime(b)}));this._listeners.push(U.listen("MComposer:post:backdated:time",null,function(b){b=b.getData();a._updateBackdatedPostTime(b)}));this._ogTagger&&(this._listen("click","activity_link",this._navigateToComposerAndShowActivitySelector.bind(this)),this._listen("click","og_included_place_checkin",function(a){this._ogTagger.hide(),this._startCheckin()}.bind(this)),this._listeners.push(this._ogTagger.listen("cancelFromActivity",this._navigateAwayFromComposerAndCancel.bind(this))));this._listeners.push(z.addListener("change",function(){return a._handleConfigUpdate()}));this._listeners.push(H.addListener("change",function(){return a._handlePhotoUpdate()}));this._listeners.push(pa.addListener("change",function(){var b=pa.get(qa.AUDIO_POST,null);for(var c in a._uploadButtons){var d=a._uploadButtons[c];d&&(b==null?l.show(d):l.hide(d))}}));this._listeners.push(M.addChangeListener(function(){return a._handleStatusUpdate()}));this._listeners.push(C.addChangeListener(function(){return a._handleFormatUpdate()}));this._listeners.push(ma.addChangeListener(function(){return a._handleSlideshowUpdate()}));this._slideshowPreviewController&&(this._listen("change","slideshow-option",this._handleSlideshowToggleUpdate.bind(this)),this._listen("MStructuredComposerSlideshowPreview-submit",null,this._confirmClicked.bind(this)));this._listen("click","write_post_posts_by_others",function(a){this._pagePostClicked(a.getNode("write_post_posts_by_others")),a.prevent()}.bind(this));this._listen("composerPhotoLinkPostsByOthers",null,function(a){this._pagePostClicked(a.getData()),a.prevent()}.bind(this));this._listen("click","write_post_admin",function(a){this._pagePostClicked(a.getNode("write_post_admin")),a.prevent()}.bind(this));this._listen("click","page_checkin",function(a){var b=P.get(a.getNode("page_checkin"));this._isPageCheckin=!0;b[r.COMPOSITION]||(b[r.COMPOSITION]=new ha().setStoreData(N.CONFIG,cb(b,Ya(y))).setStoreData(N.PLACE,{id:b.pageid,name:b.pagename,new_place:!1}).serialize());this._photoAction&&(this._photoAction=new Ka(this._photoAction).addQueryData("target",b.targetid).toString());this._navigateToComposer(w.CHECKIN,b);this._ogTagger&&this._ogTagger.setPlaceID(b.pageid);a.prevent()}.bind(this));this._listeners.push(U.listen("MComposer-write-recommendation",null,function(a){this._writeRecommendation(a.getData().element)}.bind(this)));this._listen("click","write-recommendation",function(a){this._writeRecommendation(a.getNode("write-recommendation")),a.prevent()}.bind(this));this._listen("MStructuredComposerFriendsInput-done",null,function(){return a._updateTagExpansion()});this._listen("MStructuredComposerFriendsInput-addedAutoTags",null,function(){return a._updateTagExpansion()});this._listen("MStructuredComposerFriendsInput-addedManualXYTags",null,function(){return a._updateTagExpansion()});this._listen("MStructuredComposerFriendsInput-removedManualTags",null,function(){return a._updateTagExpansion()});this._listen("MStructuredComposerOGInput:update",null,function(){return a._updateTagExpansion()});this._listen("MMentions:change",null,function(b){b=b.getData();if(b.input!==a._textarea)return;a._hasMentions=b.hasTags;a._numMentions=b.numTags?b.numTags:0;a._updateTagExpansion()});this._listeners.push(I.addChangeListener(function(){if(I.isEmpty())return;if(a._ogTagger){var b=I.get(ja.SUGGESTED_OG_ACTION_TYPE_ID,null),c=I.get(ja.ID),d=I.get(ja.SUGGESTION_MECHANISM);a._ogTagger.setPlaceID(c);b&&!a._ogInputController.hasValue()&&(a._ogTagger.setCancelButtonText(X._("Skip")),a._ogTagger.selectActionTypeImplicitly(b)&&(l.hide(a._composer),a._stayHiddenUntilOGTaggerCloses=!0,a._ogTagger.setSuggestionMechanism(d),q.log("og_composer_implicit_verb_selected",void 0,{place_id:c,suggestion_mechanism:d}),U.invoke("MComposer:open:activity")))}}));this._listen("MAlbumPicker:createalbum:open",null,function(b){a._isCreateAlbumDialogOpen=!0});this._listen("MAlbumPicker:createalbum:close",null,function(b){a._isCreateAlbumDialogOpen=!1});this._listen("keydown","tokenizer-input",function(a){if(a.getNode("structured-composer")&&this.getShouldScroll()){a=a.getNode("tokenizer-input");a=Na.getPos(a).y;S.scrollTo(0,a)}}.bind(this));this._listen("blur","tokenizer-input",function(a){a.getNode("structured-composer")&&this.getShouldScroll()&&S.scrollToHeader()}.bind(this));this._listen("keyup","composer-textarea",this._updateLongReviewTipText.bind(this));this._listeners.push(M.addChangeListener(function(){return a._handleStatusUpdate()}));this._listen("click","photo_link",function(a){if(Z&&Z.listenersRegistered())return;var b=a.getNode("photo_link"),c=P.get(b);this.getShouldScroll()&&S.scrollToHeader();this._multiPhotoUploader?(this._getIsAlbumDisabled()||l.show(W("album-button")),this._navigateToComposerAndShowFileDialog(c,a)):(!this._getIsAlbumDisabled()?(this._navigateToComposerAndShowFileDialog(c,a),a.prevent()):(this._navigateToComposer(w.PHOTO,c),this._photoOpen=!0,l.show(this._attachPhoto),i.conditionClass(this._photoButton,"active",!0)),this._clickedButton=b,a.kill(),U.invoke("composerPhotoLink"),U.invoke("composerPhotoLinkPostsByOthers",null,a.getNode("write_post_posts_by_others")))}.bind(this));this._listen("click","add-photo-thumbnail",function(a){u.log(x.MEDIA_INTENT),R.click(W("photo_input"),a),a.prevent()});this._listen("click","photo-button",function(b){u.log(x.MEDIA_INTENT),a._multiPhotoUploader?(a._closePrivacy(),R.click(W("photo_input"),b),a._determineFormAction(),a._showMultiPhotoUploader()):!a._getIsAlbumDisabled()?(R.click(W("photo_input"),b),b.prevent()):(a._closePrivacy(),a._photoOpen?l.hide(a._attachPhoto):l.show(a._attachPhoto),a._photoOpen=!a._photoOpen,i.conditionClass(a._photoButton,"active",a._photoOpen))});this._listen("click","video-button",function(b){u.log(x.MEDIA_INTENT),a._multiPhotoUploader&&(a._closePrivacy(),R.click(W("video_input"),b),a._determineFormAction(),a._showMultiPhotoUploader())});this._getIsAlbumDisabled()||(this._listeners.push(this._albumPicker.listen("cancel",function(a){u.log(x.ALBUM_CANCEL),this._restoreComposer()}.bind(this))),this._listeners.push(this._albumPicker.listen("choose-album",function(a){a.is_mobile_uploads_album?this._resetAlbumSelection():(U.invoke("MStructuredComposer-selectAlbum"),u.log(x.ALBUM_ADD),W("album_fbid").value=a.album_id,W("album_privacy").value=a.privacy_id,this._albumChosen=!0,this._closePrivacy(),this._privacySelector&&l.hide(this._privacySelector)),l.show(this._composer)}.bind(this))),this._listen("click","album-button",function(a){u.log(x.ALBUM_INTENT),this._albumPicker.show(),l.hide(this._composer)}.bind(this)));this._listen("MMultiPhotoUploader:attachments:add",null,function(a){z.isEmpty()||u.log(x.PHOTO_ADD,a.getData())});this._listen("MMultiPhotoUploader:attachments:remove",null,function(a){z.isEmpty()||u.log(x.PHOTO_REMOVE,a.getData())});this._listen("change","photo-input",function(a){var b;a=W("photo_input");a.value!==""&&this._photoAction!==""?(this._multiPhotoUploader||(b={photo_count:1},U.invoke("MStructuredComposer-addedPhoto",null,b)),a.name="file1",this._hasPhoto=!0,this._determineFormAction(),this._photoButton&&i.conditionClass(this._photoButton,"active",!0),this._getIsAlbumDisabled()||(this._multiPhotoUploader||l.show(W("photo_display")),l.show(W("album-button")))):(this._hasPhoto=!1,this._determineFormAction(),i.conditionClass(this._photoButton,"active",!1),this._multiPhotoUploader||(b={photo_count:0},U.invoke("MStructuredComposer-addedPhoto",null,b)),!this._getIsAlbumDisabled()&&!this._multiPhotoUploader&&this._removeAlbumAndPhoto())}.bind(this));this._listen("multi-photos-attachment-change",null,function(a){__p&&__p();a=a.getData();if(this._multiPhotoUploader.getUploader().component!==a.multiPhotoUploader)return;a=a.attachments;var b=pa.get(qa.AUDIO_POST,null);if(b){b={};b[qa.AUDIO_POST]=a[0];O.audioUpdate(b);return}if(a.length>0&&a[0].type===va.AUDIO){b={};b[qa.AUDIO_POST]=a[0];O.audioUpdate(b);return}b=H.get(G.PHOTO_INFO_LIST,[]);if(!Ua(a,b)){b={};b[G.PHOTO_INFO_LIST]=a;O.photoUpdate(b)}}.bind(this));this._listen("multi-photos-change",null,function(a){if(a.getData().input_id!="photo_input")return;a=this._multiPhotoUploader.getUploadedMediaCount();var b={photo_count:a,is_multi_photo_upload:!0};U.invoke("MStructuredComposer-addedPhoto",null,b);this._photosPreviewNux&&(a>0?(this._multiPhotoUploader.getUploader().setProps({showDropShadow:!1}),l.show(this._photosPreviewNux)):(this._multiPhotoUploader.getUploader().setProps({showDropShadow:!0}),l.hide(this._photosPreviewNux)));this._determineFormAction();this._determineMultiPhotoComposerState()}.bind(this));this._listen("click","composer-buttons",function(a){this._textarea.blur()}.bind(this));this._listen("focus","composer-textarea",function(a){this.getShouldScroll()&&(this._getStatusText()===""&&sa.scrollTo(this._textarea,S.getHeaderTop()))}.bind(this));this._listen("click","composer-textarea",function(a){this._closePrivacy(),this.getShouldScroll()&&(this._getStatusText()===""&&sa.scrollTo(this._textarea,S.getHeaderTop()))}.bind(this));this._listen(["m:page:loading"],null,this.cleanup.bind(this));this._listen("audience-x-opened",null,function(a){l.hide(this._composer)}.bind(this));this._listen("MMultiPhotoUploader:attachments:change",null,function(b){b=b.getData();a._photosUploading=b.sending+b.polling!==0;a._updateSubmitButtonState()});this._listen("MWebActivityUploader:received:share",null,this._navigateToComposer.bind(this,w.PHOTO));this._listen("cancel","MComposer:audio",function(){return a._navigateAwayFromComposerAndCancel()});this._listen("next","MComposer:audio",function(){l.show(a._composer)});(this._photoPreview||this._photosPreviewConfig)&&this._listen("click","structured-composer-photo-preview-done",this._hidePhotoPreviews.bind(this));U.invoke("MStructuredComposer:start");s.composer_sharesheet_visible&&(U.listen("composer:destination-picker:toggle",null,function(b){return a._toggleShareSelections(b)}),U.listen("click","display_destination_picker",this._composerHasContent),U.listen("MStructuredComposerSATP:changed",null,function(b){return a._setTextFormatPresetId(b.getData())}),U.listen("composer:destination-picker:link-preview-changed",null,function(b){return a._isExternalLinkPreview=!b.getData().isPreviewValid}));ea.register(this);return this};e._cancelComposer=function(){this._staticTemplates.style.height="",U.invoke("MStructuredComposer-canceled",null),u.log(x.COMPOSER_CANCEL,{maximum_character_count:M.get(L.LONGEST_LENGTH),loaded_time:z.get(y.OPENED_AT),publish_target:this._form.target.value||j.getID()||-1,remaining_character_count:this._getStatusText().length}),this._hasPhotos(),this._resetComposer()};e.cleanup=function(){U.invoke("MStructuredComposer:cleanup");U.invoke("MCustomPrivacy::removeListener");this._closeComposer();this._form.removeEventListener("reset",this._resetComposer,!1);for(var a=0;a<this._listeners.length;a++)this._listeners[a].remove();this._listeners=[];ea.unregister(this)};e._listen=function(a,b,c){this._listeners.push(U.listen(a,b,c))};e._isAudience=function(a){__p&&__p();var b=l.scry(this._buttonbar,"table","privacy-table")[0];if(!b){var c=this._getSavedCustomHiddenInput();return c?c.value==a:!1}c=l.scry(b,"tr","privacy-option checked")[0];if(!c)return!1;b=P.get(c);return b.value==a};e.setInAudienceAlignmentExp=function(a){this._inAudienceAlignmentPublicExp=a};e.setInAudienceAlignmentOnlyMeExp=function(a){this._inAudienceAlignmentOnlyMeExp=a};e.setAudienceAlignmentFlyout=function(a){this._audienceAlignmentFlyout=a};e._composerEligibleForInterstitial=function(a){__p&&__p();var b=this._form.target.value;if(b&&b!=j.getID())return!1;if(this._composerType!==w.STATUS)return!1;if(!this._isAudience(a))return!1;if(S.getScreenHeight()<340&&ta.IS_ANDROID){this._audienceAlignmentFlyout.deviceTooShort();return!1}return!0};e.setNewcomerAudienceNux=function(a){this._newcomerAudienceNux=a};e.setStickyGuardrailFlyout=function(a){this._showStickyGuardrailFlyout=a};e.setSharePreview=function(a){this._sharePreview=a};e.setShowLoadingIndicator=function(a){this._showLoadingIndicator=a};e.setCanRemoveActorVc=function(a){this._canRemoveActorVC=a};e.setWasAsyncLoadedWithPlaceholderComposer=function(){this._composerAsyncLoaderRoot=Y("composer-async-loader-root");if(!this._composerAsyncLoaderRoot)return;this._wasLoadedWithAsyncPlaceholderComposer=!0;this._submittingScreen=l.find(this._composerAsyncLoaderRoot,"div","composer-submitting")};e.copyPlaceholderComposerFormTextAndFocus=function(a){var b=l.scry(this._composerAsyncLoaderRoot,"form","composer-placeholder-form"),c=l.scry(this._composerAsyncLoaderRoot,"textarea","composer-placeholder-textarea"),d=!1;c.length>0&&(c[0].value.length>0&&this._setCompositionDataStatusText(a,c[0].value),d=c[0]===Xa());b.length>0&&l.remove(b[0]);l.show(this._composer);d&&this._textarea.focus()};e.captureFriendsPrivacyRow=function(){this._friendsPrivacyRow=this._getPrivacyRow("value",T.PostParam.FRIENDS),this._friendsPrivacyRow||this.closeInterstitial(this._postInterstitialTooltipText[0]),this._waitingForFriendsRow&&this._handleInterstitialFriends()};e.capturePublicPrivacyRow=function(){var a=this._getSavedCustomHiddenInput();if(a){a=Qa.getURIBuilder().setString("new_post_param",T.PostParam.EVERYONE.toString()).setBool("update_icon",!0).getURI();new Q(a).send()}else this._publicPrivacyRow=this._getPrivacyRow("value",T.PostParam.EVERYONE),U.invoke("MPrivacyComposerMenu:updatePrivacy",null,{row:this._publicPrivacyRow})};e._getPrivacyRow=function(a,b){var c=l.scry(this._buttonbar,"table","privacy-table")[0];if(!c)return null;for(var d=0;d<c.rows.length;d++){var e=c.rows[d],f=P.get(e);if(f[a]==b)return e}return null};e._hideForInterstitial=function(){l.hide(this._composer),this._textarea.blur()};e._closeComposer=function(){this._textarea.blur(),l.hide(this._composer),l.show(this._mainPage)};e._toggleSubmitButtonState=function(a){this._submitButtonNodes.forEach(function(b){b.disabled=!a}),this._forsaleInterceptForsale&&(this._forsaleInterceptForsale.disabled=!a,this._forsaleInterceptNonForsale.disabled=!a),this._slideshowPreviewButton&&(this._slideshowPreviewButton.disabled=!a)};e._toggleCancelButtonHidden=function(a){var b=l.find(this._composer,"button","cancel_composer");b=b.parentElement;a?l.hide(b):l.show(b)};e._toggleSubmitButtonHidden=function(a){this._submitButtonNodes.forEach(function(b){i.conditionShow(b,!a)})};e._restoreComposerWithoutFocus=function(){U.invoke("MMentions:decorations:show",null,{}),l.hide(this._mainPage),l.show(this._composer),l.show(this._textarea),l.show(this._buttonbar)};e._skipFocus=function(){return z.get(y.SKIP_FOCUS)};e._restoreComposer=function(){this._restoreComposerWithoutFocus(),this._focusOnTextarea()};e._incrementPhotosPreviewNuxCounter=function(){new Q(Ra.getURIBuilder().getURI()).send()};e._onUploadSuccess=function(a){var b=Za("814423");if(!b)return;b=this._multiPhotoUploader.getUploader().component.getAttachment(a);b&&b.id===this._previewedAttachmentId&&(this._hidePhotoPreviews(),this._showPhotosPreview(b))};e._showPhotosPreview=function(a){if(!this._photoPreview)return;if(a.state===ua.UPLOADED)this._photosPreviewNux&&this._incrementPhotosPreviewNuxCounter(),this._previewedAttachmentId=a.id,l.hide(this._composer),this._photoPreview.show(a.previewURI,this._tagSuggestionsController.getFaceboxesCopyForPhoto(a.fbid));else{var b=Za("814423");b&&(this._previewedAttachmentId=a.id,l.hide(this._composer),this._photoPreview.show(a.fileImageURI))}};e._hidePhotoPreviews=function(){if(!this._photoPreview)return;this._previewedAttachmentId=-1;l.show(this._composer);this._photoPreview.hide()};e._updateTagExpansion=function(){var a=this._friendsInputController.hasTokens()||this._hasMentions,b=this._getPrivacySelector();b&&b.setShowTagExpansion(a)};e._startCheckin=function(){U.invoke("open","MComposer:dialog:place")};e._registerPhotoPreviewEvents=function(){var a=this._multiPhotoUploader.getUploader();a.setProps({onThumbnailClicked:this._showPhotosPreview.bind(this)});this._photoPreview.setOnAddXYTag(this._tagSuggestionsController.addXYTag.bind(this._tagSuggestionsController));this._photoPreview.setOnDeleteXYTag(this._tagSuggestionsController.deleteXYTag.bind(this._tagSuggestionsController));this._photoPreview.setWaterfall(a.component.getWaterfallID(),a.component.getWaterfallAppName(),a.component.getWaterfallSource())};e._initPhotoPreview=function(){this._multiPhotoUploader&&this._tagSuggestionsController&&this._photosPreviewConfig&&!this._photoPreview&&(this._photoPreview=new Ca(this._photosPreviewConfig),this._registerPhotoPreviewEvents())};return d}($a(da));Va(d,{scrollToElem:null,showPlace:!0,shouldScroll:!0,syncSubmit:!1,eventTaggingNuxHref:null});Object.assign(d.prototype,{_defaultAction:null,_defaultConfig:null,_photoAction:null,_photoOpen:!1,_hasPhoto:!1,_albumChosen:!1,_onlyMeFlyoutShown:!1,_prefill:null,_forceAsync:!1,_isCheckin:!1,_isUnpublishedPost:!1,_isPageCheckin:!1,_pinPlace:!1,_albumPicker:null,_EventTaggingNuxDisplayed:!1,_ogTagger:null,_textarea:null,_attachPhoto:null,_clickedButton:null,_composer:null,_composerTitle:null,_contextualMessage:null,_form:null,_mainPage:null,_photoButton:null,_staticTemplates:null,_ogTaggerLoaded:!1,_slideshowNUX:null,_listeners:null,_canRemoveActorVC:!0});function $(a){if(!a)return"";a=a.trim();a=a.replace(/\n{3,}/,"\n\n");a=a.replace(/\t+/," ");return a}e.exports=d}),null);
__d("InitMStructuredComposer",["DOM","MAlbumPicker","MLegacyDataStore","MOpenGraphTagger","MStructuredComposer","Stratcom","$"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();function a(a){__p&&__p();b=a.friends_tagger;var c=m(a.open_id),d=i.get(c),e=d._friendsTagger||b.fromID(a.friends_tagger_id),f=null;a.album_picker_id&&(f=d._albumPicker||new h(m(a.album_picker_id)));var n;a.og_tagger_id&&(n=new j(m(a.og_tagger_id)));d=new k(c,e,null,f,n,a.multi_photo_uploader,a.page_info,a.create_label,a.update_label,a.composer_target_type,a.composer_entry_point,a.friends_input,null,a.og_clearable_preview,a.should_show_tag_suggestions,a.should_auto_tag,a.photos_preview_config,a.photos_preview_nux);d.setDefaultHideConfig&&d.setDefaultHideConfig(a.hide_config||{});a.privacy_selector_rewrite_id&&d.setPrivacySelector(m(a.privacy_selector_rewrite_id));i.set(c,{composer:d});a.scroll_to_elem_id&&d.setScrollToElem(a.scroll_to_elem_id);d.setSyncSubmit(a.syncsubmit);d.setShowPlace(a.showplace);d.setShouldScroll(a.shouldscroll);d.setLongReviewTips(a.long_review_tips);d.setShortReviewsDisableDone(a.short_reviews_disable_done);d.setCanRemoveActorVc(a.can_remove_actor_vc);d.setSlideshowNUX(a.slideshow_nux);a.slideshow_preview_id&&d.setSlideshowPreview(m(a.slideshow_preview_id));a.was_loaded_with_placeholder_composer&&d.setWasAsyncLoadedWithPlaceholderComposer(a.was_loaded_with_placeholder_composer);d.start();a.photouploaduri&&d.setPhotoAction(a.photouploaduri);d.setInAudienceAlignmentExp(a.in_aaa_exp);d.setInAudienceAlignmentOnlyMeExp(a.in_aaa_onlyme_exp);d.setAudienceAlignmentFlyout(a.aaa_flyout);a.newcomer_audience_nux&&d.setNewcomerAudienceNux(a.newcomer_audience_nux);a.show_sticky_guardrail_flyout&&d.setStickyGuardrailFlyout(a.show_sticky_guardrail_flyout);d.setSharePreview(a.share_preview);d.setShowLoadingIndicator(a.show_loading_indicator);l.listen("MPrivacyComposerMenu::custom",null,function(b){b.getData().selector.parentNode.id==a.privacy_selector_rewrite_id&&(b.getData().visible?g.hide(m("structured_composer")):(g.hide(m("viewport")),g.show(m("structured_composer"))))});l.invoke("InitMStructuredComposer:composer-initialized")}f.main=a}),null);
__d("MStructuredComposerFriendsInputReact",["BanzaiODS","CSS","DOM","MComposerLogger","MComposerNavigationMixin","MComposerWaterfallEvent","MCompositionUserActions","MCompositionWithFields","MCompositionWithStore","MSubscriptionsHandlerMixin","MTokenCollection.react","MTokenRenderer.react","MUnifiedTaggerConstants","React","ReactDOM","Stratcom","TokenCollection","mixin","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){__p&&__p();var z="mtouch_composer_facerec_suggestions",A=s.SHOW_UNIFIED_TAGGER;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d){__p&&__p();var e;e=a.call(this)||this;e.$MStructuredComposerFriendsInputReact1=b;e.$MStructuredComposerFriendsInputReact2=c;e.$MStructuredComposerFriendsInputReact3=new w();e.$MStructuredComposerFriendsInputReact4=u.render(t.createElement(q,{onClick:e.$MStructuredComposerFriendsInputReact5.bind(babelHelpers.assertThisInitialized(e)),onRemove:e.$MStructuredComposerFriendsInputReact6.bind(babelHelpers.assertThisInitialized(e)),renderer:r,collection:e.$MStructuredComposerFriendsInputReact3,collectionKey:"users_with"}),i.find(c,"ul","friend-tokens"));e.$MStructuredComposerFriendsInputReact7=d;e.$MStructuredComposerFriendsInputReact8=d.style.display;e.$MStructuredComposerFriendsInputReact9={};A&&e.addSubscriptions(v.listen("MComposer:tagger:click",s.TOKEN_TYPES.PEOPLE,function(){return e.$MStructuredComposerFriendsInputReact5()}));e.addSubscriptions(v.listen("click","inline-with-button",function(){y(function(){e.$MStructuredComposerFriendsInputReact5()},10)}),v.listen("MComposer:tagger:open",null,function(){return e.$MStructuredComposerFriendsInputReact5()}));e.addSubscriptions(i.listen(e.$MStructuredComposerFriendsInputReact7,"click",null,function(){return e.$MStructuredComposerFriendsInputReact5()}),e.$MStructuredComposerFriendsInputReact1.listen("cancel",function(){e.currentNavigationPolicy().addOnClose(function(){return e.$MStructuredComposerFriendsInputReact10()}).close()}),e.$MStructuredComposerFriendsInputReact1.listen("submit",function(a){e.currentNavigationPolicy().addOnClose(function(){var b={};b[n.TOKENS]=a.tokens;m.withUpdate(b);j.log(l.FRIEND_TAG_ADD,{num_tags:a.tokens.length});e.$MStructuredComposerFriendsInputReact11(a.tokens.length)}).close()}),o.addChangeListener(function(){return e.$MStructuredComposerFriendsInputReact12()}));return e}var c=b.prototype;c.$MStructuredComposerFriendsInputReact12=function(){var a=o.get(n.TOKENS,[]);a!==this.$MStructuredComposerFriendsInputReact3.entries&&(this.$MStructuredComposerFriendsInputReact3.entries=a,this.$MStructuredComposerFriendsInputReact13(),this.$MStructuredComposerFriendsInputReact4.forceUpdate(),this.$MStructuredComposerFriendsInputReact14(),this.$MStructuredComposerFriendsInputReact11(),this.$MStructuredComposerFriendsInputReact15())};c.$MStructuredComposerFriendsInputReact15=function(){this.$MStructuredComposerFriendsInputReact16&&this.$MStructuredComposerFriendsInputReact16(this.$MStructuredComposerFriendsInputReact3.entries.slice())};c.$MStructuredComposerFriendsInputReact13=function(){A&&v.invoke("MComposer:tagger:update",null,{people:this.$MStructuredComposerFriendsInputReact3.entries})};c.$MStructuredComposerFriendsInputReact17=function(a){var b=!this.$MStructuredComposerFriendsInputReact3.hasEntry(a);b&&(this.$MStructuredComposerFriendsInputReact3.addEntry(a),this.$MStructuredComposerFriendsInputReact13(),this.$MStructuredComposerFriendsInputReact14(),this.$MStructuredComposerFriendsInputReact4.forceUpdate());return b};c.addManualXYTag=function(a){this.$MStructuredComposerFriendsInputReact17(a)&&this.$MStructuredComposerFriendsInputReact18(),this.$MStructuredComposerFriendsInputReact15()};c.addAutoToken=function(a){this.$MStructuredComposerFriendsInputReact9[a.id]||this.$MStructuredComposerFriendsInputReact17(a)&&(this.$MStructuredComposerFriendsInputReact19(),g.bumpEntityKey(z,"add_auto_tag"))};c.onRemove=function(a){this.$MStructuredComposerFriendsInputReact3.removeEntry(a),this.$MStructuredComposerFriendsInputReact14(),this.$MStructuredComposerFriendsInputReact13(),this.$MStructuredComposerFriendsInputReact4.forceUpdate(),this.$MStructuredComposerFriendsInputReact15()};c.$MStructuredComposerFriendsInputReact6=function(a){this.$MStructuredComposerFriendsInputReact9[a.id]=!0,this.onRemove(a),a.autoTag&&g.bumpEntityKey(z,"remove_auto_tag"),this.$MStructuredComposerFriendsInputReact20()};c.$MStructuredComposerFriendsInputReact14=function(){var a=this.$MStructuredComposerFriendsInputReact3.entries.length>0;A||h.conditionShow(this.$MStructuredComposerFriendsInputReact2,a);h.conditionClass(this.$MStructuredComposerFriendsInputReact7,"active",a)};c.$MStructuredComposerFriendsInputReact5=function(){var a=this;this.newNavigationPolicy().addOnOpen(function(){j.log(l.FRIEND_TAG_INTENT),a.$MStructuredComposerFriendsInputReact1.setEntries(a.$MStructuredComposerFriendsInputReact3.entries.slice()),setTimeout(a.$MStructuredComposerFriendsInputReact1.show.bind(a.$MStructuredComposerFriendsInputReact1))}).addOnCloseByBrowser(function(){a.$MStructuredComposerFriendsInputReact1.hide(),a.$MStructuredComposerFriendsInputReact10()}).open()};c.$MStructuredComposerFriendsInputReact11=function(a){v.invoke("MStructuredComposerFriendsInput-done",null,{num_tags:a})};c.$MStructuredComposerFriendsInputReact19=function(){v.invoke("MStructuredComposerFriendsInput-addedAutoTags",null,{})};c.$MStructuredComposerFriendsInputReact18=function(){v.invoke("MStructuredComposerFriendsInput-addedManualXYTags",null,{})};c.$MStructuredComposerFriendsInputReact20=function(){v.invoke("MStructuredComposerFriendsInput-removedManualTags",null,{})};c.$MStructuredComposerFriendsInputReact10=function(){var a=this.getTokenCount();v.invoke("MStructuredComposerFriendsInput-done",null,{cancel:!0,num_tags:a});j.log(l.FRIEND_TAG_CANCEL,{num_tags:a})};c.reset=function(){this.$MStructuredComposerFriendsInputReact4.entries=[],A||i.hide(this.$MStructuredComposerFriendsInputReact2),this.$MStructuredComposerFriendsInputReact3.entries=[],this.$MStructuredComposerFriendsInputReact9={},this.$MStructuredComposerFriendsInputReact1.clear(),this.$MStructuredComposerFriendsInputReact4.forceUpdate(),h.conditionClass(this.$MStructuredComposerFriendsInputReact7,"active",!1),this.$MStructuredComposerFriendsInputReact1.hide()};c.getTokenCount=function(){return this.$MStructuredComposerFriendsInputReact3.entries.length};c.hasTokens=function(){return this.getTokenCount()>0};c.setVisible=function(a){h.conditionShow(this.$MStructuredComposerFriendsInputReact7,a)};c.setOnEntriesChangedHandler=function(a){this.$MStructuredComposerFriendsInputReact16=a};c.getEntries=function(){return this.$MStructuredComposerFriendsInputReact3.entries};return b}(x(k,p));e.exports=a}),null);