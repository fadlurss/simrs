if (self.CavalryLogger) { CavalryLogger.start_js(["+5lxz"]); }

__d("CommentsTimeSpentTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var b=a.prototype;b.log=function(){h.log("logger:CommentsTimeSpentLoggerConfig",this.$1,g.BASIC)};b.logVital=function(){h.log("logger:CommentsTimeSpentLoggerConfig",this.$1,g.VITAL)};b.logImmediately=function(){h.log("logger:CommentsTimeSpentLoggerConfig",this.$1,{signal:!0})};b.clear=function(){this.$1={};return this};b.getData=function(){return babelHelpers["extends"]({},this.$1)};b.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.setEndTime=function(a){this.$1.end_time=a;return this};b.setOrderingMode=function(a){this.$1.ordering_mode=a;return this};b.setPostFbid=function(a){this.$1.post_fbid=a;return this};b.setStartTime=function(a){this.$1.start_time=a;return this};b.setTimeSpentID=function(a){this.$1.time_spent_id=a;return this};b.setViewerHasInteracted=function(a){this.$1.viewer_has_interacted=a;return this};return a}();b={end_time:!0,ordering_mode:!0,post_fbid:!0,start_time:!0,time_spent_id:!0,viewer_has_interacted:!0};e.exports=a}),null);
__d("AbstractCommentLiveTypingXHRController",["destroyOnUnload","ex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={START:"start",STOP:"stop"},j=10*1e3;a=function(){__p&&__p();function a(a,b,c,d){d===void 0&&(d=null),this.$5=a,this.$6=b,this.$7=c,this.$1=d,this.$2=!1,this.$3=0,this.$4=null,g(this.destroy.bind(this))}var b=a.prototype;b.destroy=function(){this.$1&&this.$1.destroy(),this.$1=null,this.$2=!1,this.$3=0,this.$4=null};b.bootloadPublisherModule=function(a){throw new Error(h("bootloadPublisherModule not implemented, should be overridden by subclass"))};b.$8=function(a){a=new a(this.$5,this.$6,this.$7);var b=Date.now(),c=this.$3;if(c&&c+j>=b){c=this.$4;c===i.START?a.handleStartEvent():c===i.STOP&&a.handleStopEvent()}this.$1=a};b.$9=function(){if(this.$2||!this.$5)return;this.$2=!0;this.bootloadPublisherModule(this.$8.bind(this))};b.attemptPublishStartEvent=function(){this.$4=i.START,this.$3=Date.now(),this.$1?this.$1.handleStartEvent():this.$2||this.$9()};b.attemptPublishStopEvent=function(){this.$4=i.STOP,this.$3=Date.now(),this.$1?this.$1.handleStopEvent():this.$2||this.$9()};return a}();e.exports=a}),null);
__d("MComposerLiveTypingController",["AbstractCommentLiveTypingXHRController","Bootloader"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d){return a.call(this,b,c,d)||this}var c=b.prototype;c.bootloadPublisherModule=function(a){h.loadModules(["MComposerLiveTypingPublisher"],a,"MComposerLiveTypingController")};c.attemptPublishStartEvent=function(){a.prototype.attemptPublishStartEvent.call(this)};c.attemptPublishStopEvent=function(){a.prototype.attemptPublishStopEvent.call(this)};return b}(g);e.exports=a}),null);
__d("MCommentComposer",["ChannelClientID","ClientIDs","CommentPrivacyValue","CSS","DOM","MComposerConfig","MComposerLiveTypingController","MLegacyDataStore","MMultiPhotoUploaderAttachmentState","MParent","MUFIInlineRepliesFunnelLogConfig","MViewport","Stratcom","StratcomManager","SubscriptionsHandler","TouchEventType","cancelAnimationFrame","cx","debounceCore","ge","getActiveElement","requestAnimationFrame","requireWeak","setTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){__p&&__p();var F=q.MUFIInlineReplyComposerFunnelLogger,G={logViewerInteracted:function(a){return void 0},logPost:function(a,b){return void 0}};C("MPrivateCommentsLogger",function(a){G=a});var H="m-ufi",I="feed-ufi",J="scroll-area",K="m-composer",L="m-photo-composer",M="m-inline-reply-composer",N="m-noninline-composer",O="textarea",P="privacy-selector",Q="composer-submit",R="inline-reply",S="comment",T=100,U=l.MComposerLoggingController,V=!1;function W(){return!!l.PUBLISH_LIVE}function X(a){if(a.tagName==="FORM")return a;else return k.find(a,"form")}a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b||{},this.$3=null,this.$4=null,this.$5=!!this.$2.toggle_submit,this.$10=this.$17(),this.$12=o.getDefaultState(),this.$13=!!p.bySigil(a,I),this.$14=!!(this.$2.is_inline_reply&&p.bySigil(this.$1,M)),this.$15=null,this.$2.log_comment&&U&&(this.$15=new U()),this.$8=null,this.$9=!1,this.$7=new u(),this.$18(),s.invoke("marauder-fb-composer-init",null,{parent_fbid:"target_id"in this.$2?this.$2.target_id:-1})}var b=a.prototype;b.$19=function(){this.$8&&this.$8.release(),this.$8=null};b.destroy=function(){this.$7.release(),this.$19(),this.$15&&this.$15.destroy(),this.$15=null,this.$3&&this.$3.destroy(),this.$3=null};b.$20=function(a){__p&&__p();var b=this;if(!this.$5||!a)return;this.$6&&w(this.$6);this.$6=B(function(){b.$6=null;var c=k.find(a,"*",Q),d=b.$12[o.SENDING]===0&&(!/^\s*$/.test(k.find(a,"*",O).value)||b.$12[o.UPLOADED]>0);!d?c.setAttribute("disabled",!0):c.removeAttribute("disabled");j.conditionClass(c,"_56bt",!d);j.conditionClass(c,"_56bv",d);j.conditionClass(c,"_653w",d)})};b.$21=function(a){var b=this;a===this.$2.composer_id&&(this.$11=!0,D(function(){b.$11=!1},T))};b.$22=function(a){if(!a||!n.get(a).auto_collapse||!n.get(X(a)).expand_composer)return;var b=k.find(a,"*",O);b=A()===b||!/^\s*$/.test(b.value)||this.$12[o.UPLOADED]>0;if(!b&&this.$11)return;j.conditionClass(a,"composerClosed",!b)};b.$23=function(a){var b=k.find(a,"*","m-comment-conversation-guide-session-id");b&&(b.value="");b=k.find(a,"*","m-comment-conversation-guide-shown");b&&(b.value="none")};b.$18=function(){__p&&__p();var a=this,b=W()?this.$24.bind(this):this.$10.bind(this);this.$2.isPageletified?this.$25():(this.$16=s.listen(["m:page:render:complete","m:schedulable:loaded"],null,this.$25.bind(this)),this.$7.addSubscriptions(this.$16));this.$7.addSubscriptions(s.listen("MCommentComposer:replyButtonClick",null,function(b){return a.$21(b.getData().composerID)}),s.listen("MCommentComposer:conversationGuideItemClick",null,function(b){return a.$21(b.getData().composerID)}),s.listen("focus",[K,O],this.$26.bind(this)),s.listen("focus",[K,P],this.$27.bind(this)),s.listen("keyup",[K,O],b),s.listen("keydown",[K,O],this.$28.bind(this)),s.listen("input",[K,O],b),s.listen("paste",[K,O],b),s.listen("MMultiPhotoUploader:attachments:change",null,this.$29.bind(this)),s.listen("blur",[K,O],this.$30.bind(this)),s.listen("reset",[K],this.$31.bind(this)),s.listen("touchend",[K,Q],this.$32.bind(this)),s.listen("click",Q,this.$33.bind(this)),s.listen("m:page:unload",null,this.destroy.bind(this)),s.listen("m:feed-ufi-flyout:reset",null,this.$34.bind(this)),this.$10);l.CAN_TOUCH_PHOTO_INPUT_WHILE_EXPANDED&&this.$7.addSubscriptions(s.listen("MMultiPhotoUploader:input:click",null,this.$35.bind(this)));this.$14||this.$7.addSubscriptions(s.listen("click","m-add-comment",this.$36.bind(this)));this.$13&&p.bySigil(this.$1,J)&&this.$7.addSubscriptions(s.listen("MScrollArea:scrollstart",null,this.$37.bind(this)));V||(V=!0,t.enableDispatch(window,"reset"));this.$7.addSubscriptions(s.listen("submit",K,this.$38.bind(this)));W()&&this.$7.addSubscriptions(s.listen("m:feed-ufi:hide",null,this.$39.bind(this)));this.$15&&(this.$7.addSubscriptions(s.listen("MMultiPhotoUploader:input:change",null,this.$40.bind(this)),s.listen("m:ufi:iui:comment-added",null,this.$41.bind(this))),this.$14||this.$7.addSubscriptions(s.listen("m:ufi:live-comments:render",null,this.$42.bind(this))));this.$2.is_inline_reply&&F&&this.$7.addSubscriptions(s.listen("m:ufi:sticker-comment",null,this.$43.bind(this)))};b.$44=function(a){return!!a&&k.contains(this.$1,a)};b.$26=function(a){a=a.getNode(K);if(!this.$44(a))return;var b=k.find(a,"*",O);this.$22(a);n.get(a).disable_auto_scroll||r.scrollToNode(b)};b.$27=function(a){a=a.getNode(K);if(!a||!this.$44(a))return;j.removeClass(a,"composerClosed")};b.$17=function(){var a=this;return y(function(b){var c=b.getNode(O);if(!(c instanceof HTMLInputElement||c instanceof HTMLTextAreaElement)||!a.$44(c))return;s.invoke("marauder-feedback-input",null,{draft:c.value});c.form&&G.logViewerInteracted(c.form.id);a.$15&&a.$15.logInitText();a.$20(b.getNode(K))},250)};b.$24=function(a){var b=a.getNode(O);if(!(b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement)||!this.$44(b))return;b=b.value;var c=this.$4;b!==c&&(b&&b.trim().length?this.$45():this.$39());this.$10(a);this.$4=b};b.$29=function(a){__p&&__p();a=a.getData();var b=z(a.input_id);if(!b)return;b=p.bySigil(b,L);if(!b)return;b=k.find(b,"*",K);if(!this.$44(b))return;this.$12=a;this.$20(b);this.$22(b)};b.$30=function(a){a=a.getNode(K);if(!this.$44(a))return;this.$9||this.$22(a);this.$9=!1};b.$31=function(a){a=a.getNode(K);if(!this.$44(a))return;this.$20(a);this.$22(a);this.$23(a);this.$39()};b.$46=function(){this.$2.is_inline_reply&&F&&F.logReplySubmitted(this.$2.target_id)};b.$38=function(a){a=a.getTarget();if(!a||!this.$44(a))return;var b=k.scry(a,"input","mcomposer-client-id");b.length?b[0].setAttribute("value",h.getNewClientID()):(b=k.create("input",{name:"client_id",sigil:"mcomposer-client-id",type:"hidden",value:h.getNewClientID()}),a.appendChild(b));b=k.scry(a,"input","mcomposer-session-id");b.length||(b=k.create("input",{name:"session_id",sigil:"mcomposer-session-id",type:"hidden",value:g.getID()}),a.appendChild(b));W()&&this.$39();this.$46()};b.$43=function(a){a=a.getData().textInput;if(!this.$44(a))return;this.$46()};b.$32=function(a){__p&&__p();var b=a.getNode(Q),c=n.get(b);if(b instanceof HTMLElement&&!c.onclickIsSet){a=a.getNode(K);if(!a||!this.$44(a))return;var d=k.find(a,"*",O);b.onclick=function(){d.blur()};c.onclickIsSet=!0}};b.$37=function(a){__p&&__p();a=a.getData().element;if(!a||!k.contains(a,this.$1))return;a=k.find(this.$1,"*",K);var b=k.find(a,"*",O);a=k.scry(a,"*","m-mentions-root")[0];a=a&&n.get(a);a=a||{};a=a.mentionsInstance;var c=a&&a.getIgnoreFocusChange();a&&a.setIgnoreFocusChange(!0);b.blur();a&&a.setIgnoreFocusChange(c)};b.$33=function(a){a=a.getNode(K);if(!this.$44(a))return;a=k.find(a,"*",O);this.$15&&this.$15.logSubmit(a.value.length,this.$12[o.UPLOADED],a.form);G.logPost(parseInt(k.find(a.form,"input","m-comment-privacy").value,10)===i.OWNER_OR_COMMENTER,a.form.id);s.invoke("marauder-feedback-posted",null,{});this.$39()};b.$36=function(a){a=a.getNode(H);if(!a||!k.contains(a,this.$1))return;a=k.find(this.$1,"*",K);a=k.find(a,"*",O);a.focus()};b.$34=function(a){a=a.getData();a=a.target_id;this.$13&&a!==this.$2.target_id&&this.destroy()};b.$47=function(a){if(!a)return null;a=p.bySigil(a,L);a=a&&k.scry(a,"*",K)[0];return a&&this.$44(a)?a:null};b.$35=function(a){__p&&__p();var b=this,c=A();if(c&&s.hasSigil(c,"textarea")&&this.$44(c)&&p.bySigil(c,L)){this.$9=!0;c.blur();this.$9=!1;this.$19();a=function(){b.$19();c.blur();var a=k.scry(b.$1,"*",K)[0];a&&b.$22(a)};var d=new u();d.addSubscriptions(s.listen("focus",null,a.bind(this)),s.listen(v.START,null,a.bind(this)));this.$8=d}};b.$40=function(a){a=a.getData();a=a.input;a=this.$47(a);if(!a)return;this.$15&&this.$15.logInitPhoto()};b.$42=function(a){var b=this;a=a.getData();var c=a.ufi;a=a.logKeys;if(!c||!a||!k.contains(c,this.$1))return;a.forEach(function(a){return b.$15&&b.$15.logRender(a)})};b.$41=function(a){__p&&__p();a=a.getData();var b=a.commentNode;a=a.loggingInteractionKey;if(!b||!a)return;var c=s.hasSigil(b,R);if(this.$14&&c){var d=p.bySigil(b.parentNode,S);d=d&&k.scry(d,"*",M)[0]}else if(!c&&!this.$14){d=p.bySigil(b,L);if(!d&&this.$13){c=p.bySigil(b,I);d=k.scry(c,"*",N)[0]}}else return;b=d&&k.scry(d,"*",K)[0];if(!this.$44(b))return;this.$15&&this.$15.logRender(a)};b.$48=function(){this.$2&&this.$2.target_id&&!this.$3&&W()&&(this.$3=new m(this.$2.target_id,this.$2.parent_comment_id,this.$2.actor_id))};b.$45=function(){if(!W())return;this.$48();this.$3&&this.$3.attemptPublishStartEvent()};b.$39=function(){if(!W())return;this.$48();this.$3&&this.$3.attemptPublishStopEvent()};b.$25=function(){var a=this;this.$2.should_focus&&this.$2.input_id?E(function(){z(a.$2.input_id).focus(),a.$2.is_comments_permalink?r.scrollToTop():z(a.$2.composer_id).scrollIntoView()},0):this.$2.should_anchor&&this.$2.composer_id?z(this.$2.composer_id).scrollIntoView():this.$2.should_anchor_reactions||r.scrollToTop();this.$16&&this.$16.remove()};b.$28=function(a){if(this.$2.send_with_softkey&&a.getSpecialKey()==="return"){a=a.getNode(K);var b=A();b&&b.blur();k.find(a,"*",Q).click()}};return a}();e.exports=a}),null);
__d("MUFICommentViewportTracking",["MarauderLogger","MLegacyDataStore","MUFIConfig","MViewportTracking"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getDataFromConfig=function(a){this.vpvLoggingEnabled=a.vpvLoggingEnabled};c.getStoryID=function(a){return h.get(a).token};c.getDataToLog=function(a){return this.getStoryID(a)};c.sendDataToLog=function(a){this.vpvLoggingEnabled&&g.log("comment_vpv",void 0,null,"comment",a)};c.getTimeout=function(){return i.vpvLoggingTimeout};return b}(j);e.exports=a}),null);
__d("MUFIStaticCommentViewportTracking",["CommentsTimeSpentTypedLogger","MUFICommentViewportTracking","Stratcom","pageID"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k={},l=null;a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);b.trackStatically=function(a,c,d,e,f){var g=f+"_"+e,h=k[g];h||(h=new b(),k[g]=h,h.init({is_loose:!1,throttle_no_delay:!1,relaxed_min_size:!0,vpv_debug:!1,triggerOverride:[["scroll",null],["touchmove","ufi-overlay"]],vpvLoggingEnabled:c,timeTrackingEnabled:d,orderingMode:e,targetFBID:f}));l||(l=i.listen("m:page:unload",null,b.resetAll));h.addComments(a);h.fireEvent()};b.resetAll=function(){l&&l.remove(),l=null,k={}};function b(){var b;b=a.call(this)||this;b.resetTimeSpentInterval();b.comments=[];return b}var c=b.prototype;c.addComments=function(a){this.comments.push.apply(this.comments,a)};c.getDataFromConfig=function(b){a.prototype.getDataFromConfig.call(this,b),this.isTimeTrackingEnabled=b.timeTrackingEnabled,this.orderingMode=b.orderingMode,this.targetFBID=b.targetFBID};c.getAllStories=function(){return this.comments};c.recordVPVDurations=function(a,b){this.recordVPVDurationsInternal(a,b),(b||!a.length)&&(this.timeSpentIntervalStart<this.timeSpentIntervalEnd&&new g().setOrderingMode(this.orderingMode).setPostFbid(this.targetFBID).setStartTime(this.timeSpentIntervalStart).setEndTime(this.timeSpentIntervalEnd).setTimeSpentID(j).log(),this.resetTimeSpentInterval())};c.sendTimetrackingDataToLog=function(a){var b=Math.round(a.vpvd_start_timestamp);b<this.timeSpentIntervalStart&&(this.timeSpentIntervalStart=b);b=b+Math.round(a.vpvd_time_delta/1e3);b>this.timeSpentIntervalEnd&&(this.timeSpentIntervalEnd=b)};c.resetTimeSpentInterval=function(){this.timeSpentIntervalStart=Number.MAX_VALUE,this.timeSpentIntervalEnd=0};return b}(h);e.exports=a}),null);