if (self.CavalryLogger) { CavalryLogger.start_js(["wZ7Cp"]); }

__d("XAppGrowthCtaLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/android/redirect/cta_logging/",{event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MAppGrowthCtaLogging",["BanzaiLogger","Stratcom","WebFunnelLogger","XAppGrowthCtaLoggingController","XAsyncRequest","goURI"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();a={init:function(a){__p&&__p();h.listen("click",a,function(a){__p&&__p();var b=a.getTarget().getAttribute("data-disabled");a.getTarget().setAttribute("data-disabled","1");var c=a.getTarget().getAttribute("href");if(b!="1"){b=a.getTarget().getAttribute("data-event");b=j.getURIBuilder().setEnum("event",b).getURI();var d=function(b){a.getTarget().setAttribute("data-disabled","")};new k(b).setMethod("POST").setHandler(d).send()}b=c.startsWith("#!")?c.substring(2):c;l(b)})},logToPromoFunnelLogger:function(a,b,c,d,e){h.listen("click",a,function(a){var f=new i("MSitePromosUpsellFunnelDefinition").setAction("clicked").setSessionKey(c).addFunnelPayload("upsell_id",b);e&&f.markStart();f.logWithEventTime(Date.now());g.log("MsiteUpsellPromosRealTimeLoggerConfig",{event:"clicked",upsell:b,impression:c});d!==""&&l(d);f=a.getTarget().getAttribute("href");a=f.startsWith("#!")?f.substring(2):f;l(a)})}};e.exports=a}),null);
__d("XTaggingCounterController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/composer/tagging/counter/",{event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MTaggingCounter",["AsyncSignal","XTaggingCounterController"],(function(a,b,c,d,e,f,g,h){a={logEvent:function(a,b){b=h.getURIBuilder().setEnum("event",a).getURI();new g(b).send()}};e.exports=a}),null);
__d("ViewableImpressionUtils",[],(function(a,b,c,d,e,f){a={isHorizontallyOffscreen:function(a,b,c){a=Math.max(b.x,0);c=Math.min(b.x+b.width,c.width);return c-a<b.width}};e.exports=a}),null);
__d("FullViewLogger",["Banzai","ScriptPath","SubscriptionsHandler","URI"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a=function(){"use strict";__p&&__p();function a(){}a.logFromViewableImpressionTracker=function(b){var c=new a();c.subscribeToTrackerEvents(b)};var b=a.prototype;b.subscribeToTrackerEvents=function(a){this.subscriptionsHandler=new i(),this.subscriptionsHandler.addSubscriptions(a.addListener("full_view",this.onFullView,this))};b.onFullView=function(a){this.$1()&&this.$2(a);a={token:a.token,fullViewType:a.fullViewType,scriptPath:h.getTopViewEndpoint()};g.post("xtrackable:full_view",a);this.$1()&&this.$3(a)};b.$1=function(){return 0};b.$2=function(a){};b.$3=function(a){};return a}();e.exports=a}),null);
__d("PercentVisible",[],(function(a,b,c,d,e,f){e.exports={NO_VISIBLE:-1,VISIBLE_0_PCT:0,VISIBLE_50_PCT:50,VISIBLE_100_PCT:100}}),null);
__d("BrowseClientEventLogger",[],(function(a,b,c,d,e,f){a={maybeLogClientViewEvent:function(a){},maybeLogVisiblityEvent:function(a){}};e.exports=a}),null);
__d("FullViewType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENTIRE_UNIT:1})}),null);
__d("GHLDelay",["AdImpressionLoggingConfig"],(function(a,b,c,d,e,f,g){var h=null;a={getEnabled:function(){return h===null?g.enableDelayedHiddenCheck:h},setEnabled:function(a){h=a}};e.exports=a}),null);
__d("GHLTestElement",["BanzaiODS","Parent","containsNode","csx","getElementPosition","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();a=function(a,b){__p&&__p();var c=Array.from(a.querySelectorAll("img"));c.length>0||l(0,13937);c=c.filter(m);if(c.length===0){g.bumpEntityKey("feed_ads","GHLTestElement.testElementI.skipping_check_for_incompatible_element"+b);return!1}b=c.filter(function(a){a=k(a);return a.width>0||a.height>0});c=b.length===0;return c&&!n(a)};var m=function(a){var b;return i(a==null?void 0:(b=a.ownerDocument)==null?void 0:b.documentElement,a)},n=function(a){return!!h.bySelector(a,o)},o=[".hidden_elem","._5ds2","._i6m"].join(",");e.exports={testElementI:a}}),null);
__d("GHLTracker",["BanzaiODS"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=new Map();a=function(a){if(h.has(a)){g.bumpEntityKey("feed_ads","GHLTracker.element_id_duplicated");return}h.set(a,{isHidden:!1,isDelayImpLogged:!1})};b=function(a){var b=h.get(a);b!==void 0&&h.set(a,{isHidden:!0,isDelayImpLogged:b.isDelayImpLogged})};c=function(a){var b=h.get(a);b!==void 0&&h.set(a,{isHidden:b.isHidden,isDelayImpLogged:!0})};d=function(a){return h.get(a)};e.exports={track:a,markH:b,markImp:c,getState:d}}),null);
__d("NonBlockingIFrame",["Promise","DOM","TimeSlice"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j={},k,l;function m(a,b){__p&&__p();a===void 0&&(a=j);b===void 0&&(b=document.body);var c={className:"nonBlockingIframe",width:0,height:0,frameborder:0,scrolling:"no","aria-hidden":"true"};a!==j&&(c.src=a);c=h.create("iframe",c);c.style.left="-1000px";c.style.position="absolute";h.appendContent(b,c);a===j&&(c.contentDocument.open(),c.contentDocument.close());return c}function n(){return new g(function(a){k||(k=m()),k.contentDocument.readyState==="complete"?a(k):(l||(l=new g(function(a){k.contentWindow.onload=i.guard(function(){a(k)},"NonBlockingIFrame window.onload")})),a(l))})}a={loadImage:function(a){__p&&__p();return n().then(function(b){return new g(function(c,d){var e=b.contentWindow.Image,f=new e();f.onload=i.guard(function(){c(f)},"NonBlockingIFrame image.onload");f.onerror=i.guard(function(){d(f)},"NonBlockingIFrame image.onerror");f.onabort=i.guard(function(){d(f)},"NonBlockingIFrame image.onabort");f.src=a})})},loadIFrame:function(a){a===void 0&&(a=j);return n().then(function(b){b=b.contentDocument.body;return m(a,b)})}};e.exports=a}),null);
__d("ghlTestUBT",["Promise","URI","gkx","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k;function l(){__p&&__p();var a=document.createElement("div"),b=["AdBox","Ad","advert"];i("686994")&&b.push("post-ads");a.className=b.join(" ");document.body.appendChild(a);return new g(function(b){__p&&__p();var c=window.getComputedStyle&&window.getComputedStyle(a);if(!c){b(!1);return}if(c.display==="none"){b(!0);return}if(c.MozBinding&&c.MozBinding.indexOf("url")===0){setTimeout(function(){return b(a.clientWidth===0)},5e3);return}b(!1)})}function m(){__p&&__p();var a=document.createElement("img");document.body.appendChild(a);return new g(function(b){a.onload=function(){var c=window.getComputedStyle&&window.getComputedStyle(a);c=c&&c.display==="none";a.parentNode&&a.parentNode.removeChild(a);b(c)};a.onerror=function(){a.parentNode&&a.parentNode.removeChild(a),b(!0)};var c=new h("https://scontent.xx.fbcdn.net/hads-ak-prn2/1487645_6012475414660_1439393861_n.png");a.src=c.toString()})}function a(a){k===void 0?j(g.all([l(),m()]),function(b){k=b.some(function(a){return a}),a(k)}):a(k)}e.exports=a}),null);
__d("ViewableImpressionTracker",["AdImpressionLoggingConfig","Banzai","BanzaiODS","BrowseClientEventLogger","DataAttributeUtils","DOM","FBSiteWhiteOps","FullViewType","GHLDelay","GHLTestElement","GHLTracker","NonBlockingIFrame","PercentVisible","Run","Style","URI","ViewableImpressionUtils","Visibility","csx","cx","ge","getElementPosition","getViewportDimensions","ghlTestUBT","gkx","mixInEventEmitter","randomInt","ScriptPath"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b,c){__p&&__p();var d=this;this.checkAndLogImpressionIfPendingOnExit=function(){g.enableFlushDelayLogOnCleanup&&d.waitForDelayLogged&&(clearTimeout(d.delayedLoggingTimeout),d.delayLogImpression())};this.delayLogImpression=function(){__p&&__p();d.waitForDelayLogged=!1;var a="other";d.element.id.startsWith("hyperfeed")&&(a="16");var b=p.testElementI(d.element,".vit."+a),c=q.getState(d.element.id);c&&(c.isHidden!==b&&i.bumpEntityKey("feed_ads","ViewableImpressionTracker.delayLogImpression.hidden_value_mismatch."+b+"."+c.isHidden+"."+a));q.markImp(d.element.id);if(b){d.$11();g.logForHiddenAds&&d.logImpression(1,!0,{});return}d.logImpression(1,!1,{});d.$9()};this.id=a;this.element=b;this.config=c;this.iframe=null;this.viewableTimeout=null;this.delayedLoggingTimeout=null;this.clearSubsequentTimeout=null;this.waitForSubsequent=!1;this.waitForLogged=!1;this.waitForDelayLogged=!1;this.isNonViewableLogged=!1;this.isVisible=!1;this.iframeLogged=!1;this.banzaiLogged=!1;this.topLeftInViewport=!1;this.bottomRightInViewport=!1;t.onUnload(this.checkAndLogImpressionIfPendingOnExit);t.onLeave(this.checkAndLogImpressionIfPendingOnExit);D(function(a){a===!0&&o.setEnabled(!0)})}var c=a.prototype;c.getID=function(){return this.id};c.getConfig=function(){return this.config};c.getPercentInViewport=function(){var a=C(),b=B(this.element);return this.$1(a,b)};c.$2=function(a,b,c){__p&&__p();c===void 0&&(c=0);var d=E("833732");if(d&&(b.height===0||b.width===0))return 0;if(b.x<a.width&&b.x+b.width>0&&b.y<a.height&&b.y+b.height>c&&u.get(this.element,"visibility")!=="hidden"&&u.get(this.element,"opacity")!=="0"){d=Math.max(b.x,0);var e=Math.min(b.x+b.width,a.width);c=Math.max(b.y,c);a=Math.min(b.y+b.height,a.height);if(b.height*b.width===0)return 100;e=100*(e-d)*(a-c)/(b.height*b.width);return e}return 0};c.$1=function(a,b){return this.config.require_horizontally_onscreen&&w.isHorizontallyOffscreen(this.element,b,a)?0:this.$2(a,b)};c.$3=function(a,b,c){a=this.$2(a,b,c);if(a===0)return s.NO_VISIBLE;else if(a<50)return s.VISIBLE_0_PCT;else if(a<100)return s.VISIBLE_50_PCT;else return s.VISIBLE_100_PCT};c.$4=function(a,b,c){c===void 0&&(c=0);var d=Math.max(b.y,c);b=Math.min(b.y+b.height,a.height);b=100*(b-d)/(a.height-c);if(b<50)return s.VISIBLE_0_PCT;else if(b<100)return s.VISIBLE_50_PCT;else return s.VISIBLE_100_PCT};c.$5=function(a,b){__p&&__p();var c=0,d=A("pagelet_bluebar");d&&d.offsetHeight&&(c=d.offsetHeight+d.offsetTop);if(this.config.should_log_viewport_duration){d=this.$4(a,b,c);switch(d){case s.VISIBLE_0_PCT:case s.VISIBLE_50_PCT:case s.VISIBLE_100_PCT:this.emit("viewport_viewability",{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:d});break;default:break}}d=this.$3(a,b,c);switch(d){case s.VISIBLE_0_PCT:case s.VISIBLE_50_PCT:case s.VISIBLE_100_PCT:this.emit("viewability",{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:d});break;default:this.emit("hidden",{id:this.getID(),token:this.getToken()});break}};c.$6=function(a,b){if(u.get(this.element,"visibility")==="hidden"||u.get(this.element,"opacity")==="0")return!1;var c=b.x,d=b.y,e=b.x+b.width;b=b.y+b.height;this.topLeftInViewport=this.topLeftInViewport||c>=0&&c<=a.width&&d>=0&&d<=a.height;this.bottomRightInViewport=this.bottomRightInViewport||e>=0&&e<=a.width&&b>=0&&b<=a.height;return this.topLeftInViewport&&this.bottomRightInViewport};c.$7=function(a,b){if(this.hasEmittedFullViewEvent)return;this.$6(a,b)&&(this.emit("full_view",{tracker:this,id:this.getID(),token:this.getToken(),fullViewType:n.ENTIRE_UNIT}),this.hasEmittedFullViewEvent=!0)};c.onVisible=function(a){__p&&__p();var b=this;this.isVisible=!0;a=C();var c=B(this.element),d=this.$1(a,c),e=d>this.config.pixel_in_percentage,f=[],h;(this.config.skip_imp_if_no_images||this.config.check_images_before_log)&&(f=Array.from(this.element.querySelectorAll("img")),h=Array.from(this.element.getElementsByClassName("_7cqq")),i.bumpEntityKey("feed_ads","ViewableImpressionTracker.delayLogImpression.isFeedLoadedCheck."+(f.length===0)+"."+(h.length===0)));if(this.config.skip_imp_if_no_images&&f.length===0)return;this.emit("visible",{tracker:this,id:this.getID(),token:this.getToken(),percentInViewport:d});this.config.should_log_viewability_duration&&this.$5(a,c);this.$7(a,c);if(!e){this.$8();return}this.isLogged()?this.$9():this.$10();!this.waitForLogged&&!this.waitForDelayLogged&&!this.isLogged()&&!(g.blockInvisible&&x.isHidden())&&(this.waitForLogged=!0,this.viewableTimeout=setTimeout(function(){__p&&__p();b.waitForLogged=!1;if(g.blockInvisible&&x.isHidden())return;var a=b.getPercentInViewport();a=a>b.config.pixel_in_percentage;if(!a){b.$11();return}b.config.check_images_before_log&&(f.length===0&&i.bumpEntityKey("feed_ads","ViewableImpressionTracker.log_without_load."+b.config.trackable_identifier));if(o.getEnabled()&&b.config.can_delay_log_impression===!0){b.waitForDelayLogged=!0;a=g.maxHiddenCheckDelay;a=a-b.config.duration_in_ms;a<0&&(a=0);b.delayedLoggingTimeout=setTimeout(b.delayLogImpression,a)}else b.logImpression(1,!1,{}),b.$9()},this.config.duration_in_ms))};c.onHidden=function(){var a=this;this.emit("hidden",{id:this.getID(),token:this.getToken()});this.config.log_initial_nonviewable&&!this.isLogged()&&!this.isNonViewableLogged?this.logNonViewableImpression():!this.config.log_initial_nonviewable&&!this.isLogged()&&this.isVisible&&this.logNonViewableImpression();this.isVisible=!1;this.waitForLogged&&(this.waitForLogged=!1,clearTimeout(this.viewableTimeout));this.isLogged()&&!this.waitForSubsequent&&this.config.subsequent_gap_in_ms>=0&&(this.waitForSubsequent=!0,this.clearSubsequentTimeout=setTimeout(function(){a.waitForSubsequent=!1,a.reset(),a.isVisible&&a.onVisible()},this.config.subsequent_gap_in_ms));this.$11()};c.onRemoved=function(){this.isVisible=!1};c.getToken=function(){return k.getDataAttribute(this.element,"data-xt")};c.logImpression=function(a,c,d){__p&&__p();if(this.isLogged())return;var e=this.getToken(),f=Math.floor(Date.now()/1e3),i=this.$12(),j=Date.now()+"_"+(G(0,4294967295)+1);e={xt:e,isv:a,cts:f,csp:i,hba:c,etid:j};this.config.should_log_endpoint_info&&(e.me=b("ScriptPath").getTopViewEndpoint());if(h.isEnabled("xtrackable_clientview_batch")&&this.config.should_batch||this.config.vital_mode_for_ss||this.config.signal_mode_for_ss){a=this.config.vital_mode_for_ss?h.VITAL:{};a.signal=this.config.signal_mode_for_ss;this.logWithBanzai(e,a);g.runBotDetection&&m.appendToWindow(j,"FACEBOOK_WEB_ADS","IMPRESSION")}else this.logWithIFrame(Object.assign(e,d))};c.logNonViewableImpression=function(){if(this.config.nonviewableEnabled){var a=this.getToken();h.post("xtrackable:nonviewable",{xt:a})}this.isNonViewableLogged=!0};c.isLogged=function(){return this.iframeLogged||this.banzaiLogged};c.reset=function(){this.iframeLogged&&(this.iframeLogged=!1),this.iframe&&(l.remove(this.iframe),this.iframe=null),this.banzaiLogged&&(this.banzaiLogged=!1),this.isNonViewableLogged=!1,this.isVisible=!1,this.waitForLogged=!1,this.waitForDelayLogged=!1,this.waitForSubsequent=!1};c.logWithBanzai=function(a,b){this.banzaiLogged=!0,j.maybeLogClientViewEvent(a),h.post("xtrackable:clientview_batch",a,b)};c.logWithIFrame=function(a){this.iframeLogged=!0,this.config.is_instream_story?r.loadIFrame(new v(this.config.impressionURL).addQueryData(a).toString()):(this.iframe=l.create("iframe",{src:new v(this.config.impressionURL).addQueryData(a),width:0,height:0,frameborder:0,scrolling:"no",className:"fbEmuTracking"}),this.iframe.setAttribute("aria-hidden","true"),l.appendContent(this.element,this.iframe))};c.$12=function(){__p&&__p();var a=k.getDataAttribute(this.element,"data-dedupekey");if(a===null)return null;var b=this.$13();if(b===null||b.length===0)return null;var c=b.length;while(--c>=0){var d=k.getDataAttribute(b[c],"data-dedupekey");if(d!==null&&a===d)break}return c+1};c.$13=function(){__p&&__p();var a=A("contentArea");if(a){var b="._5jmm";a=l.scry(a,b);return a.filter(function(a){return k.getDataAttribute(a,"data-dedupekey")})}else{b=A("m_newsfeed_stream");return b===null?null:b.getElementsByTagName("article")}};c.$14=function(){return 0};c.$8=function(){this.$14()&&(u.set(this.element,"background-color","#abab9a"),u.set(this.element,"outline","3px solid #abab9a"))};c.$10=function(){this.$14()&&(u.set(this.element,"background-color","#e4f70a"),u.set(this.element,"outline","3px solid #e4f70a"))};c.$11=function(){this.$14()&&(u.set(this.element,"background-color",null),u.set(this.element,"outline",null))};c.$9=function(){this.$14()&&(u.set(this.element,"background-color","#047515"),u.set(this.element,"outline","3px solid #047515"))};return a}();F(a,{visible:!0,hidden:!0,full_view:!0,viewability:!0,viewport_viewability:!0,viewability_debug:!0});e.exports=a}),null);
__d("VisibilityUnitType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FEED_UNIT:"feed_unit",VIEWPORT:"viewport"})}),null);
__d("ViewabilityDurationSegmentLogger",["Banzai","PercentVisible","ViewableImpressionTracker","VisibilityUnitType"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=8e3;a=function(){__p&&__p();a.logFromViewableImpressionTracker=function(b){var c=new a();c.subscribeToTrackerEvents(b)};function a(){this.$1=new Map(),this.$2=new Map(),this.$3=new Map(),this.$4=new Map(),this.$5=new Map()}var b=a.prototype;b.subscribeToTrackerEvents=function(a){a.addListener("viewability",this.onViewable.bind(this)),a.addListener("viewport_viewability",this.onViewport.bind(this)),a.addListener("hidden",this.onHidden.bind(this))};b.onViewable=function(a){__p&&__p();var b=a.id,c=a.percentVisible,d=Date.now(),e;switch(c){case h.VISIBLE_0_PCT:c=this.$1.get(b);!c?this.$6(a,h.VISIBLE_0_PCT,d,j.FEED_UNIT):this.$7(c,b,d);c=this.$2.get(b);c&&(e=this.$8(c,b,d,!0),this.$9(e,b));c=this.$4.get(b);c&&(e=this.$8(c,b,d,!0),this.$9(e,b));break;case h.VISIBLE_50_PCT:c=this.$1.get(b);!c?this.$6(a,h.VISIBLE_0_PCT,d,j.FEED_UNIT):this.$7(c,b,d);c=this.$2.get(b);!c?this.$6(a,h.VISIBLE_50_PCT,d,j.FEED_UNIT):this.$7(c,b,d);c=this.$4.get(b);c&&(e=this.$8(c,b,d,!0),this.$9(e,b));break;case h.VISIBLE_100_PCT:c=this.$1.get(b);!c?this.$6(a,h.VISIBLE_0_PCT,d,j.FEED_UNIT):this.$7(c,b,d);c=this.$2.get(b);!c?this.$6(a,h.VISIBLE_50_PCT,d,j.FEED_UNIT):this.$7(c,b,d);c=this.$4.get(b);!c?this.$6(a,h.VISIBLE_100_PCT,d,j.FEED_UNIT):this.$7(c,b,d);break}};b.onViewport=function(a){__p&&__p();var b=a.id,c=a.percentVisible,d=Date.now(),e;switch(c){case h.VISIBLE_0_PCT:c=this.$3.get(b);c&&(e=this.$8(c,b,d,!0),this.$9(e,b));c=this.$5.get(b);c&&(e=this.$8(c,b,d,!0),this.$9(e,b));break;case h.VISIBLE_50_PCT:c=this.$3.get(b);!c?this.$6(a,h.VISIBLE_50_PCT,d,j.VIEWPORT):this.$7(c,b,d);c=this.$5.get(b);c&&(e=this.$8(c,b,d,!0),this.$9(e,b));break;case h.VISIBLE_100_PCT:c=this.$3.get(b);!c?this.$6(a,h.VISIBLE_50_PCT,d,j.VIEWPORT):this.$7(c,b,d);c=this.$5.get(b);!c?this.$6(a,h.VISIBLE_100_PCT,d,j.VIEWPORT):this.$7(c,b,d);break}};b.onHidden=function(a){a=a.id;var b=Date.now(),c=this.$1.get(a),d=this.$2.get(a),e=this.$3.get(a),f=this.$4.get(a),g=this.$5.get(a);c&&this.$9(this.$8(c,a,b,!0),a);d&&this.$9(this.$8(d,a,b,!0),a);e&&this.$9(this.$8(e,a,b,!0),a);f&&this.$9(this.$8(f,a,b,!0),a);g&&this.$9(this.$8(g,a,b,!0),a)};b.$6=function(a,b,c,d){c={token:a.token,startedTrackingTS:c,percentVisible:b,visibilityUnit:d,intervalMs:0,cumulativeMs:0,segmentIdx:0};switch(b){case h.VISIBLE_0_PCT:this.$1.set(a.id,c);break;case h.VISIBLE_50_PCT:d===j.FEED_UNIT?this.$2.set(a.id,c):this.$3.set(a.id,c);break;case h.VISIBLE_100_PCT:d===j.FEED_UNIT?this.$4.set(a.id,c):this.$5.set(a.id,c);break}};b.$8=function(a,b,c,d){__p&&__p();c=c-a.startedTrackingTS;var e=c-a.cumulativeMs,f=a.percentVisible;e={token:a.token,startedTrackingTS:a.startedTrackingTS,percentVisible:f,visibilityUnit:a.visibilityUnit,intervalMs:e,cumulativeMs:c,segmentIdx:++a.segmentIdx};d&&(e.duration=c);switch(f){case h.VISIBLE_0_PCT:this.$1.set(b,e);break;case h.VISIBLE_50_PCT:a.visibilityUnit===j.FEED_UNIT?this.$2.set(b,e):this.$3.set(b,e);break;case h.VISIBLE_100_PCT:a.visibilityUnit===j.FEED_UNIT?this.$4.set(b,e):this.$5.set(b,e);break}return e};b.$7=function(a,b,c){var d=a.intervalMs,e=c-a.startedTrackingTS-a.cumulativeMs;if(this.$10(d,e)){d=this.$8(a,b,c,!1);g.post("xtrackable:viewability",d,g.VITAL)}};b.$10=function(a,b){if(a>=k)return!1;if(a==0)return!0;if(a<1e3)return b>=1e3;a=a/1e3;b=b/1e3;return b>=2*a};b.$9=function(a,b){var c=a.percentVisible;switch(c){case h.VISIBLE_0_PCT:this.$1["delete"](b);break;case h.VISIBLE_50_PCT:a.visibilityUnit===j.FEED_UNIT?this.$2["delete"](b):this.$3["delete"](b);break;case h.VISIBLE_100_PCT:a.visibilityUnit===j.FEED_UNIT?this.$4["delete"](b):this.$5["delete"](b);break}g.post("xtrackable:viewability",a,g.VITAL)};return a}();e.exports=a}),null);
__d("ViewableImpressionDurationLogger",["Banzai"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();a.logFromViewableImpressionTracker=function(b){var c=new a();c.subscribeToTrackerEvents(b)};function a(){this.$1=new Map()}var b=a.prototype;b.subscribeToTrackerEvents=function(a){a.addListener("visible",this.onElementVisible.bind(this)),a.addListener("hidden",this.onElementHidden.bind(this))};b.onElementVisible=function(a){if(this.$1.get(a.id))return null;var b={token:a.token,startedTrackingTS:this.getTimeNow()};this.$1.set(a.id,b);return b};b.onElementHidden=function(a){var b=this.$1.get(a.id);if(!b)return!1;b.trackingDuration=this.getTimeNow()-b.startedTrackingTS;return this.sendLog(a.id)};b.sendLog=function(a){var b=this.$1.get(a);if(!b||!b.trackingDuration)return!1;g.post("xtrackable:duration",b);this.$1["delete"](a);return!0};b.getTimeNow=function(){return parseFloat((Date.now()/1e3).toFixed(2))};return a}();e.exports=a}),null);
__d("ViewableImpressionHeatmapLogger",["Banzai"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();a.logFromViewableImpressionTracker=function(b,c){c=new a(c);c.subscribeToTrackerEvents(b)};function a(a){this.loggingDurationMS=a,this.trackingEntries={}}var b=a.prototype;b.subscribeToTrackerEvents=function(a){this.visibleSubscription=a.addListener("visible",this.onElementVisible,this),this.hiddenSubscription=a.addListener("hidden",this.onElementHidden,this)};b.onElementVisible=function(a){var b=this.getCurrentTimestamp(),c=this.trackingEntries[a.id];c||(c=this.createTrackingEntry(a),this.beginTracking(a.id,c),b=c.startedTrackingTS);c.viewportProgressEvents.push({timestamp:b,percentInViewport:a.percentInViewport.toFixed(2)})};b.onElementHidden=function(a){var b=this.getCurrentTimestamp();a=this.trackingEntries[a.id];if(!a)return;a.viewportProgressEvents.push({timestamp:b,percentInViewport:0})};b.onTrackingCompleted=function(a){var b=this.trackingEntries[a];b.viewportProgressEvents.push({timestamp:this.getCurrentTimestamp(),percentInViewport:b.tracker.getPercentInViewport().toFixed(2)});this.$1()&&this.$2(a,b);this.logToServer(b);delete this.trackingEntries[a]};b.logToServer=function(a){a=a;delete a.tracker;g.post("xtrackable:heatmap",a)};b.beginTracking=function(a,b){var c=this;this.trackingEntries[a]=b;setTimeout(function(){return c.onTrackingCompleted(a)},this.loggingDurationMS)};b.createTrackingEntry=function(a){return{tracker:a.tracker,token:a.token,startedTrackingTS:this.getCurrentTimestamp(),viewportProgressEvents:[]}};b.getCurrentTimestamp=function(){return(Date.now()/1e3).toFixed(2)};b.$1=function(){return 0};b.$2=function(a,b){var c="Completed tracking for id "+a+" token="+b.token+" startedTrackingTS="+b.startedTrackingTS+"\n";b.viewportProgressEvents.forEach(function(a){c+="% in view: "+a.percentInViewport+" timestamp="+a.timestamp+"\n"})};return a}();e.exports=a}),null);
__d("getContextualParent",["ge"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){__p&&__p();b===void 0&&(b=!1);var c=!1;a=a;do{if(a instanceof Element){var d=a.getAttribute("data-ownerid");if(d){a=g(d);c=!0;continue}}a=a.parentNode}while(b&&a&&!c);return a}e.exports=a}),null);
__d("collectDataAttributes",["DataAttributeUtils","getContextualParent"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i="normal";function a(a,b,c){__p&&__p();var d={},e=[],f=b.length,j;for(j=0;j<f;++j)d[b[j]]={},e.push("data-"+b[j]);if(c){d[i]={};for(j=0;j<(c||[]).length;++j)e.push(c[j])}c={tn:"","tn-debug":","};a=a;while(a){if(a.getAttribute)for(j=0;j<e.length;++j){var k=e[j],l=g.getDataAttribute(a,k);if(l){if(j>=f){d[i][k]===void 0&&(d[i][k]=l);continue}k=JSON.parse(l);for(var m in k)c[m]!==void 0?(d[b[j]][m]===void 0&&(d[b[j]][m]=[]),d[b[j]][m].push(k[m])):d[b[j]][m]===void 0&&(d[b[j]][m]=k[m])}}a=h(a)}for(var n in d)for(var o in c)d[n][o]!==void 0&&(d[n][o]=d[n][o].join(c[o]));return d}e.exports=a}),null);
__d("VisibilityTracking",["Banzai","BrowseClientEventLogger","DataAttributeUtils","ErrorUtils","ScriptPath","SubscriptionsHandler","Visibility","VisibilityTrackingHelper","collectDataAttributes","getElementPosition","gkx","pageID","throttle"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();var t="visibility_tracking",u="[data-vistracking]",v=500,w=50,x=50,y=50,z=50,A=0;a=function(){"use strict";__p&&__p();function a(a){__p&&__p();var b=this;a=a||{};if(!a.bypass_banzai_check&&!g.isEnabled(t))return;this.visibleElementInfo={};this.getDataFromConfig(a);m.addListener(m.VISIBLE,j.guard(function(){return b.fireEvent("browser")},"VisibilityTracking:visible",this));m.addListener(m.HIDDEN,j.guard(function(){return b.clearAllVisibleElements("browser")},"VisibilityTracking:hidden",this));k.subscribe(j.guard(function(){return b.updateVisibleElements()},"VisibilityTracking:scriptPath",this));g.subscribe(g.SHUTDOWN,j.guard(function(){return b.onUnload()},"VisibilityTracking:banzaiShutdown",this));this.fireEventCallback=s.acrossTransitions(j.guard(function(a){return b.fireEvent(a)},"VisibilityTracking:fireEventCallback",this),this.timeout,this);this.listeners=new l();n.getEventListeners(function(){return b.fireEventCallback()}).forEach(function(a){this.listeners.addSubscriptions(a)},this);this.extraInit&&j.applyWithGuard(this.extraInit.bind(this))}var b=a.prototype;b.getDataFromConfig=function(a){this.config=a,this.root=a.root||document.documentElement,this.selector=a.selector||u,this.visibleEventCallBack=a.visibleEventCallBack||function(){},this.timeout=a.timeout!==void 0?a.timeout:v,this.minOffsetVisibleFromBottom=a.minOffsetVisibleFromBottom!==void 0?a.minOffsetVisibleFromBottom:w,this.minOffsetVisibleFromTop=a.minOffsetVisibleFromTop!==void 0?a.minOffsetVisibleFromTop:x,this.minOffsetVisibleFromLeft=a.minOffsetVisibleFromLeft!==void 0?a.minOffsetVisibleFromLeft:y,this.minOffsetVisibleFromRight=a.minOffsetVisibleFromRight!==void 0?a.minOffsetVisibleFromRight:z,this.handleAllHiddenEvents=a.handleAllHiddenEvents!==void 0?a.handleAllHiddenEvents:!1,this.handleAllVisibleEvents=a.handleAllVisibleEvents!==void 0?a.handleAllVisibleEvents:!1,this.cacheTrackedElements=a.cacheTrackedElements!==void 0?a.cacheTrackedElements:!1};b.getAllTrackedElements=function(){__p&&__p();if(!this.allTrackedElements){this.allTrackedElements={};var a=[];this.config.is_xtrackable?a=i.getXTrackableElements():this.root&&this.root.querySelectorAll&&(a=this.root.querySelectorAll(this.selector));for(var b=0;b<a.length;b++){var c=this.getElementID(a[b]);this.allTrackedElements[c.toString()]=a[b]}}return this.allTrackedElements};b.refreshAllTrackedElements=function(){delete this.allTrackedElements;return this.getAllTrackedElements()};b.getDataToLog=function(a){a=Object.assign(o(a,["gt"]).gt,{client_time:Date.now()/1e3,time_spent_id:r,script_path:k.getScriptPath()});return a};b.getElementID=function(a){var b=a.$1;if(b)return b;a.$1=++A;return A};b.sendDataToLog=function(a){h.maybeLogVisiblityEvent(a),g.post(t,a)};b.isInstreamAdStoryElement=function(a){return!1};b.fireEvent=function(a){a===void 0&&(a="default");var b=this.cacheTrackedElements?this.allTrackedElements:this.refreshAllTrackedElements();for(var c in b){var d=b[c],e=n.getViewportInfo();e=this.isVisible(d,e);!e&&(c in this.visibleElementInfo||this.handleAllHiddenEvents)?this.handleEvent(d,{name:"hidden",cause:a}):e&&(!(c in this.visibleElementInfo)||this.handleAllVisibleEvents)&&this.handleEvent(d,{name:"visible",cause:a})}this.clearUntrackedVisibleElements()};b.isVisible=function(a,b){if(a==null)return!1;if(q("820050")&&n.isSnippetFlyoutVisible())return!1;a=p(a);return!!(a.x||a.y||a.width||a.height)&&a.y+a.height>=this.minOffsetVisibleFromTop&&a.y<=b.height-this.minOffsetVisibleFromBottom&&a.x+a.width>=this.minOffsetVisibleFromLeft&&a.x<=b.width-this.minOffsetVisibleFromRight};b.handleEvent=function(a,b){__p&&__p();var c=this.getElementID(a).toString(),d=this.getDataToLog(a),e;if(b.name==="visible"){var f=Math.floor(Date.now()/1e3);e=r.concat(":",f.toString(),":",this.getElementID(a).toString());this.visibleElementInfo[c]={visibility_id:e,elem:a}}else if(b.name==="hidden"){c in this.visibleElementInfo&&(e=this.visibleElementInfo[c].visibility_id,delete this.visibleElementInfo[c]);if(b.cause==="browser")return}this.sendDataToLog(Object.assign(d,{event:b.name,visibility_id:e}))};b.clearUntrackedVisibleElements=function(){var a=this.getAllTrackedElements();for(var b in this.visibleElementInfo)if(!(b in a)){var c=this.visibleElementInfo[b];c.elem&&this.handleEvent(c.elem,{name:"hidden",cause:"removed"})}};b.clearAllVisibleElements=function(a){a===void 0&&(a="default");var b=this.getAllTrackedElements();for(var c in b)c in this.visibleElementInfo&&this.handleEvent(b[c],{name:"hidden",cause:a});this.clearUntrackedVisibleElements()};b.updateVisibleElements=function(){this.clearAllVisibleElements(),this.fireEvent()};b.refreshAndFireEvent=function(a){this.refreshAllTrackedElements(),this.fireEventCallback(a)};b.onUnload=function(){this.clearAllVisibleElements(),this.listeners&&(this.listeners.release(),this.listeners=null),this.extraCleanup&&j.applyWithGuard(this.extraCleanup.bind(this))};a.init=function(b){return new a(b)};return a}();e.exports=a}),null);
__d("ViewableImpressionEventHandler",["DataAttributeUtils","FullViewLogger","ViewabilityDurationSegmentLogger","ViewableImpressionDurationLogger","ViewableImpressionHeatmapLogger","ViewableImpressionTracker","VisibilityTracking"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n=1;a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.extraInit=function(){this.impressionTrackers={}};c.getDataFromConfig=function(b){a.prototype.getDataFromConfig.call(this,b),this.doHeatmapLogging=b.doHeatmapLogging,this.heatmapLoggingDurationMS=b.heatmapLoggingDurationMS,b.impressionURL=b.impressionURL!==void 0?b.impressionURL:"/xti.php",b.nonviewableEnabled=b.nonviewableEnabled!==void 0?b.nonviewableEnabled:!1};c.getImpressionTracking=function(a){__p&&__p();var b=this.getElementID(a),c=this.impressionTrackers[b];if(!c){var d=babelHelpers["extends"]({},this.getConfigFromElement(a),this.config);c=new l(b,a,d);this.impressionTrackers[b]=c;d.log_impression_duration&&j.logFromViewableImpressionTracker(c);this.doHeatmapLogging&&k.logFromViewableImpressionTracker(c,this.heatmapLoggingDurationMS);d.should_log_full_views&&h.logFromViewableImpressionTracker(c);d.should_log_viewability_duration&&i.logFromViewableImpressionTracker(c)}return c};c.handleEvent=function(a,b){var c=this.getImpressionTracking(a);if(!c)return;if(b.name==="visible")c.onVisible(b),this.visibleElementInfo[c.getID()]||(this.visibleElementInfo[c.getID()]={elem:a});else if(b.name==="hidden"){a=c.getConfig();b.cause==="default"||a.log_visibility_hidden_when_browser_inactive&&b.cause==="browser"?(c.onHidden(),delete this.visibleElementInfo[c.getID()]):b.cause==="removed"&&(c.onRemoved(),delete this.visibleElementInfo[c.getID()],delete this.impressionTrackers[c.getID()])}};c.isInstreamAdStoryElement=function(a){a=babelHelpers["extends"]({},this.getConfigFromElement(a),this.config);return!!a.is_instream_story};c.getConfigFromElement=function(a){return JSON.parse(g.getDataAttribute(a,"data-xt-vimp"))};c.getElementID=function(a){a.getAttribute("id")||a.setAttribute("id","xt_uniq_"+n++);return a.getAttribute("id")};return b}(m);e.exports=a}),null);
__d("MViewableImpressionTracking",["ErrorUtils","MViewableImpressionConfig","Stratcom","ViewableImpressionEventHandler"],(function(a,b,c,d,e,f,g,h,i,j){a={init:function(){j.instance===void 0&&(j.instance=new j(h),i.listen(["m:ajax:complete","m:feed:new-stories-loaded","m:more_item_automatic:items_loaded","m:onload","m-timeline-section-loader:complete","m-timeline-section-loader:init","m:profile:teaser-list:expanded","m:stories:card-hidden","m:stories:card-loaded","m:viewport:update-complete"],null,g.guard(function(){if(j.instance===void 0){i.removeCurrentListener();return}j.instance.refreshAndFireEvent()},"MViewableImpressionTracking")),i.listen("m:page:unload",null,g.guard(function(){delete j.instance,j.instance=void 0},"MViewableImpressionTracking")))}};e.exports=a}),null);
__d("Tooltip",[],(function(a,b,c,d,e,f){a={propsFor:function(a){return}};e.exports=a}),null);
__d("MSnowflakeLink",["DataAttributeUtils","DOM","MLinkHack","MModalDialog","Stratcom","URI","destroyOnUnload"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){__p&&__p();var b=this;this.$1=!1;this.$2=a.node;this.$3=a.permalink;this.$4=a.setToken;this.$5=a.targetPhoto;this.$6=h.listen(a.node,"click",null,this.onClick.bind(this));m(function(){return b.$6.remove()});this.$7()}var b=a.prototype;b.getFeedTrackingOwnerID=function(){var a=g.getClickTrackingParent(this.$2);return a&&a.id};b.getPermalinkURI=function(){return new l(this.$3).addQueryData("photo_id",this.$5)};b.getModalDialogURI=function(){return new l(this.$2.getAttribute("href")).addQueryData("cached_data",this.$1).addQueryData("ftid",this.getFeedTrackingOwnerID())};b.onClick=function(a){i.remove(this.$2),j.openWithPermalinkURI(this.getModalDialogURI().toString(),this.getPermalinkURI()),a.prevent()};b.$7=function(){__p&&__p();var a=this;if(!this.$4){this.$1=!0;return}var b=k.listen("m:photosetstore:update",null,function(c){c=(c.getData()||{}).set_token;if(!b||c!=a.$4)return;a.$1=!0;b.remove();b=null});m(function(){return b&&b.remove()})};return a}();e.exports=a}),null);
__d("MShareAngoraAttachment",["Stratcom"],(function(a,b,c,d,e,f,g){__p&&__p();var h=!1;a=function(a){if(h)return;h=!0;window.addEventListener("error",function(a){if(a.target.nodeName=="IMG"){for(var a=a.target;a!=document.body&&!g.hasSigil(a,"shareAngoraAttachmentMedia");a=a.parentNode);a!=document.body&&(a.style.display="none")}},!0)};f.registerDeadImageListener=a}),null);
__d("MTaggingCounterEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GEO_PANEL_LOAD:"geo_panel_load",GEO_PANEL_ACCEPT:"geo_panel_accept",GEO_PANEL_DENY:"geo_panel_deny",GEO_PANEL_FAIL:"geo_panel_fail",GEO_PANEL_SUCCESS:"geo_panel_success",GEO_POPUP_LOAD:"geo_popup_load",GEO_POPUP_FAIL:"geo_popup_fail",GEO_POPUP_SUCCESS:"geo_popup_success"})}),null);
__d("ViewerLocationSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AURA:"aura",GET_PARAM:"get_param",INTERN_TOOL:"intern_tool",LAST_LOCATION:"last_location",LOGIN:"login",PLACEBOOK:"placebook",PLACES_FQL:"places_fql",TEST:"test",MSITE_LOCATION_PROMPT:"msite_location_prompt",MSITE_PERSISTENT_LOCATION:"msite_persistent_location",MSITE_PLACES:"msite_places",MSITE_UNKNOWN:"msite_unknown",CORE_GQL_MUTATION:"core_graphql_mutation",MULTIFEED_PARAM:"multifeed_param",LOCATION_PROFILE_FRAMES:"location_profile_frames",PR_LOCATION_EFFECTS:"pr_location_effects",MESSENGER_LIVE_LOCATION:"messenger_live_location",VISIT_STATE:"visit_state",WIFI_FINGERPRINT:"wifi_fingerprint",INFERRED_WIFI:"inferred_wifi",INSTA_GEO_IMPLICIT:"insta_geo_implicit",AURA_TOO_FAST:"aura_too_fast",AURA_TOO_OLD:"aura_old",AURA_FAILED_MGI:"aura_failed_mgi",SEARCH:"search"})}),null);
__d("XPlacesUpdateLocationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/places/location_update/",{json_location:{type:"String"},source:{type:"Enum",defaultValue:"msite_unknown",enumType:1}})}),null);
__d("MLocationPrompt",["DOM","MRequest","MTaggingCounter","MTaggingCounterEvent","Stratcom","ViewerLocationSource","WebStorage","XPlacesUpdateLocationController"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=["latitude","longitude","accuracy","altitude","altitudeAccuracy","heading","speed"],p={enableHighAccuracy:!0,timeout:6e4,maximumAge:3e5},q=6e4;a=function(){"use strict";__p&&__p();a.init=function(b,c,d,e){return new a(b,c,d,e)};a.getCoords=function(){return a.coords};a.isLocationAvailable=function(){return a.locationAvailable};function a(b,c,d,e){this.lastUpdateTime=0;this.container=b;this.question=c;this.loading=d;this.errored=e;b=m.getLocalStorage();b&&b.getItem(a.GEOLOCATION_KEY)==="1"?this.$1():(a.locationAvailable=!1,g.show(this.question),g.hide(this.loading),g.hide(this.errored),g.show(this.container),k.invoke("m:jewel-set:notifications-jewel:refresh-flyout"),i.logEvent(j.GEO_PANEL_LOAD));this.listeners=[k.listen("click","accept-location",this.$2.bind(this)),k.listen("click","deny-location",this.$3.bind(this)),k.listen("m:page:unload",null,this.$4.bind(this))]}var b=a.prototype;b.clearWatch=function(){if(!this.watchID)return;navigator.geolocation.clearWatch(this.watchID);this.watchID=null};b.$2=function(){i.logEvent(j.GEO_PANEL_ACCEPT),this.$1(!0)};b.$1=function(b){__p&&__p();a.locationAvailable=!0;var c=m.getLocalStorage();c&&c.setItem(a.GEOLOCATION_KEY,"1");g.show(this.container);g.hide(this.question);g.show(this.loading);g.hide(this.errored);k.invoke("m:jewel-set:notifications-jewel:refresh-flyout");var d=setTimeout(this.$5,p.timeout);this.watchID=navigator.geolocation.watchPosition(function(a){b&&i.logEvent(j.GEO_PANEL_SUCCESS),clearTimeout(d),this.$6(a)}.bind(this),function(a){b&&i.logEvent(j.GEO_PANEL_FAIL),clearTimeout(d),this.$5(a)}.bind(this),p);k.invoke(a.STRATCOM_ACCEPT)};b.$3=function(){a.locationAvailable=!1,i.logEvent(j.GEO_PANEL_DENY),g.hide(this.container),k.invoke("m:jewel-set:notifications-jewel:refresh-flyout"),k.invoke(a.STRATCOM_DENY)};b.$6=function(b){__p&&__p();a.locationAvailable=!0;if(b){var c={},d;for(var e=0;e<o.length;e++)d=o[e],b.coords[d]&&(c[d]=b.coords[d]);b.timestamp&&(c.timestamp=b.timestamp/1e3);this.$7(JSON.stringify(c));g.hide(this.container);a.coords=c;k.invoke("m:jewel-set:notifications-jewel:refresh-flyout");k.invoke(a.STRATCOM_UPDATE,null,{position:b})}};b.$5=function(b){__p&&__p();a.locationAvailable=!1;this.clearWatch();var c=m.getLocalStorage();c&&c.setItem(a.GEOLOCATION_KEY,"0");g.show(this.container);g.hide(this.question);g.hide(this.loading);g.show(this.errored);k.invoke("m:jewel-set:notifications-jewel:refresh-flyout");k.invoke(a.STRATCOM_FAIL,null,{error:b});i.logEvent(j.GEO_PANEL_FAIL)};b.$7=function(a){var b=Date.now();if(b-this.lastUpdateTime>q){this.lastUpdateTime=b;b=n.getURIBuilder().setString("json_location",a).setEnum("source",l.MSITE_LOCATION_PROMPT).getURI();new h(b).setMethod("POST").send()}};b.$4=function(){if(!this.listeners)return;for(var a=0;a<this.listeners.length;a++)this.listeners[a].remove();this.listeners=[]};return a}();Object.assign(a,{STRATCOM_ACCEPT:"MLocationPrompt/accept",STRATCOM_DENY:"MLocationPrompt/deny",STRATCOM_UPDATE:"MLocationPrompt/update",STRATCOM_FAIL:"MLocationPrompt/fail",GEOLOCATION_KEY:"authorizeGeolocation",locationAvailable:void 0});e.exports=a}),null);
__d("MMoreItemAutomatic",["MLocationPrompt","MPageCache","MPageController","MPageControllerPath","MRequest","MRequestGateway","MRequestTypes","MResponseData","MStopNGo","MURI","MViewport","Stratcom","Vector","qex","setTimeout","throttle"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){__p&&__p();var b=this;this.$27=function(){b.$4?b.$28():!b.$5&&!b.$17&&b.$29()};this.$3=a.href;this.$20=a.sendGeolocation;this.$15=a.proximity_pages||7;this.$8=a.logger_id;this.$9=a.logger_name;this.$7=a.load_first_immediately;this.$18=a.retryOnError;this.$1=a.addToCache;this.$2=a.alwaysProcess;this.$19=a.scrollPrefetchThrottleFreq||0;this.$4=a.insertWhileScrolling;this.$23=a.shouldCapRetries;this.$17=!1;this.$16=!0;this.$12=0;this.$11=!1;this.$5=!1;this.$21=0;this.$6=null;this.$10=null;this.$13=!1;this.$22=!1;this.$14=null;var c=document.getElementById(a.id);c?(this.$21=s.getPos(c).y,this.$10=c,this.$13=a.persist_on_reload,this.$24()):this.uninstall()}var b=a.prototype;b.isElementVisible=function(){__p&&__p();if(!this.$25())return!1;var a=this.$10;if(a&&"getBoundingClientRect"in a){var b=a.getBoundingClientRect(),c=b.width/10,d=b.height/10,e=b.left,f=b.right,g=b.top;b=b.bottom;var h=!1;while(!h&&e<=f&&g<=b){e=Math.round(e+c);g=Math.round(g+d);var i=document.elementFromPoint(e,g);h=a.contains(i)}i=h}else{c=s.getPos(a).y;d=c+s.getDim(a).y;e=q.getScrollTop();f=e+q.getUseableHeight();i=c<=f&&d>=e}return i};b.$26=function(){var a=this.$10;a&&(this.$21-q.getScrollTop()<0&&(r.invoke("m:more_item_automatic:items_visible",this.$8),this.uninstall()))};b.$28=function(){!this.$5?(this.$16=!0,this.isElementVisible()&&r.invoke("m:more_item_automatic:spinner_visible",this.$8,this.$9),!this.$17?this.$29():this.$30()):this.$26(),this.$22&&this.$31()};b.$31=function(){this.isElementVisible()&&(this.$22=!1,i.reload())};b.$32=function(){this.$5||(this.$16=!1)};b.$33=function(){!this.$17&&(this.$7||this.isElementVisible())&&(this.$34(),this.$7=!1)};b.$24=function(){!this.$17&&(this.$7||this.isElementVisible())&&(this.$34(),this.$7=!1),this.$6=[],this.$19>0&&this.$6.push(r.listen(["m:page:render:complete","scroll"],null,v.withBlocking(this.$27,this.$19,this))),this.$4||this.$6.push(o.listen("go",this.$28.bind(this)),o.listen("stop",this.$32.bind(this))),this.$6.push(r.listen("m:ajax:complete",null,this.$33.bind(this)))};b.$35=function(){var a=this.$10;if(a){var b=document;b=b.documentElement;if(b)return b.contains(a)}return!1};b.uninstall=function(){while(this.$6&&this.$6.length)this.$6.pop().remove();this.$17=!1;this.$14=null;this.$10=null;this.$13=!1;this.$22=!1};b.withinProximity=function(){var a=this.$10;return!!a&&s.getPos(a).y-q.getScrollTop()<q.getUseableHeight()*(1+this.$15)};b.$30=function(){var a=this.$14;a&&(this.$35()&&(a.process(),this.$1&&h.addCachedIUIResponse(j.getRequestPath(),a)),r.invoke("m:more_item_automatic:items_loaded",this.$8,this.$9),this.$5=!0)};b.$25=function(){var a=this.$10;return!a||!a.offsetHeight?!1:!0};b.$29=function(){(this.isElementVisible()||this.$25()&&q.getScrollTop()>100&&this.withinProximity())&&this.$34()};b.$34=function(){__p&&__p();var b=this,c=g.getCoords();this.$20&&c&&(this.$3=new p(this.$3).addQueryData("lat",c.latitude).addQueryData("long",c.longitude).toString());c=new k(new p(this.$3).toString());this.$2?c.setType(m.INDEPENDENT):c.setType(m.DEPENDENT);c.setAutoProcess(!1);var d=[],e=!1,f=function(){!e&&d.length&&(e=!0,d.shift().process())};if(this.$18){c.setTimeout(l.ERROR_TIMEOUT);c.setFinalizeUponError(!1);var h=0;this.$22=!1;c.listen("error",function(c,d){if(h>4&&b.$23){b.$22=!0;b.$31();return}u(function(){navigator.onLine&&(d.reset(),d.addData({is_retry:1}),d.sendAfterProcessing(),h++)},a.TRY_AGAIN_DELAY)})}c.listen("response",function(a){__p&&__p();a=new n(a);a.listen("complete",function(){e=!1,f()});if(a.isPagelet()){d.push(a);f();return}e=!0;this.$14=a;this.$16&&this.$30()}.bind(this));c.send();this.$17=!0};b.getPersistOnReload=function(){return this.$13};return a}();a.TRY_AGAIN_DELAY=1500;e.exports=a}),null);
__d("InitMMoreItemAutomatic",["MMoreItemAutomatic","Stratcom"],(function(a,b,c,d,e,f,g,h){var i;a=function(a){i||(i={},h.listen("m:page:loading",null,function(a){for(var b in i)i[b].getPersistOnReload()||(i[b].uninstall(),delete i[b])}));var b=a.id;i[b]&&i[b].uninstall();i[b]=new g(a)};f.main=a}),null);
__d("MMoreItemAutomaticLogger",["MarauderLogger","Stratcom"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(a,b){this._loggerName=a,this._loggerID=b,this._listeners=[h.listen("m:page:unload",null,this._pageUnload.bind(this)),h.listen("m:more_item_automatic:spinner_visible",null,this._onSpinnerVisible.bind(this)),h.listen("m:more_item_automatic:items_loaded",null,this._onItemsLoaded.bind(this)),h.listen("m:more_item_automatic:items_visible",null,this._onItemsVisible.bind(this))]}Object.assign(i.prototype,{_loggerName:"",_loggerID:"",_spinnerUnloaded:!1,_spinnerVisible:!1,_spinnerStartTime:null,_cleanup:function(){while(this._listeners&&this._listeners.length)this._listeners.pop().remove()},_pageUnload:function(){this._spinnerVisible&&(this._spinnerUnloaded=!0,this._logLoadingSpinnerTime(this._getTimeSpan(),!0)),this._cleanup()},_onSpinnerVisible:function(a){a.getPath()[0]===this._loggerID&&!this._spinnerVisible&&(this._spinnerVisible=!0,this._spinnerStartTime=Date.now())},_onItemsLoaded:function(a){a.getPath()[0]===this._loggerID&&!this._spinnerUnloaded&&(this._logLoadingSpinnerTime(this._getTimeSpan(),!1),this._spinnerVisible=!1,this._spinnerStartTime=null)},_onItemsVisible:function(a){a.getPath()[0]===this._loggerID&&this._logItemsVisible()},_getTimeSpan:function(){return this._spinnerVisible?Date.now()-this._spinnerStartTime:0},_logLoadingSpinnerTime:function(a,b){g.log("m_more_items_automatic_spinner_visible_time",void 0,{name:this._loggerName,id:this._loggerID,visible_time:a,spinner_unloaded:b})},_logItemsVisible:function(){g.log("m_more_items_automatic_fetched_items_visible",void 0,{name:this._loggerName,id:this._loggerID}),this._cleanup()}});i.init=function(a,b){new i(a,b)};e.exports=i}),null);