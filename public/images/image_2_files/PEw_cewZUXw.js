if (self.CavalryLogger) { CavalryLogger.start_js(["oH07Q"]); }

__d("XBookmarksFlyoutBodyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/bookmarks/flyout/body/",{id:{type:"String",required:!0}})}),null);
__d("MChromeTabsBootloader",["MJewels","MRequest","Stratcom","XBookmarksFlyoutBodyController"],(function(a,b,c,d,e,f,g,h,i,j){a={bootloadBookmarks:function(a){i.listen(["m:chrome:tab:show","m:jewel:flyout:open"],g.BOOKMARKS,function(){i.removeCurrentListener(),new h(j.getURIBuilder().setString("id",a).getURI()).send()})}};e.exports=a}),null);
__d("MAnimatedScroll",["MAnimator","MViewport","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=null,l=500;function m(a){a&&i(a);return null}function a(a,b){k=m(k);a=a.duration===null||a.duration===void 0?l:a.duration;var c=h.getScrollTop(),d=c;g.play(c,0,a,function(a){var b=g.easeInOutCubic((a-d)/c);b=Math.round((a-d)*b+d);d=a;h.scrollToY(b)});b&&(k=j(b,a))}b={scrollToTop:a};e.exports=b}),null);
__d("MStoriesProductionInfo",[],(function(a,b,c,d,e,f){"use strict";a={_uploadStatus:null,setUploadStatus:function(a){this._uploadStatus=a},getUploadStatus:function(){return this._uploadStatus}};e.exports=a}),null);
__d("XMStoriesProductionPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/preview/",{session_key:{type:"String"}})}),null);
__d("MStoriesCreation",["Promise","Bootloader","MPageController","MStoriesProductionInfo","MStoriesUploadStatus","UserAgent","WebFunnelLogger","XMStoriesProductionPreviewController","fbt","nullthrows","uuid"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();function r(a){return new g(function(b){var c=new FileReader();c.onload=function(a){return b(a.target.result)};c.readAsDataURL(a)})}a=function(){"use strict";__p&&__p();a.getChosenImage=function(){return a.$7?a.$7.$6():null};function a(b){__p&&__p();var c=this;this.$4=null;this.$5="";this.$8=function(a){__p&&__p();a=j.getUploadStatus();if(a===k.UPLOADING){h.loadModules(["MStoriesToast"],function(a){a.showDefaultToast(o._("Uploading Story"))},"MStoriesCreation");return}c.$5=q();new m("FBStoriesMTouchTrayProductionFunnelDefinition").markStart().setSessionKey(c.$5).setAction("Production item select").log();j.setUploadStatus(k.IDLE);c.$3.click()};var d=null,e=0,f=l.isBrowser("Firefox")&&l.isPlatform("Android");this.$2=b.item;this.$3=b.input;a.$7=this;this.$6=function(){return{URI:d,rotate:e}};this.$2.addEventListener("click",this.$8,!0);this.$3&&this.$3.addEventListener("change",function(a){__p&&__p();a=a.target.files;var b=null;for(var g=0;g<a.length;g++)if(a[g].type.match(/^image\//)){b=a[g];break}b!==null&&h.loadModules(["ImageExifRotation","promiseDone"],function(a,g){a.getRotation(b,function(a){e=a,f?g(r(p(b)),function(a){d=a,c.$9()}):(d=URL.createObjectURL(p(b)),c.$9())})},"MStoriesCreation")})}var b=a.prototype;b.$9=function(){new m("FBStoriesMTouchTrayProductionFunnelDefinition").setAction("Opening production preview").setSessionKey(this.$5).log();var a=n.getURIBuilder().setString("session_key",this.$5).getURI();i.load(a)};return a}();a.$7=null;e.exports=a}),null);
__d("StoriesQuickLogModule",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CARD_DELETION:13238332,FB_STORY_ADMIN_PAGE_SCROLL_PERF:13238334,FB_STORY_VIEWER_LIST_SCROLL_PERF:13238335,LWR_TAP_ANIMATION_TTI:13238316,LWR_TAP_ANIMATION_TTI_WWW:13238357,MEDIA_DISPLAY_TTI:13238280,NAV_LIST_LOAD_PAGINATION_TTI_WWW:13238355,OPEN_STORIES_REPLY_IN_BLUE_FROM_JEWEL_NOTIFICATION_TTRC:13238348,OPEN_STORIES_REPLY_IN_BLUE_FROM_PUSH_NOTIFICATION_TTRC:13238349,OPEN_STORIES_REPLY_IN_BLUE_TTRC:13238347,REPLY_BAR_TTI:13238307,ROW_COLD_START_TTI:13238277,ROW_REFRESH_TTI:13238279,STORIES_ERRORS:13238323,STORIES_TRAY_TTRC:13238320,STORIES_TTRC:13238319,STORY_VIEWER_BUCKET_TRANSITION_TTI_WWW:13238354,STORY_VIEWER_DEPTH_RESPONSIVENESS:13238321,STORY_VIEWER_LOAD_FIRST_TIME_WWW:13238314,STORY_VIEWER_LOAD_TTI:13238296,STORY_VIEWER_LOAD_TTI_V2_WWW:13238353,STORY_VIEWER_LOAD_TTI_WWW:13238313,STORY_VIEWER_RESPONSIVENESS:13238312,STORY_VIEWER_SHEET_INITIAL_LOAD_TTI:13238345,STORY_VIEWER_SHEET_INITIAL_LOAD_TTRC:13238346,STORY_VIEWER_SWIPE_FPS:13238308,STORY_VIEWER_THREAD_TRANSITION_TTI_WWW:13238356,STORY_VIEWER_TRANSITION_FPS:13238311,STORY_WARM_START_TTI:13238283,TRAY_COMPLETE_TTI:13238299,TRAY_LOAD_PAGINATION_TTI:13238297,TRAY_LOAD_TTI:13238293,TRAY_TTRC_WITH_IMAGES:13238325,VIEWER_FIRST_STORY_LOAD_TTI:13238273,VIEWER_NEXT_BUCKET_TTI:13238275,VIEWER_NEXT_STORY_TTI:13238274,VIEWER_SHEET_ENTRY_POINT_CONSISTENCY:13238365,VIEWER_SHEET_LOAD_TTI:13238298,VIEWER_SHEET_TTRC:13238306})}),null);
__d("MStoriesMediaLoaded",["Event","QuickPerformanceLogger","Run","StoriesQuickLogModule"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(){__p&&__p();a.getInstance=function(){this.$1||(this.$1=new a());return this.$1};function a(){var b=this;this.$2=[];this.$3=function(){b.$5(),a.$1=null};i.onLeave(this.$3)}a.init=function(b){a.getInstance().setup(b.photo)};var b=a.prototype;b.$4=function(){h.markerEnd(j.STORY_VIEWER_BUCKET_TRANSITION_TTI_WWW,"SUCCESS"),h.markerEnd(j.STORY_VIEWER_THREAD_TRANSITION_TTI_WWW,"SUCCESS"),h.markerEnd(j.STORY_VIEWER_LOAD_TTI_WWW,"SUCCESS")};b.setup=function(a){var b=this;this.$5();this.$2=[];a!=null&&(a instanceof HTMLImageElement&&a.complete?this.$4():this.$2.push(g.listen(a,"load",function(){b.$4()})))};b.$5=function(){this.$2.forEach(function(a){return a.remove()})};return a}();a.$1=null;e.exports=a}),null);
__d("MStoriesStratcomEvents",[],(function(a,b,c,d,e,f){"use strict";a={DELETE_BUCKET:"fb:stories:mobile:story:viewer:story:deleted",DELETE_THREAD:"fb:stories:mobile:story:viewer:delete:thread",MUTE_BUCKET:"fb:stories:mobile:story:viewer:story:muted",MEDIA_PAUSE:"m:stories:thread:media:pause",MEDIA_PAUSE_WITH_COVER:"m:stories:thread:media:pause:with:cover",MEDIA_PLAY:"m:stories:thread:media:play",NEXT_BUCKET:"fb:stories:mobile:story:viewer:nextBucket",NEXT_CARD:"fb:stories:mobile:story:viewer:nextCard",PREV_BUCKET:"fb:stories:mobile:story:viewer:prevBucket",THREAD_MODAL_HIDE:"m:stories:card:modal:hide",VIDEO_PLAY:"m:video:player:play",VIDEO_PLAYING:"m:video:player:playing",VIEWER_SHEET_HIDE:"m-stories-viewer-sheet-hide",PRODUCTION_PREVIEW_CONTROLS_HIDE:"m:stories:production:preview-controls:hide",PRODUCTION_PREVIEW_CONTROLS_SHOW:"m:stories:production:preview-controls:show",PRODUCTION_TEXT_CONTROLS_HIDE:"m:stories:production:text-controls:hide",PRODUCTION_TEXT_CONTROLS_SHOW:"m:stories:production:text-controls:show",PRODUCTION_TEXT_OVERLAY_REMOVE:"m:stories:production:text-overlay:remove",PRODUCTION_TEXT_OVERLAY_FOCUS:"m:stories:production:text-overlay:focus",SWIPE_LEFT:"m:stories:swipe:left",SWIPE_RIGHT:"m:stories:swipe:right",SWIPE_DOWN:"m:stories:swipe:down",SWIPE_UP:"m:stories:swipe:up",SWIPE_REPLY:"fb:stories:mobile:story:viewer:swipe:reply",TOAST_SHOWING:"m:stories:toast:showing",TOAST_HIDING:"m:stories:toast:hiding",UPLOAD_FAILED:"m:stories:upload:failed",UPLOAD_SUCCESS:"m:stories:upload:success",OVERLAY_INTERACTION_PAUSE:"m:stories:overlay-interaction:pause",OVERLAY_INTERACTION_PLAY:"m:stories:overlay-interaction:play",SET_BUCKET_IDS_USE_FOR_TESTING_ONLY:"m:stories:set-bucket-ids-use-for-testing-only"};e.exports=a}),null);
__d("MStoriesDOMUtils",["Bootloader","DOM"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={find:function(a,b,c){a=h.scry(a,b,c);if(a.length===0){g.loadModules(["FBLogger"],function(a){a("fbstories").mustfix("Failed to load dom element with tag %s and sigil %s",b,c||"")},"MStoriesDOMUtils");return null}return a[0]}};e.exports=a}),null);
__d("MStoriesGating",["MFBStoriesGatingConfig","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";a={genShouldShowTextOverlays:function(){return g.enableTextOverlayProduction},genShouldShowStoriesEffects:function(){return h("676799")},shouldShowOptimisticPreviews:function(){return h("676800")}};e.exports=a}),null);
__d("MArrays",[],(function(a,b,c,d,e,f){"use strict";e.exports={findPrefix:function(a,b){for(var c=0;c<a.length;c++)if(b.startsWith(a[c]))return!0;return!1}}}),null);
__d("MStoriesUIConstants",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={PROGRESS_BAR:{DEFAULT_TIMER_DURATION_IN_SEC:6,STORY_UPDATE_TICK_IN_SEC:.1},REDIRECT_DELAY_IN_MS:20,REFRESH_TIMEOUT_IN_MS:10*60*1e3,SEC_TO_MS:1e3,SWIPE_DISTANCE:80,SWIPE_DOWN_DISTANCE:150,CACHE_EXPIRATION_IN_MS:10*60*1e3,HIDE_HEADER_URLS:["/stories/view_tray","/stories/preview/"],UPLOAD_SUCCESSFUL:g._("Story Added"),UPLOAD_FAILED:g._("Unable to Add Story"),EFFECTS_LIST_FAILED:g._("Unable to load effects"),EFFECT_APPLY_FAILED:g._("Unable to apply effect")};e.exports=a}),null);
__d("MStoriesHideHeaderListener",["Bootloader","MArrays","MStoriesUIConstants","Stratcom","URI"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l="m:page:render:start";a={_hideHeaderListener:null,setup:function(){var a=this;if(this._hideHeaderListener)return;this._hideHeaderListener=j.listen(l,null,function(b){b=new k(b.getData().path);b=b.getPath();h.findPrefix(i.HIDE_HEADER_URLS,b)&&(g.loadModules(["MStoriesDisplayUtils"],function(a){a.toggleChromeBar(!1)},"MStoriesHideHeaderListener"),j.removeCurrentListener(),a._hideHeaderListener=null)})}};e.exports=a}),null);
__d("MStoriesTrayInfo",[],(function(a,b,c,d,e,f){"use strict";a={_trayBucketIDs:{},_trayNeedsRefresh:!1,setTrayBucketIDs:function(a){var b=a.key==null?"top_of_feed":a.key;this._trayBucketIDs[b]=a.bucketIDs},getTrayBucketIDs:function(a){return a==null?this._trayBucketIDs.top_of_feed:this._trayBucketIDs[a]},setTrayNeedsRefresh:function(a){this._trayNeedsRefresh=a},getTrayNeedsRefresh:function(){return this._trayNeedsRefresh}};e.exports=a}),null);
__d("MFeedRefresh",["Event","MAnimatedScroll","MHome","MPageController","MViewport","Stratcom","SubscriptionsHandler","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();var p="/home.php",q=!1,r=!1,s=new m(),t=null,u=null,v=0,w=!1,x=500;function y(a){k.scrollToTop(),j.forceLoad(a)}function z(a){var b=p,c=!1;a&&(a.feedPath!==null&&a.feedPath!==void 0&&(b=a.feedPath),c=!!a.animate);if(c&&a){c=a.animationDuration===null||a.animationDuration===void 0?x:a.animationDuration;h.scrollToTop({duration:c},function(){y(b)})}else y(b)}function A(){v=0,t&&(n(t),t=null)}function B(){A(),r&&(s.release(),s.engage())}function C(a){__p&&__p();if(!i.isHome())return!1;var b=!0;if(a&&v&&u!==null){a=Date.now()-v;b=a>=u}if(!b)return!1;B();z();return!0}function D(){A(),v=Date.now(),t=o(function(){C(!1)},u)}function E(){var a=C(!0);a||D()}function F(){B();var a=i.isHome();if(!a)return;D();r&&(s.addSubscriptions(g.listen(document,"touchstart",E,!0)),w&&s.addSubscriptions(g.listen(document,"mousedown",E,!0)))}function G(a,b){b===void 0&&(b=!1);if(a<=0)return;u=a*60*1e3;r=b;l.listen("history:change",null,F);F()}a={init:function(a){if(q)return;G(a.intervalMinutes,a.resetOnTouch);q=!0},reloadFeed:z,reloadFeedIfNeeded:C};e.exports=a}),null);
__d("Time",[],(function(a,b,c,d,e,f){a={getGMTOffset:function(a){var b=new Date(),c=b.getTimezoneOffset()/30;b=b.getTime()/1e3;a=Math.round((a-b)/1800);b=Math.round(c+a)%48;b>24?b-=Math.ceil(b/48)*48:b<-28&&(b+=Math.ceil(b/-48)*48);return b*30}};e.exports=a}),null);
__d("TimezoneAutoset",["MRequest","Time"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;a=function(a){if(i)return;i=!0;if(!a.time||a.offset===void 0)return;var b=-h.getGMTOffset(a.time);(a.forceUpdate||b!=a.offset)&&new g(a.uri).setMethod("POST").setData({offset:b,is_forced:a.forceUpdate}).send()};f.main=a}),null);
__d("MFBStoriesTrayType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CIRCULAR:"circular",FBLITE_WITH_PROFILE_POG:"fblite_with_profile_pog",MOBILE_THREE_BY_ONE:"mobile_three_by_one"})}),null);
__d("MStoriesID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LOADING_SCREEN:"m-stories-viewer-thread-loading-spinner",PRIVACY_BLACKLIST_DIV:"m-stories-privacy-selector-blacklist",PRODUCTION_ADD_ITEM_DIV:"m-stories-add-item",PRODUCTION_ADD_ITEM_POG:"m-stories-add-item-pog",PRODUCTION_OWNER_ITEM_DIV:"m-stories-owner-bucket",PRODUCTION_OWNER_ITEM_POG:"m-stories-owner-bucket-pog",PRODUCTION_INPUT:"m-stories-production-input",PRODUCTION_ROOT:"m-stories-production-root",TRAY_DIV:"story_tray",PRODUCTION_COLOR_PICKER_PREFIX:"color-picker-",ARCHIVE_INTRO_DIALOG_BOX:"m-stories-archive-intro-dialog-box",PRODUCTION_EFFECTS_PREFIX:"effect-",UNSEEN_INDICATOR_SPAN:"m-stories-unseen-indicator",VIEWER_ANCHOR:"m-stories-viewer-anchor",VIEWER_SHEET_ROOT:"m-stories-viewer-sheet-root"})}),null);