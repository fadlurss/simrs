if (self.CavalryLogger) { CavalryLogger.start_js(["OCLPS"]); }

__d("MAsyncNavigationTrackerTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var b=a.prototype;b.log=function(){h.log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,g.BASIC)};b.logVital=function(){h.log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,g.VITAL)};b.logImmediately=function(){h.log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,{signal:!0})};b.clear=function(){this.$1={};return this};b.getData=function(){return babelHelpers["extends"]({},this.$1)};b.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.setEventName=function(a){this.$1.event_name=a;return this};b.setEventSpecificDetails=function(a){this.$1.event_specific_details=h.serializeMap(a);return this};b.setNavigationID=function(a){this.$1.navigation_id=a;return this};b.setPath=function(a){this.$1.path=a;return this};b.setSessionID=function(a){this.$1.session_id=a;return this};b.setSourcePath=function(a){this.$1.source_path=a;return this};b.setSourceTopView=function(a){this.$1.source_top_view=a;return this};b.setTime=function(a){this.$1.time=a;return this};b.setTimeSinceNavStart=function(a){this.$1.time_since_nav_start=a;return this};b.setTimeSinceSessionStart=function(a){this.$1.time_since_session_start=a;return this};b.setVC=function(a){this.$1.vc=a;return this};b.setWeight=function(a){this.$1.weight=a;return this};return a}();b={event_name:!0,event_specific_details:!0,navigation_id:!0,path:!0,session_id:!0,source_path:!0,source_top_view:!0,time:!0,time_since_nav_start:!0,time_since_session_start:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MPageNavigationTracking",["EventListener","JavelinHistory","MAsyncNavigationTrackerTypedLogger","MFullPageLoadState","NavigationQuickLogModule","QuickPerformanceLogger","Stratcom","URI","performanceAbsoluteNow","performanceNavigationStart","setIntervalAcrossTransitions","uuid"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s=1e3,t=r(),u=0,v=null,w=null;function a(){m.listen("m:page:load-start",null,y),m.listen("m:page:render:complete",null,C),m.listen("m:history:change",null,z),m.listen("m:page:error",null,B),m.listen(["go","gouri"],null,F),g.listen(window,"blur",D),g.listen(window,"beforeunload",E)}function x(){v=null,window.clearInterval(w),w=null}function y(a){__p&&__p();a=a.getData();var b=a.targetPath,c=a.previousPath,d=a.previousTopView,e=a.prefetchState;e=e===void 0?null:e;var f=a.cacheType;f=f===void 0?null:f;a=a.isFromHistory;a=a===void 0?!1:a;b=I(b);c=I(c);d=d;if(b==null)return;w=q(function(){G("heartbeat")},s);A(b,a);var g=++u;v={id:g,path:b,sourcePath:c,sourceTopView:d,startTimeAbsolute:o(),prefetchState:e,cacheType:f,navigationType:a?"history":null};l.markerStart(k.ASYNC_NAVIGATION_MTOUCH,g);H(g,"sessionID",t);H(g,"path",b);H(g,"sourcePath",c);H(g,"sourceTopView",d);G("page_load_start",null,!1,{fullPageLoadState:j.get()})}function z(a){var b=I(a.getData().path);if(v&&v.path!==b){a=a.getData().trigger===h.TRIGGERS.POPSTATE;A(b,a)}}function A(a,b){if(!v)return;G("page_load_abandoned","CANCEL_NAVIGATION",!1,{abandonedToPath:a,isFromBackPress:b.toString()});x()}function B(a){if(!v)return;a=a.getData();G("page_load_failed","FAIL",!1,{errorCode:(a||"").toString()});x()}function C(a){a=a.getData();a=a.path;a=I(a);if(a==null||v==null||v.path!=a)return;G("page_render_complete","SUCCESS");x()}function D(){if(!v)return;G("browser_moved_to_background","CANCEL_BACKGROUND",!0);x()}function E(){G("session_unload",null,!0)}function F(a){a=a.getData();a=a.uri;G("session_navigate_away","CANCEL_NAVIGATION",!0,{uri:a});x()}function G(a,b,c,d){__p&&__p();c===void 0&&(c=!1);if(v==null)return;d=Object.assign({},d,{cacheType:v.cacheType,navigationType:v.navigationType,prefetchState:v.prefetchState});var e=o();a=new i().setTime(Math.floor(e/1e3)).setSessionID(t).setNavigationID(v.id.toString()).setPath(v.path).setSourcePath(v.sourcePath).setSourceTopView(v.sourceTopView).setEventName(a).setTimeSinceNavStart(e-v.startTimeAbsolute).setEventSpecificDetails(d).setTimeSinceSessionStart(e-p());c?a.logImmediately():a.log();if(d)for(var f in d)H(v.id,f,d[f]);b&&l.markerEnd(k.ASYNC_NAVIGATION_MTOUCH,b,v.id)}function H(a,b,c){c!=null&&l.annotateMarkerString(k.ASYNC_NAVIGATION_MTOUCH,b,c,a)}function I(a){return!a?null:new n(a).getQualifiedURI().toString()}e.exports={init:a}}),null);
__d("MTimeSpentDebug",["GeneratedLoggerUtils","ScriptPath"],(function(a,b,c,d,e,f,g,h){var i="logger:MDebugTimeSpentLoggerConfig",j={signal:!0,retry:!0},k=0;function a(a){if(a>=k&&a-k<1e3)return;var b={activity_time_ms:a,last_activity_time_ms:k,script_path:h.getTopViewEndpoint()};g.log(i,b,j);k=Math.floor(a/1e3)*1e3}e.exports={report:a}}),null);
__d("TimeSpentArray",["Banzai","TimeSlice","clearTimeout","pageID","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=2,m=l*32,n,o,p,q,r,s,t,u,v,w={},x;function y(){return{timeoutDelayMap:w,nextDelay:x,timeoutInSeconds:p}}function z(){if(n){var a=Date.now();a>r&&(t=Math.min(m,Math.ceil(a/1e3-q)));a=E();a&&n(a,x)}D()}function A(){B(),o=k(h.guard(z,"TimeSpentArray Timeout",{propagationType:h.PropagationType.ORPHAN}),p*1e3)}function B(){o&&(i(o),o=null)}function C(a){__p&&__p();q=a;r=q*1e3;s=[1];for(var a=1;a<l;a++)s.push(0);t=1;u+=1;v+=1;a=v.toString()+"_delay";x=w[a];x===void 0&&(x=w.delay);a=v.toString()+"_timeout";a=w[a];a===void 0&&(a=w.timeout);a=Math.min(a,m);p=a||m;A()}function D(){B(),s=null}function E(){return!s?null:{tos_id:j,start_time:q,tos_array:s.slice(0),tos_len:t,tos_seq:v,tos_cum:u}}function F(a){if(a>=r&&a-r<1e3)return;G(Math.floor(a/1e3))}function G(a){var b=a-q;(b<0||b>=m)&&z();!s?C(a):(s[b>>5]|=1<<(b&31),t=b+1,u+=1,r=a*1e3)}e.exports={init:function(a,b,c){u=0,v=-1,n=a,typeof b==="object"&&b!==null?w=b:w={},C(Math.floor((c===void 0||c===null||c===0?Date.now():c)/1e3)),g.subscribe(g.SHUTDOWN,z)},update:function(a){F(a)},get:function(){return E()},ship:function(){z()},reset:function(){D()},testState:function(){return y()}}}),null);
__d("TimeSpentImmediateActiveSecondsLoggerBlue",["Banzai","ImmediateActiveSecondsConfig","ScriptPath"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j="immediate_active_seconds",k={signal:!0,retry:!0},l=h.sampling_rate,m=h.ias_bucket,n=0;function o(a){if(l<=0)return!1;a=Math.floor(a/1e3)%l;return a===m}function a(a){if(a>=n&&a-n<1e3)return;if(o(a)){var b={activity_time_ms:a,last_activity_time_ms:n,script_path:i.getTopViewEndpoint()};g.post(j,b,k)}n=Math.floor(a/1e3)*1e3}e.exports={maybeReportActiveSecond:a}}),null);
__d("TimeSpentImmediateActiveSecondsLogger",["TimeSpentImmediateActiveSecondsLoggerBlue"],(function(a,b,c,d,e,f){"use strict";e.exports=b("TimeSpentImmediateActiveSecondsLoggerBlue")}),null);
__d("MTimeSpentBitArrayLogger",["Banzai","BanzaiODS","CurrentUser","MTimeSpentDebug","Stratcom","TimeSpentArray","TimeSpentImmediateActiveSecondsLogger","Visibility","isInIframe"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();function p(){l.ship()}function q(){var a=Date.now();l.update(a);m.maybeReportActiveSecond(a);u&&j.report(a)}function r(a){var b=i.isLoggedIn()?g.VITAL:g.BASIC;a._m="1";g.post("time_spent_bit_array",a,b);return}function s(){return["gesturestart","mousedown","touchstart","scroll","keydown"]}function t(){var a=s();k.listen(a,null,q);a="onpagehide"in window?["pagehide","blur"]:["blur"];k.listen(a,null,p);n.addListener("hidden",p)}var u=!1;e.exports={init:function(a,b){if(o())return;u=!!b;b=Date.now();l.init(r,null,b);t();m.maybeReportActiveSecond(b);u&&j.report(b);h.bumpEntityKey("ms.time_spent.qa."+a,"time_spent.bits.js_initialized")},getMonitoredEvents:s}}),null);
__d("ScriptPathLogger",["Banzai","CurrentUser","LogHistory","ScriptPath","TimeSpentPageTransitionCause","URI","isInIframe"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n="script_path_change",o={scriptPath:null,categoryToken:null,extraData:{}},p=!1,q="imp_id";function r(a){__p&&__p();var b=l.getNextURI?l.getNextURI():new l(window.location.href),c=b.getQueryData();b=b.getPath();b.endsWith("/")&&(b=b.substr(0,b.length-1));var d=s(b,c);if(d){a.content_id=d;return}d=t(b);if(d!==""){a.dest_topic_feed=d;return}if(u(b)){d=c.queue_id;d&&(a.dest_srt_queue_id=d);b=c.job_in_review;b&&(a.dest_srt_reviewing_job_id=b);return}}function s(a,b){__p&&__p();if(b.story_fbid)return b.story_fbid;if(b.fbid)return b.fbid;if(b.view==="permalink"&&b.id)return b.id;b=/\/(posts|videos|notes|groups\/.*\/permalink)\//;var c=/^[0-9]+$/;if(b.test(a)){b=a.split("/");a=b[b.length-1];if(c.test(a))return a}return""}function t(a){if(!a||a.search("/feed/topics/")==-1)return"";a=a.split("/");return a[a.length-1]}function u(a){return!!a&&a.search("/intern/review/")!==-1}function v(a,b,c,d){__p&&__p();if(!p||m())return;var e=h.isLoggedIn(),f=e?g.VITAL:g.BASIC;e&&(d=d||{},d.via_banzai_vital="1");e={source_path:a.scriptPath,source_token:a.categoryToken,dest_path:b.scriptPath,dest_token:b.categoryToken,impression_id:b.extraData?b.extraData.imp_id:null,cause:c};c=c===k.PAGE_UNLOAD;c||r(e);if(d!=null){var i=d;i=i.snowlift_content_id;!c&&i!=null&&(e.content_id=i,delete d.snowlift_content_id);e.extra_data=d}a.scriptPath===null&&(e.referrer=document.referrer);c=j.getClickPointInfo();c&&(e.click_point_info=c);if(a.extraData)for(var l in a.extraData)l!=q&&(e["source_"+l]=a.extraData[l]);if(b.extraData)for(var o in b.extraData)o!=q&&(e["dest_"+o]=b.extraData[o]);a.topViewEndpoint&&(e.source_endpoint=a.topViewEndpoint);b.topViewEndpoint&&(e.dest_endpoint=b.topViewEndpoint);a.restored&&(e.source_restored=!0);g.post(n,e,f);j.setClickPointInfo(null)}function w(){v(j.getSourcePageInfo()||o,j.getPageInfo()||o,k.PAGE_LOAD)}function x(a,b,c){v(a,b,k.TRANSITION,c)}function a(){v(j.getPageInfo()||o,o,k.PAGE_UNLOAD),j.shutdown()}var y=j.subscribe(function(a){if(p){var b=a.source,c=a.dest,d=a.cause;a=a.extraData;d?v(b||o,c||o,d,a):b?x(b,c||o,a):w()}});g.subscribe(g.SHUTDOWN,a);b={startLogging:function(){p=!0,j.getPageInfo()&&w()},stopLogging:function(){p=!1,y.remove()},BANZAI_LOGGING_ROUTE:n};e.exports=b}),null);