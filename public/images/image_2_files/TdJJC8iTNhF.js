if (self.CavalryLogger) { CavalryLogger.start_js(["CiDCN"]); }

__d("StickerConstants",[],(function(a,b,c,d,e,f){e.exports={MOBILE_LIKE_STICKER_PACK_ID:"227877430692340",GRAVEYARD_PACK_ID:"604597256247273",LIKE_STICKER_ID:"227878347358915",HOT_LIKE_SMALL_STICKER_ID:"369239263222822",HOT_LIKE_MEDIUM_STICKER_ID:"369239343222814",HOT_LIKE_LARGE_STICKER_ID:"369239383222810",MRU_STICKER_PACK:"599061016853145",SEARCH_PACK_ID:"680229632032514",OZ_PACK_ID:"1456625217993235",SPRITE_PADDING:"24",PayloadSource:{VIEW_ACTION:"view-action"},DEFAULT_FRAME_RATE:83,TRAY_SIZE:64,THREAD_SIZE:120}}),null);
__d("MCommentStatusLogger",["BanzaiLogger","ex","uuid"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=Object.freeze({INIT:"init",SUBMIT:"submit",RESPOND:"respond",RENDER:"render"});a=function(a,b,c){this.prevEventType=a||null,this.perfLoggable=!!b,this.isEndStep=!!c};var k={};k[j.INIT]=new a();k[j.SUBMIT]=new a(j.INIT,!0);k[j.RESPOND]=new a(j.SUBMIT,!0);k[j.RENDER]=new a(j.RESPOND,!0,!0);var l=function(){__p&&__p();function a(a){this.$1=a,this.$2={},this.$3=0,this.$4=0,this.$5=null}var b=a.prototype;b.$6=function(a){return a in this.$2};b.logEvent=function(a,b){__p&&__p();if(this.$6(a)||!(a in k))return!1;var c=k[a],d=c.prevEventType;if(d&&!this.$6(d))return!1;this.$3=b&&Object.prototype.hasOwnProperty.call(b,"text")?b.text:this.$3;this.$4=b&&Object.prototype.hasOwnProperty.call(b,"photo")?b.photo:this.$4;this.$5=(b&&Object.prototype.hasOwnProperty.call(b,"stickerID")?b.stickerID:this.$5)||null;b=Date.now();var e=Math.round(b/1e3);this.$2[a]=b;b={event:a,text_length:this.$3,num_photos:this.$4,sticker_id:this.$5,interaction_key:this.$1,client_time:e};if(d&&c.perfLoggable){e=this.$7(d,a);b=babelHelpers["extends"]({duration:e},b)}g.create({retry:!0}).log("MCommentWriteWaterfallLoggerConfig",b);return!0};b.$7=function(a,b){var c=this.$2;if(!this.$6(a)||!this.$6(b))return null;a=c[a];c=c[b];return a>c?null:c-a};return a}(),m={};b={newInteractionKey:function(){return i()},_logCommentStatus:function(a,b,c){__p&&__p();if(!(b in k))return;var d=m[a];if(b===j.INIT)if(d)return;else d=new l(a),m[a]=d;if(!d)return;d=d.logEvent(b,c);d&&k[b].isEndStep&&this.clear(a)},logInitText:function(a){this._logCommentStatus(a,j.INIT,{text:1})},logInitPhoto:function(a){this._logCommentStatus(a,j.INIT,{photo:1})},logSubmit:function(a,b){this._logCommentStatus(a,j.SUBMIT,{text:b.text,photo:b.photo,stickerID:null})},logReceiveResponse:function(a,b){this._logCommentStatus(a,j.RESPOND,{text:b.text,photo:b.photo,stickerID:b.stickerID})},logRender:function(a){this._logCommentStatus(a,j.RENDER)},logInitAndSubmitSticker:function(a,b){this._logCommentStatus(a,j.INIT,{text:0,photo:0,stickerID:b}),this._logCommentStatus(a,j.SUBMIT,{text:0,photo:0,stickerID:b})},clear:function(a){a in m&&delete m[a]}};e.exports=b}),null);
__d("MLoadingIndicator.react",["IndicatorType","MJSAnimator","MJSEnvironment","React","ReactDOM","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n=i.IS_APPLE_WEBKIT_IOS,o=i.IS_ANDROID&&i.OS_VERSION<4;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.componentDidMount=function(){o&&(this.$1=new h(k.findDOMNode(this.refs.spinner),g.ANDROID_NONROTATING,!1),this.$1.start())};c.componentWillUnmount=function(){this.$1&&(this.$1.cleanup(),this.$1=null)};c.getClassName=function(){return m(this.props.className,(o?"":"_55on")+" _2so"+(this.props.background==="dark"?" _2st":"")+(this.props.background==="light"?" _2ss":"")+(this.props.size==="large"?" _2sq":"")+(this.props.size==="small"?" _2sp":"")+(!o&&!n?" _50cg":"")+(n?" _50ch":"")+(o?" _2su":""))};c.render=function(){return j.createElement("div",{ref:"spinner",className:this.getClassName()},this.renderGradientIfNeeded())};c.renderGradientIfNeeded=function(){return o||!n?null:j.createElement("div",{className:"_2sr _55on"})};return b}(j.Component);a.defaultProps={background:"light",size:"large"};e.exports=a}),null);
__d("MProgressBar.react",["MAnimator","React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$1=!1;c.state={value:c.props.initialValue};c.setValue=function(a){c.$1&&c.setState({value:a})};return c}var c=b.prototype;c.componentDidMount=function(){this.$1=!0};c.componentWillUnmount=function(){this.$2&&this.$2.dispose(),this.$1=!1};c.$3=function(a){var b=this.props;a=Math.min(Math.max((a-b.min)/(b.max-b.min)*100,0),100);return a};c.$4=function(){var a=this.$3(this.props.value!=null?this.props.value:this.state.value),b=Math.round(a);b="fill"+(b===0?" empty":"")+(b===100?" full":"");return h.createElement("div",{className:b,style:{width:a+"%"}})};c.animate=function(a,b){var c=this.$3(this.state.value);a=this.$3(a);this.$2&&this.$2.dispose();this.$2=g.play(c,a,b,this.setValue)};c.render=function(){return h.createElement("div",{className:j(this.props.className,"_lbu")},this.$4())};return b}(h.Component);a.defaultProps={min:0,max:100};e.exports=a}),null);
__d("MXUILayout.react",["MXUIDiv.react","React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();function k(a){return(a==="start"?"_52wc":"")+(a==="end"?" _52wd":"")+(a==="center"?" _52we":"")+(a==="stretch"?" _52wf":"")}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={align:c.props.align},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.hasAlignSelfChildren=function(){var a=h.Children.toArray(this.props.children);for(var b=0;b<a.length;b++){var c=a[b];if(Object.prototype.hasOwnProperty.call(c.props,"alignself"))return!0}return!1};c.render=function(){var a=this,b=this.props,c=b.align,d=b.className,e=b.children;b=babelHelpers.objectWithoutPropertiesLoose(b,["align","className","children"]);var f="_4g33",i;this.hasAlignSelfChildren()?i=h.Children.toArray(e).map(function(b){return Object.prototype.hasOwnProperty.call(b.props,"alignself")?b:h.cloneElement(b,{alignself:a.state.align})}):(i=e,f=j(k(c),f));return h.createElement(g,babelHelpers["extends"]({},b,{className:j(d,f)}),i)};return b}(h.Component);a.defaultProps={align:"stretch"};e.exports=a}),null);
__d("MXUILayoutColumn.react",["MJSEnvironment","MXUIDiv.react","React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();function l(a){return(a==="start"?"_52wc":"")+(a==="end"?" _52wd":"")+(a==="center"?" _52we":"")+(a==="stretch"?" _52wf":"")}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a=this.props,b=a.className,c=a.alignself,d=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","alignself","children"]);if(Object.prototype.hasOwnProperty.call(this.props,"alignself")){b=k(b,"_5i2i",l(c));if(g.IS_FIREFOX)return i.createElement(h,babelHelpers["extends"]({},a,{className:b}),i.createElement(h,{className:"_5xu4"},d))}return i.createElement(h,babelHelpers["extends"]({},a,{className:b}),d)};return b}(i.Component);e.exports=a}),null);
__d("MXUILayoutFillColumn.react",["MXUILayoutColumn.react","React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){function a(a){var b="_4g34";return h.createElement(g,babelHelpers["extends"]({},a,{className:j(a.className,b)}),a.children)}e.exports=a}),null);
__d("MXUISpan.react",["MXUIBase","joinClasses","React"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a=this.props,b=a.className,c=a.children,d=a.fontsize,e=a.fontshade,f=a.fontweight,j=a.textalign;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","children","fontsize","fontshade","fontweight","textalign"]);return i.createElement("span",babelHelpers["extends"]({},a,{className:h(b,g.getClassName(d,e,f,j))}),c)};return b}(i.Component);a.propTypes=g.propTypes;a.defaultProps=g.getDefaultProps();e.exports=a}),null);
__d("MComposerBackgroundUploadProgress",["Promise","DOM","Event","MAjaxify","MAjaxifyFormTypes","MLinkHack","MModalDialog","MProgressBar.react","React","ReactDOM","Stratcom","$","cx","fbt","promiseDone","qex","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"use strict";__p&&__p();var x=5,y=8,z=500,A=.7,B=500,C=1e4,D=250,E=90,F=function(){__p&&__p();function a(a){this.$2=a,this.$3=h.find(this.$2,"div","inprogress"),this.$6=h.find(this.$2,"div","error"),this.$1=r("viewport"),this.$8=!1,this.$10=v._("684052"),this.$11=v._("691282"),this.$4=h.find(this.$3,"div","spinner-container"),this.$5=h.find(this.$3,"div","progress-bar-container"),this.$11&&this.$16(),this.$17(),this.$18(),this.$19(this.$6)}var b=a.prototype;b.$16=function(){var a=this;this.$13=p.render(o.createElement(n,{initialValue:0,className:"_6zj1"}),this.$5);this.$12=q.listen("MMultiPhotoUploader:upload:progress",null,function(b){b=b.getData();a.$14=b.totalSize;a.$15=b.totalLoaded;a.$8&&a.$13&&(a.$14===a.$15?a.$13.animate(E,C):a.$13.animate(a.$20(),B))})};b.$21=function(a){var b=this;h.show(a);w(function(){b.$2.style.transform="translateY(0%)"},0)};b.$22=function(a){var b=this;return new g(function(c,d){b.$2.style.transform="translateY(100%)",w(function(){h.hide(a),c()},z)})};b.$23=function(a,b){var c=this;w(function(){u(c.$22(a))},1e3*b)};b.$24=function(a,b){var c=this;w(function(){u(c.$22(a),function(){h.remove(a)})},1e3*b)};b.$17=function(){var a=this;window.addEventListener("beforeunload",function(b){if(!a.$8)return void 0;var c=t._("We're still uploading your post. If you leave now it won't be published.");b.returnValue=c;return c})};b.$18=function(){var a=this;window.bgUploadInlineComposerCallback=function(){return a.blockNavigateToComposer()}};b.$19=function(a){var b=this,c=h.scry(a,"a");c.map(function(c){return i.listen(c,"click",function(){b.$22(a)})})};b.$25=function(b,c){__p&&__p();var d=this;c.kill();var e=b.link;c=[];e.setAttribute("disabled","disabled");c.push({response:function(){a.openModalDialogWithPermalink(e,b.snowflakePermalink),d.$22(d.$7)},error:function(){var a=d.$22(d.$7);a=a.then(function(){return d.showErrorMsg()});u(a)}});j.form(null,b.form,null,k.NO_CACHE,null,!1,c)};b.$20=function(){var a=this.$15&&this.$14?this.$15/this.$14*100*A:0;return a};b.$26=function(){this.$13&&this.$13.animate(100,D);return new g(function(a,b){w(function(){a()},D)})};b.$27=function(){this.$8=!1,this.$15=null,this.$14=null};b.showErrorMsg=function(){var a=this;this.$27();var b=this.$22(this.$3);b=b.then(function(){return a.$21(a.$6)});this.$23(this.$6,y);u(b)};b.setCompleteMsg=function(a,b){h.appendContent(this.$2,a),this.$19(a),this.$7=a,this.$9=b};b.setBackgroundUploadRunning=function(a,b){__p&&__p();var c=this;if(!a&&!this.$8)return;if(a){this.$8=!0;this.$13&&b?(this.$13.setValue(this.$20()),h.hide(this.$4),h.show(this.$5),this.$14&&this.$15&&this.$14===this.$15&&(this.$13&&this.$13.animate(E,C))):(h.hide(this.$5),h.show(this.$4));this.$21(this.$3);return}this.$27();a=this.$13?this.$26().then(this.$22.bind(this,this.$3)):this.$22(this.$3);a=a.then(function(){return c.$21(c.$7)});this.$24(this.$7,this.$9||x);u(a)};b.blockNavigateToComposer=function(){if(this.$8){alert(t._("You can post again as soon as your last post is published."));return!0}return!1};b.isRunning=function(){return this.$8};b.isWaitingForTagSuggestions=function(){return this.$10};b.setupTagFriendsButton=function(a){h.listen(a.link,"click",null,this.$25.bind(this,a))};a.openModalDialogWithPermalink=function(a,b){l.remove(a),m.openWithPermalinkURI(a.href,b)};return a}(),G=null;e.exports={init:function(){if(!G){var a=h.scry(r("static_templates"),"div","bg-upload-progress-root")[0];if(!a)return null;G=new F(a)}return G},getInstance:function(){return G},isRunning:function(){return!!(G&&G.isRunning())},setUploadFinished:function(a){if(!G)return;G.setCompleteMsg(a.completeMsg,a.msgDismissSeconds);G.setBackgroundUploadRunning(!1)},setUploadError:function(){if(!G)return;G.showErrorMsg()},setupTagFriendsButton:function(a){if(!G)return;G.setupTagFriendsButton(a)},isWaitingForTagSuggestions:function(){return!!(G&&G.isWaitingForTagSuggestions())}}}),null);
__d("EncryptedImgUtils",[],(function(a,b,c,d,e,f){var g="ek",h=/^data\:/,i=/\?(ek\=|.*&ek\=)/;a={extractKey:function(a){var b=a.getQueryData(),c=b[g];delete b[g];a.setQueryData(b);return c},isEncrypted:function(a){return!h.test(a)&&i.test(a)}};e.exports=a}),null);
__d("coerceImageishURL",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a&&typeof a==="object"&&a.sprited===!1&&typeof a.uri==="string"&&a.width!==void 0&&a.height!==void 0)return a;else return null}e.exports=a}),null);
__d("createCancelableFunction",["emptyFunction"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){var b=a;a=function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return b.apply(this,c)};a.cancel=function(){b=g};return a}e.exports=a}),null);
__d("warnUnsupportedProp",["warning"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){g(!1,"%s component does not support prop `%s`.%s",a,b,c?" "+c:"")}e.exports=a}),null);
__d("ImageCore.react",["Bootloader","EncryptedImgUtils","FBLogger","React","SubscriptionsHandler","coerceImageishSprited","coerceImageishURL","createCancelableFunction","getImageSourceURLFromImageish","ifRequired","joinClasses","validateImageSrcPropType","warnUnsupportedProp"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";__p&&__p();b={alt:""};var t=function(b){__p&&__p();babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$1=!1,c.$2=null,c.$3=new k(),c.state={decryptedSrc:null},a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.$4=function(a){var b=this;this.$2&&this.$2.cancel();var c=o(this.props.encryptedSrc),d=n(function(a){c===o(b.props.encryptedSrc)&&b.setState({decryptedSrc:a})});a.load(c,d);this.$3.addSubscriptions({remove:function(){d.cancel()}});this.$2=d};c.$5=function(){var a=this;p("EncryptedImg",function(b){a.$4(b)},function(){if(a.$1)return;a.$1=!0;a.$3.addSubscriptions(g.loadModules(["EncryptedImg"],function(b){return a.$4(b)},"ImageCore.react"))})};c.componentDidMount=function(){this.$5()};c.componentDidUpdate=function(a){a.encryptedSrc!==this.props.encryptedSrc&&this.$5()};c.componentWillUnmount=function(){this.$3.release()};c.render=function(){var a=this.props,b=a.encryptedSrc,c=a.forwardedRef;a=babelHelpers.objectWithoutPropertiesLoose(a,["encryptedSrc","forwardedRef"]);var d=this.state.decryptedSrc;h.isEncrypted(b)===!1&&(i("image").mustfix("The `EncryptedImage` component was rendered with a non-encrypted image (%s). Only images that meet the encrypted image test (see `EncryptedImgUtils.isEncrypted()`) should be rendered with this component. Falling back to `ImageishRenderer`.",JSON.stringify(b)),d=b);return j.createElement(u,babelHelpers["extends"]({},a,{forwardedRef:c,src:d}))};return a}(j.Component);t.defaultProps=b;t.propTypes={encryptedSrc:r};function u(a){__p&&__p();var b=a.forwardedRef;a=babelHelpers.objectWithoutPropertiesLoose(a,["forwardedRef"]);var c=q(a.className,"img");if(a.src==null)return j.createElement("img",babelHelpers["extends"]({},a,{className:c,ref:b}));var d=l(a.src),e=!!d&&a.alt!=null&&String(a.alt)!==""?j.createElement("u",null,a.alt):null;if(typeof a.src==="string")return j.createElement("img",babelHelpers["extends"]({},a,{className:c,ref:b,src:a.src}),e);if(d){var f=d.spriteCssClass;d=d.spriteMapCssClass;a.src;var g=babelHelpers.objectWithoutPropertiesLoose(a,["src"]);return j.createElement("i",babelHelpers["extends"]({},g,{className:q(c,d,f),ref:b}),e)}g=a.src?o(a.src):"";d=m(a.src);return a.width===void 0&&a.height===void 0&&d?j.createElement("img",babelHelpers["extends"]({},a,{className:c,height:d.height,src:g,ref:b,width:d.width}),e):j.createElement("img",babelHelpers["extends"]({},a,{className:c,ref:b,src:g}),e)}u.defaultProps=b;u.propTypes={src:r};function a(a,b){Object.prototype.hasOwnProperty.call(a,"source")&&s("ImageCore","source","Did you mean `src`?");var c=a.src!=null?o(a.src):"";if(h.isEncrypted(c)){a.src;var d=babelHelpers.objectWithoutPropertiesLoose(a,["src"]);return j.createElement(t,babelHelpers["extends"]({},d,{encryptedSrc:c,forwardedRef:b}))}else return j.createElement(u,babelHelpers["extends"]({},a,{forwardedRef:b}))}a.displayName="ImageCore";e.exports=j.forwardRef(a)}),null);
__d("Image.react",["ImageCore.react"],(function(a,b,c,d,e,f){e.exports=b("ImageCore.react")}),null);
__d("UrlMap",["UrlMapConfig","invariant"],(function(a,b,c,d,e,f,g,h){a={resolve:function(a){var b="https";if(a in g)return b+"://"+g[a];a in g||h(0,2511,a);return""}};e.exports=a}),null);
__d("MAnimatedSticker.react",["PaddedStickerConfig","React","ReactDOM","StickerConstants","clearInterval","fbt","getElementPosition","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();a=83;b=5e3;var o=10,p={ON_LOAD:"on_load",FOREVER:"forever"};c=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.state={index:0,hasAnimated:!1},c.incrementFrameIndex=function(){c.shouldStopAnimating()?c.stopAnimation():c.setState(function(a){return{index:a.index+1}})},b)||babelHelpers.assertThisInitialized(c)}b.getScaledDimensions=function(a,b,c){var d,e,f;b>a?(f=c/b,d=a*f,e=b*f):(f=c/a,d=a*f,e=b*f);return{height:Math.round(d),width:Math.round(e)}};var c=b.prototype;c.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(),this.$2=0,this.$1=!0,(this.props.animationTrigger===p.ON_LOAD||this.props.animationTrigger===p.FOREVER)&&this.props.frameCount>1&&this.props.spriteURI&&this.startAnimation()};c.componentWillUnmount=function(){this.$1=!1,this.isAnimating()&&k(this.$2)};c.isAnimating=function(){return!!this.$2};c.getWidth=function(){return Math.floor(this.props.sourceWidth)};c.getHeight=function(){return Math.floor(this.props.sourceHeight)};c.preloadSprite=function(){var a=new window.Image();a.onload=function(){this.$1&&!this.state.hasAnimated&&(this.setState({hasAnimated:!0}),this.$2=n(this.incrementFrameIndex,this.props.frameRate))}.bind(this);g.ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI?a.src=this.props.paddedSpriteURI:a.src=this.props.spriteURI};c.isScrolledIntoView=function(a,b,c){var d=m(i.findDOMNode(this));c=a+d.y-c;b=a+b;d=c+d.height;this.props.frameCount>1&&!this.state.hasAnimated&&d-o<=b&&c+o>=a&&this.startAnimation()};c.startAnimation=function(){!this.state.hasAnimated&&this.props.spriteURI?this.preloadSprite():this.isAnimating()||(this.setState({hasAnimated:!0}),this.$2=n(this.incrementFrameIndex,this.props.frameRate))};c.stopAnimation=function(){this.setState({index:0}),k(this.$2),this.$2=0};c.shouldStopAnimating=function(){var a=this.state.index%this.props.frameCount;return this.props.animationTrigger===p.FOREVER?!1:a===0&&this.state.index*this.props.frameRate>this.props.animationTime};c.getStyle=function(){__p&&__p();var a=0,b=this.props.spriteURI;if(g.ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){b=this.props.paddedSpriteURI;var c=240/Math.min(this.getHeight(),this.getWidth());a=Math.floor(j.SPRITE_PADDING/c)}c=this.state.index%this.props.frameCount;var d=c%this.props.framesPerRow*(this.getWidth()+a*2)+a;c=Math.floor(c/this.props.framesPerRow)*(this.getHeight()+a*2)+a;if(!this.state.hasAnimated||!this.props.spriteURI)return{backgroundImage:"url("+this.props.sourceURI+")",backgroundRepeat:"no-repeat",backgroundSize:this.getWidth()+"px "+this.getHeight()+"px",height:this.getHeight(),width:this.getWidth()};else return{backgroundImage:"url("+b+")",backgroundPosition:-d+"px "+-c+"px",backgroundSize:(this.getWidth()+a*2)*this.props.framesPerRow+"px "+(this.getHeight()+a*2)*this.props.framesPerCol+"px",height:this.getHeight(),width:this.getWidth(),imageRendering:"-webkit-optimize-contrast"}};c.getAriaLabel=function(){return l._("{pack name} {sticker name} sticker",[l._param("pack name",this.props.packName),l._param("sticker name",this.props.accessibilityLabel)])};c.render=function(){return h.createElement("div",{"aria-label":this.getAriaLabel(),className:this.props.className,"data-testid":this.props.testID,role:"img",style:this.getStyle()})};return b}(h.Component);c.defaultProps={animationTime:b,accessibilityLabel:"",frameRate:a,packName:""};e.exports=c}),null);
__d("GridItem.react",["React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";function a(a){var b=a.alignv,c=a.alignh,d=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["alignv","alignh","className"]);return g.createElement("td",babelHelpers["extends"]({},a,{className:i(d,"_51m-"+(b==="top"?" vTop":"")+(b==="middle"?" vMid":"")+(b==="bottom"?" vBot":"")+(c==="left"?" hLeft":"")+(c==="center"?" hCent":"")+(c==="right"?" hRght":""))}))}e.exports=a}),null);
__d("Grid.react",["GridItem.react","React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){__p&&__p();var a=this.props,c=a.alignh,d=a.alignv,e=a.children,f=a.cols,i=a.fixed,k=a.spacing,l=h.Children.count(e),m=[],n=[],o=0;h.Children.forEach(e,function(a,e){__p&&__p();if(a===null||a===void 0)return;var p=a.type===b.GridItem;o+=p?Math.max(a.props.colSpan||0,1):1;var q=o===f?"_51mw":"";p=p?h.cloneElement(a,{key:a.key||e,alignh:a.props.alignh||c,alignv:a.props.alignv||d,className:j(a.props.className,k,q)}):h.createElement(g,{alignh:c,alignv:d,className:j(k,q),key:a.key||e},a);n.push(p);if(o%f===0||e+1===l){if(i===!0&&o<f){for(var q=o;q<f;q++)n.push(h.createElement(g,{key:e+q}));o=f}m.push(h.createElement("tr",{className:"_51mx",key:e},n));n=[];o=0}});return h.createElement("table",babelHelpers["extends"]({},this.props,{className:j(this.props.className,"uiGrid _51mz"+(i===!0?" _5f0n":"")),cellSpacing:"0",cellPadding:"0"}),h.createElement("tbody",null,m))};return b}(h.Component);a.GridItem=g;e.exports=a}),null);
__d("MStickersWebDriverIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STICKER_BUTTON:"MStickersWebDriverIDsStickerButton",STICKER_SELECTOR_CONTENT:"MStickersWebDriverIDsStickerSelectorContent",STICKER_NONSEARCH_PACK_BUTTON:"MStickersWebDriverIDsStickerNonsearchPackButton",STICKER_PACK_ITEM:"MStickersWebDriverIDsStickerPackItem"})}),null);
__d("shallowEqual",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=Object.prototype.hasOwnProperty;function h(a,b){if(a===b)return a!==0||b!==0||1/a===1/b;else return a!==a&&b!==b}function a(a,b){__p&&__p();if(h(a,b))return!0;if(typeof a!=="object"||a===null||typeof b!=="object"||b===null)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(var d=0;d<c.length;d++)if(!g.call(b,c[d])||!h(a[c[d]],b[c[d]]))return!1;return!0}e.exports=a}),null);
__d("fbjs/lib/shallowEqual",["shallowEqual"],(function(a,b,c,d,e,f){"use strict";e.exports=b("shallowEqual")}),null);
__d("shallowCompare",["fbjs/lib/shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return!g(a.props,b)||!g(a.state,c)}e.exports=a}),null);
__d("ReactComponentWithPureRenderMixin",["shallowCompare"],(function(a,b,c,d,e,f,g){"use strict";a={shouldComponentUpdate:function(a,b){return g(this,a,b)}};e.exports=a}),null);
__d("isKeyActivation",["Keys"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=0,c=a.charCode;a=a.keyCode;c!=null&&c!==0?b=c:a!=null&&a!==0&&(b=a);return[g.RETURN,g.SPACE].includes(b)}e.exports=a}),null);
__d("KeyActivationToClickHOC.react",["React","isKeyActivation"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();var b,c;return c=b=function(b){__p&&__p();babelHelpers.inheritsLoose(c,b);function c(){__p&&__p();var a;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];a=b.call.apply(b,[this].concat(d))||this;a.$2=function(b){h(b)&&(b.preventDefault(),b.stopPropagation(),a.$1&&a.$1.click())};a.$3=function(b){a.$1=b};a.$1=null;return a}var d=c.prototype;d.render=function(){return g.createElement(a,babelHelpers["extends"]({},this.props,{keyActivationToClickEvent:this.$2,keyActivationToClickRef:this.$3}))};return c}(g.Component),b.displayName="KeyActivationToClickHOC",c};e.exports=a}),null);
__d("ShimButton.react",["KeyActivationToClickHOC.react","React","emptyFunction"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=h.PropTypes;b=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){c.props.keyActivationToClickEvent(a),c.props.onKeyPress(a)},c.$2=function(a){c.props.keyActivationToClickRef(a),c.props.onRef(a)},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.render=function(){var a=this.props,b=a.children,c=a.form,d=a.inline;a.keyActivationToClickEvent;a.keyActivationToClickRef;a.onRef;var e=a.pressed;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","form","inline","keyActivationToClickEvent","keyActivationToClickRef","onRef","pressed"]);d=d?"span":"div";c==="link"&&(d="a");return h.createElement(d,babelHelpers["extends"]({},a,{"aria-pressed":e,ref:this.$2,role:"button",onKeyPress:this.$1}),b)};return b}(h.Component);b.defaultProps={form:"none",inline:!1,keyActivationToClickEvent:i,keyActivationToClickRef:i,onClick:i,onKeyPress:i,onRef:i,tabIndex:"0"};b.propTypes={children:a.any,form:a.oneOf(["none","link"]),inline:a.bool,tabIndex:a.oneOf(["-1","0",-1,0]),onClick:a.func,onKeyPress:a.func,onRef:a.func};e.exports=g(b)}),null);
__d("StickerInterfaces",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGES:"messages",NEO:"neo",COMMENTS:"comments",STICKERED:"stickered",COMPOSER:"composer",POSTS:"posts",FRAMES:"frames",SMS:"sms",MONTAGE:"montage"})}),null);
__d("XStickerPackImagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/{pack_id}/images/",{pack_id:{type:"Int",required:!0},sticker_size:{type:"Int",defaultValue:50}})}),null);
__d("XStickerQueryImagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/query/images/",{query:{type:"String",required:!0},sticker_interface:{type:"String"}})}),null);
__d("MStickerPack.react",["Grid.react","MAnimatedSticker.react","MRequest","MStickersInitialData","MStickersWebDriverIDs","MURI","React","Image.react","ReactComponentWithPureRenderMixin","ShimButton.react","StickerInterfaces","XStickerPackImagesController","XStickerQueryImagesController","cx","ix","fbt","debounceCore","qex"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";__p&&__p();var y=g.GridItem,z=j.MRU_STICKER_PACK,A=14,B={};a=m.createClass({displayName:"MStickerPack",mixins:[o],getInitialState:function(){return{input:"",loading:!1,searching:!1,stickers:[]}},getDefaultProps:function(){return{isComments:!1}},UNSAFE_componentWillMount:function(){this._debouncedGetStickersForQuery=w(this.getStickersForQuery,500),this.getStickers(this.props.pack.id)},UNSAFE_componentWillReceiveProps:function(a){this.getStickers(a.pack.id)},componentWillUnmount:function(){this._debouncedGetStickersForQuery.reset()},updateRecentlyUsed:function(a){var b=B[z]||[];for(var c=0;c<b.length;++c)if(b[c].id===a.id){b.splice(c,1);break}b.unshift(a);B[z]||(B[z]=b,j.packs.unshift(j.mru))},getStickers:function(a){__p&&__p();if(!a||a==j.SEARCH_PACK)return;if(a in B){this.setState({input:"",loading:!1,stickers:B[a],searching:!1});return}var b=r.getURIBuilder().setInt("pack_id",a).getURI();b=new i(new l(b));b.listen("done",function(b){B[a]=b.payload,this.isMounted()&&this.setState({input:"",loading:!1,stickers:b.payload,searching:!1})}.bind(this));this.setState({loading:!0});b.send()},getStickersForQuery:function(a,b){__p&&__p();if(a.length===0){this.setState({loading:!1,searching:!1});return}if(a!=this.state.input&&!b)return;b=s.getURIBuilder().setString("query",a).setString("sticker_interface",this.props.isComments?q.COMMENTS:q.MESSAGES).getURI();b=new i(new l(b));b.listen("done",function(b){b=b.payload||[];this.isMounted()&&a==this.state.input&&this.setState({loading:!1,stickers:b,searching:!0})}.bind(this));this.setState({loading:!0});b.send()},selectSticker:function(a){this.updateRecentlyUsed(a),this.props.onSelect&&this.props.onSelect(a.id)},renderSticker:function(a,b){__p&&__p();var c=null;if(this.props.isComments&&!a.isCommentsCapable){if(this.props.pack.id==j.MRU_STICKER_PACK)return}else if(!this.props.isComments&&!a.isMessengerCapable){if(this.props.pack.id==j.MRU_STICKER_PACK)return}else c=this.selectSticker.bind(this,a);var d=null;this.props.isFlyout&&(d="composer-submit");var e=m.createElement(n,{src:a.uri,alt:v._("{pack name} {sticker name} sticker",[v._param("pack name",a.packName),v._param("sticker name",a.accessibilityLabel)])});if(x._("819489")){var f=h.getScaledDimensions(a.height,a.width,50);e=m.createElement(h,{accessibilityLabel:a.accessibilityLabel,animationTrigger:"forever",src:a.uri,alt:v._("{pack name} {sticker name} sticker",[v._param("pack name",a.packName),v._param("sticker name",a.label)]),frameCount:a.frameCount,frameRate:a.frameRate,framesPerCol:a.framesPerCol,framesPerRow:a.framesPerRow,sourceHeight:f.height,sourceURI:a.uri,sourceWidth:f.width,spriteURI:a.spriteURI,packName:a.packName,paddedSpriteURI:a.paddedSpriteURI,stickerID:a.id})}return m.createElement("button",{className:"_5asg","data-testid":k.STICKER_PACK_ITEM,"data-sigil":d,key:"sticker-"+b,onClick:c,role:"button"},e)},_getRenderedFakeStickers:function(){return Array.from(new Array(A),function(a,b){return m.createElement("div",{key:"fake-"+b,className:"_u2_"})})},_getRenderedStickerGridItems:function(){return this.state.stickers.map(this.renderSticker).concat(this._getRenderedFakeStickers())},render:function(){if(this.props.pack.id==j.SEARCH_PACK)return m.createElement("div",{className:"_5ash"},m.createElement("div",{className:"_5ef_"},this._renderSearch(),this._renderTags(),this._renderStickerSearchResults()),this._renderLoading());return this.state.loading?m.createElement("div",{className:"_5ash"},this._renderLoading()):m.createElement("div",{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?" _5jkg":""),onScroll:this.props.onScroll},m.createElement("div",{className:"_5ef_",onScroll:this._onScroll},this._getRenderedStickerGridItems()),this.renderMask())},_renderLoading:function(){return!this.state.loading?null:m.createElement("span",{className:"_5asi"},v._("Loading..."))},_renderStickerSearchResults:function(){if(!this.state.searching||this.state.loading)return null;return this.state.stickers.length===0?m.createElement("div",{className:"_4op9"},m.createElement(n,{src:u("87146")}),m.createElement("p",null,v._("No Stickers to Show"))):m.createElement("div",{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?" _5jkg":""),onScroll:this.props.onScroll},m.createElement("div",{className:"_5ef_"},this._getRenderedStickerGridItems()),this.renderMask())},renderMask:function(){return!(this.props.isComments&&!this.props.pack.isCommentsCapable)?null:m.createElement("div",{className:"_5jkh"},m.createElement("div",{className:"_5jki"},v._("This pack is only available in messages")))},_renderSearch:function(){return m.createElement("div",{className:"_2j-l"},m.createElement("span",{className:"_2j-m"}),this._renderCloseButton(),m.createElement("div",{className:"_4opa"},m.createElement("input",{className:"_2j-n",onChange:this._inputChanged,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,ref:"stickerQuery",value:this.state.input,placeholder:v._("Search stickers"),type:"text"})))},_renderCloseButton:function(){if(this.state.input.length>0)return m.createElement(p,{className:"_4opb",inline:!0,onClick:this._clearInput})},_renderTags:function(){var a=this;if(this.state.searching||this.state.loading)return null;var b=j.tags.filter(function(a){return a.sourceURI!==null}).sort(function(a,b){return a.order-b.order}).map(function(b,c){return m.createElement(y,{className:"_2j-o",key:c},m.createElement("div",{className:"_2j-p"},m.createElement(p,{className:"_2j-q",onClick:a._selectTag.bind(a,b),style:{background:"#"+b.color_code}},m.createElement(n,{src:b.sourceURI}),m.createElement("span",null,b.name))))});return m.createElement(g,{className:"_2j-r",cols:2,fixed:!0,ref:"grid"},b)},_inputChanged:function(a){this.setState({input:a.target.value}),this._debouncedGetStickersForQuery(a.target.value,!1)},_clearInput:function(){this.setState({input:"",loading:!1,searching:!1})},_selectTag:function(a){this.setState({input:a.name}),this.getStickersForQuery(a.name,!0)}});e.exports=a}),null);
__d("MStickerPackButton.react",["Image.react","MStickersInitialData","MStickersWebDriverIDs","React","ShimButton.react","cx"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.onClick=function(){c.props.onclick&&c.props.onclick(c.props.pack)},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.render=function(){var a="_5arz _5cni"+(this.props.selected?" _5ar-":"")+(this.props.disabled?" _4f39":""),b=this.props.pack,c;b.id==h.MRU_STICKER_PACK?c=j.createElement("span",{className:"_3rsg"}):b.id==h.SEARCH_PACK?c=j.createElement("span",{className:"_cmr"}):c=j.createElement(g,{src:b.icon,alt:b.name});b=b.id==h.SEARCH_PACK?null:i.STICKER_NONSEARCH_PACK_BUTTON;return j.createElement(k,{className:a,"data-testid":b,form:"link",onClick:this.onClick,rel:"ignore"},j.createElement("div",{className:"_3pcz"},c))};return b}(j.PureComponent);e.exports=a}),null);
__d("XStickerStorePermalinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/",{tab:{type:"String"},redirect_uri:{type:"String"},is_comments:{type:"Bool",defaultValue:!1}})}),null);
__d("MStickerSelector.react",["BanzaiLogger","DOM","MPageController","MParent","MStickerPack.react","MStickerPackButton.react","MStickersInitialData","MStickersWebDriverIDs","MViewport","React","ReactDOM","Stratcom","SubscriptionsHandler","UserAgent","XStickerStorePermalinkController","cx","fbt","getActiveElement"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){__p&&__p();a=p.PropTypes;var y="feed-ufi-comments",z="scroll-area";b=48;var A=5*b;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){__p&&__p();var c;c=a.call(this,b)||this;c.$1=null;c.onPackSelect=function(a){g.log("MTouchStickersLoggerConfig",{event:"select_pack",packid:a.id}),c.setState({selectedPack:a})};c.onPackScroll=function(){c.state.selectedPack&&c.state.selectedPack.id!=c.$2&&(c.$2=c.state.selectedPack.id,g.log("MTouchStickersLoggerConfig",{event:"scroll_pack",packid:c.state.selectedPack.id}))};c.onInputFocus=function(){c.setState({inputFocused:!0})};c.onInputBlur=function(){c.setState({inputFocused:!1})};c.scrollPrev=function(){if(!c.state.prevDisabled){var a=Math.max(c.state.scrollLeft-A,0);c.setState({scrollLeft:a,prevDisabled:a===0,nextDisabled:!1})}};c.scrollNext=function(){if(!c.state.nextDisabled){var a=q.findDOMNode(c.refs.selectorRow);a=a.scrollWidth-a.parentNode.clientWidth;a=Math.min(c.state.scrollLeft+A,a);c.setState({scrollLeft:a,prevDisabled:!1,nextDisabled:c.$3(a)})}};c.$3=function(a){var b=q.findDOMNode(c.refs.selectorRow);b=b.scrollWidth-b.parentNode.clientWidth;return a>=b};c.renderPack=function(a,b){return p.createElement(l,{disabled:c.props.isComments&&!a.isCommentsCapable||!c.props.isComments&&!a.isMessengerCapable,key:"pack-"+b,onclick:c.onPackSelect,pack:a,selected:a.id==c.state.selectedPack.id})};c.renderIndicator=function(){return!m.storeIndicator?null:p.createElement("div",{className:"_5e-s"})};c.$5=function(){return p.createElement("a",{"aria-label":w._("Previous Sticker Packs"),className:"_5cni _5abu",disabled:c.state.prevDisabled,href:"#",onClick:c.scrollPrev,ref:"prevButton",rel:"ignore",role:"button"},p.createElement("span",{className:"_5abw"}))};c.$6=function(){return p.createElement("a",{"aria-label":w._("Next Sticker Packs"),className:"_5cni _5abx",disabled:c.state.nextDisabled,href:"#",onClick:c.scrollNext,ref:"nextButton",rel:"ignore",role:"button"},p.createElement("span",{className:"_5aby"}))};c.$7=function(){c.setState({nextDisabled:c.$3(c.state.scrollLeft)})};c.$4=function(a){a=x();a&&a.blur()};c.$8=function(){__p&&__p();if(c.$1)return;var a=q.findDOMNode(c.refs.root);if(!a)return;if(j.bySigil(a,z)){var b=new s();b.addSubscriptions(h.listen(a,"touchmove",null,function(a){a.stop()}),r.listen("m:page:unload",null,function(){c.$9()}));j.bySigil(a,y)&&b.addSubscriptions(r.listen("m:feed-ufi-flyout:reset",null,function(){c.$9()}));c.$1=b}};c.$9=function(){c.$1&&c.$1.release(),c.$1=null};var d=null;if(m.packs&&m.packs.length)for(var e=0;e<m.packs.length;e++)if(!b.isComments&&m.packs[e].isMessengerCapable||b.isComments&&m.packs[e].isCommentsCapable){d=m.packs[e];break}c.state={selectedPack:d,prevDisabled:!0,nextDisabled:!1,scrollLeft:0};return c}var c=b.prototype;c.render=function(){__p&&__p();if(!this.props.isOpen)return null;var a=m.packs.length===0?p.createElement("div",{className:"_5ar_"},w._("No stickers available")):p.createElement(k,{pack:this.state.selectedPack,onSelect:this.props.callback,onScroll:this.onPackScroll,onInputFocus:this.onInputFocus,onInputBlur:this.onInputBlur,isComments:this.props.isComments,isFlyout:this.props.isFlyout}),b=m.packs,c=[];for(var d=0;d<b.length;d++)b[d]&&(this.props.isComments&&b[d].isCommentsCapable?c.push(b[d]):b[d].isMessengerCapable&&c.push(b[d]));b=c;b=b.map(this.renderPack,this);d=u.getURIBuilder().setString("redirect_uri",i.getRenderedPath()).setBool("is_comments",this.props.isComments).getURI();c=null;this.props.showStore&&(c=p.createElement("a",{className:"_5cni _5b3_",href:d.toString()},p.createElement("span",{className:"_5b40"}),this.renderIndicator()));d=t.isPlatform("Android <2.4");return p.createElement("div",{className:this.props.className,"data-testid":n.STICKER_SELECTOR_CONTENT,ref:"root"},p.createElement("div",{className:"_5as0"+(d?" _2-n8":""),ref:"selector"},p.createElement("div",{className:"_5as1",onScroll:this.state.inputFocused?this.$4:null},a),p.createElement("div",{className:"_5as2",ref:"selectorRow",style:{marginLeft:-this.state.scrollLeft}},p.createElement("div",{className:"_5as5"},b)),this.$5(),this.$6(),c))};c.componentDidMount=function(){this.props.isOpen&&(this.$8(),this.$7())};c.componentWillUnmount=function(){this.$9()};c.componentDidUpdate=function(a,b){if(this.props.isOpen){a.isOpen||this.$8();if(this.state.selectedPack!=b.selectedPack||this.props.isOpen!=a.isOpen){b=q.findDOMNode(this.refs.selector);j.bySigil(b,y)?r.invoke("MStickerSelector:show-sticker-selector",null,{selectorNode:b}):o.scrollToNodeIfNecessary(q.findDOMNode(this.refs.selector))}this.props.isOpen!=a.isOpen&&(this.$7(),g.log("MTouchStickersLoggerConfig",{event:"open_tray"}))}else a.isOpen&&this.$9()};return b}(p.Component);c.propTypes={callback:a.func.isRequired,isComments:a.bool.isRequired,isOpen:a.bool,onClose:a.func,showStore:a.bool.isRequired,isFlyout:a.bool};c.defaultProps={isComments:!0,showStore:!0};e.exports=c}),null);
__d("asset",[],(function(a,b,c,d,e,f){function a(a){throw new Error("asset("+JSON.stringify(a)+"): Unexpected asset reference.")}e.exports=a}),null);
__d("MStickerSelectorButton.react",["Image.react","React","asset","cx","fbt","ix"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();a=h.PropTypes;b=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isSelected:c.props.isSelected},c.onClick=function(a){c.setState({isSelected:!c.state.isSelected}),c.props.onClick&&c.props.onClick(a)},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.UNSAFE_componentWillUpdate=function(a,b){a!==this.props&&this.setState({isSelected:a.isSelected}),this.props.onToggle&&b!==this.state&&this.props.onToggle(b.isSelected)};c.render=function(){var a;!this.state.isSelected?a=l("90727"):a=l("90728");return h.createElement("button",{"aria-label":k._("Add Sticker"),type:"button",className:"_5ecn _1n29 _2fv6","data-sigil":"touchable",onClick:this.onClick},h.createElement(g,{src:a,className:"_2fv7"}),h.createElement(g,{src:this.state.isSelected?l("432358"):l("432368"),className:"_2fv8"}))};return b}(h.Component);b.propTypes={onToggle:a.func,isSelected:a.bool};b.defaultProps={isSelected:!1};e.exports=b}),null);
__d("MStickerMount",["BanzaiLogger","ClientIDs","CommentPrivacyValue","DOM","MAjaxify","MCommentStatusLogger","MRequest","MStickerSelector.react","MStickerSelectorButton.react","ReactComponentRenderer","Run","Stratcom","SubscriptionsHandler","requireWeak","$"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";__p&&__p();var v={logPost:function(a,b){return void 0}};t("MPrivateCommentsLogger",function(a){v=a});var w="m-textarea-input",x=function(a,b,c,d){__p&&__p();var e=new m(a.action);e.setMethod("POST");e.addData({client_id:h.getNewClientID(),sticker_id:b});var f=j.convertFormToDictionary(a);f.privacy_value&&e.addData({privacy_value:f.privacy_value});v.logPost(parseInt(f.privacy_value,10)===i.OWNER_OR_COMMENTER,a.id);if(c){f=l.newInteractionKey();l.logInitAndSubmitSticker(f,b);e.addData({logging_interaction_key:f});z(f)}k.ajaxify(null,a,e,"async_composer");r.invoke("m:ufi:sticker-comment",null,{textInput:d})},y=function(a,b,c,d,e,f,g){__p&&__p();g===void 0&&(g=!1);var h,i=new p(n,b);i.setProps({callback:d,isComments:e,onClose:function(){i&&i.setProps({isOpen:!1}),h&&h.setProps({isSelected:!1})},showStore:f,isFlyout:g});h=new p(o,a);h.setProps({onToggle:function(a){i.setProps({isOpen:a})}});var k=new s();k.addSubscriptions(j.listen(c,"focus",null,function(){h.setProps({isSelected:!1})}),r.listen("m:ufi:sticker-comment",null,function(){h.setProps({isSelected:!1})}));q.onLeave(function(){k.release(),h.unmount(),i.unmount()})};function z(a){__p&&__p();var b=new s();b.addSubscriptions(r.listen("m:ufi:live-comments:render",null,function(c){c=c.getData()||{};c=c.logKeys;c&&c.forEach(function(c){c===a&&(l.logRender(a),b.release())})}),r.listen("m:ufi:iui:comment-added",null,function(c){c=c.getData().loggingInteractionKey;c===a&&(l.logRender(a),b.release())}),r.listen("m:page:unload",null,function(){b.release()}));return b}a={initMessages:function(a,b,c,d){var e=u(c);c=function(a){var b=e.form,c=j.convertFormToDictionary(b);c.sticker_id=a;d.sendRequest(b.action,c)};y(a,b,e,c,!1,!0)},initCommentsFlyout:function(a,b,c,d,e){e===void 0&&(e=!1);var f=null;d&&(r.hasSigil(d,w)?f=d:f=j.scry(d,"*",w)[0]);f||(f=u(c));var h=f.form;b.onclick=function(){x(h,a,e,f),g.log("NullStateCommentsLoggerConfig",{event:"sticker_selection",sticker_id:a.toString()})}},initComments:function(a,b,c,d,e,f){e===void 0&&(e=!1);f===void 0&&(f=!1);var g=null;d&&(r.hasSigil(d,w)?g=d:g=j.scry(d,"*",w)[0]);g||(g=u(c));var h=g.form;d=function(a){x(h,a,e,g)};y(a,b,g,d,!0,!0,f)},initNewMessage:function(a,b,c,d){var e=function(a){d.sendSticker(a)};y(a,b,c,e,!1,!1)}};e.exports=a}),null);
__d("MGraphApiVideoUploader",["FBJSON","URI","UrlMap","ZeroUploadSubdomainModule"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=10;a=function(){"use strict";__p&&__p();function a(a,b,c,d,e,f,g){this.$1=a,this.$3=b,this.$2=c,this.$13=d,this.$6=this.$1.size,this.$7=this.$1.name,this.$8=e,this.$9=f,this.$10=g,this.$11=!1}var b=a.prototype;b.startUploading=function(a){__p&&__p();var b=this;a===void 0&&(a=k);var c=new FormData();c.append("file_size",this.$6);c.append("title",this.$7);c.append("upload_phase","start");c.append("access_token",this.$3);this.$13&&c.append("is_voice_clip",this.$13);var d=function(c){if(b.$11)return;if(!c||c.error){a==0?b.$9(c.error.error_user_msg):b.startUploading(a-1);return}b.$4=c.upload_session_id;b.$5=c.video_id;b.sendFileChunk(c.start_offset,c.end_offset,k)};this.postRequest("v2.4/"+this.$2+"/videos","POST",c,k,d)};b.getChunk=function(a,b){return this.$1.slice(a,b)};b.sendFileChunk=function(a,b,c){__p&&__p();var d=this;c===void 0&&(c=k);if(this.$11)return;var e=new FormData();e.append("upload_phase","transfer");e.append("start_offset",a);e.append("upload_session_id",this.$4);e.append("access_token",this.$3);e.append("video_file_chunk",this.getChunk(a,b));var f=function(e){__p&&__p();if(d.$11)return;if(!e||e.error){if(c==0){d.$9(e.error.error_user_msg);return}else d.sendFileChunk(a,b,c-1);return}d.$14(e)},g=this.$8&&function(c){var e=parseInt(a,10),f=parseInt(b,10);c=c.loaded/c.total;f=f-e;d.$8(Math.floor(e+c*f))};this.postRequest("v2.4/"+this.$2+"/videos","POST",e,k,f,g)};b.$14=function(a){a.start_offset!=a.end_offset?this.sendFileChunk(a.start_offset,a.end_offset,k):this.$9(!0)};b.postRequest=function(a,b,c,d,e,f){__p&&__p();var l=this,m=i.resolve("graph")+"/"+a,n=j.subdomain;n!==""&&(m=new h(m).setSubdomain(n).toString());c.pretty=c.pretty||0;this.$12=new XMLHttpRequest();this.$12.onload=function(){var a=g.parse(l.$12.responseText);e(a)};f&&(this.$12.upload.onprogress=f);this.$12.onerror=function(){if(d==0){l.$10!==null&&l.$10();return}setTimeout(function(){this.postRequest(a,b,c,d-1,e)}.bind(l),1e3*Math.pow(2,k-d))};this.$12.open("post",m);this.$12.send(c)};b.getVideoID=function(){return this.$5};b.abort=function(){this.$11=!0,this.$12!==null&&this.$12.abort()};return a}();e.exports=a}),null);
__d("areEqual",[],(function(a,b,c,d,e,f){__p&&__p();var g=[],h=[];function a(a,b){var c=g.length?g.pop():[],d=h.length?h.pop():[];a=i(a,b,c,d);c.length=0;d.length=0;g.push(c);h.push(d);return a}function i(a,b,c,d){__p&&__p();if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return!1;if(typeof a!=="object"||typeof b!=="object")return!1;var e=Object.prototype.toString,f=e.call(a);if(f!=e.call(b))return!1;switch(f){case"[object String]":return a==String(b);case"[object Number]":return isNaN(a)||isNaN(b)?!1:a==Number(b);case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}e=c.length;while(e--)if(c[e]==a)return d[e]==b;c.push(a);d.push(b);e=0;if(f==="[object Array]"){e=a.length;if(e!==b.length)return!1;while(e--)if(!i(a[e],b[e],c,d))return!1}else{if(a.constructor!==b.constructor)return!1;if(Object.prototype.hasOwnProperty.call(a,"valueOf")&&Object.prototype.hasOwnProperty.call(b,"valueOf"))return a.valueOf()==b.valueOf();f=Object.keys(a);if(f.length!=Object.keys(b).length)return!1;for(var e=0;e<f.length;e++){if(f[e]==="_owner")continue;if(!Object.prototype.hasOwnProperty.call(b,f[e])||!i(a[f[e]],b[f[e]],c,d))return!1}}c.pop();d.pop();return!0}e.exports=a}),null);