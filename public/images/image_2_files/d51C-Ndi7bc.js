if (self.CavalryLogger) { CavalryLogger.start_js(["QmB0A"]); }

__d("MAddFriendNew",["DOM","MFriendingState","Stratcom"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j="m-add-friend-flyout",k="m-cancel-request";a=function(){"use strict";__p&&__p();function a(a,b,c){this.unit=c,this.userid=b,i.listen(h.REQUEST_SENT,null,this.onFriendRequestSent.bind(this)),i.listen(h.REQUEST_CANCELED,null,this.onFriendRequestCanceled.bind(this))}var b=a.prototype;b.onFriendRequestCanceled=function(a){a=a.getData();if(!a||a.userid!==this.userid)return;a=g.scry(this.unit,"*",j)[0];var b=g.scry(this.unit,"*",k)[0];g.show(a);g.hide(b)};b.onFriendRequestSent=function(a){a=a.getData();if(!a||a.userid!==this.userid)return;a=g.scry(this.unit,"*",j)[0];var b=g.scry(this.unit,"*",k)[0];g.hide(a);g.show(b)};return a}();e.exports=a}),null);
__d("MFriendDynamicSubtitle",["DOM","MAnimation","MFriendingActionError","MFriendingState","MParent","Stratcom","cx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n="undoable-action",o="m-add-friend-request-sent",p="m-friend-request-canceled",q="m-friend-unfriended",r="m-add-friend-source-replaceable",s="m-friend-request-highlight-notice";a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b,this.$3=k.bySigil(a,n),this.$4=[l.listen([i.SEND_OUTGOING_REQUEST_ERROR,i.CANCEL_OUTGOING_REQUEST_ERROR,j.REQUEST_SENT,j.REQUEST_CANCELED,j.UNFRIENDED],null,this.$5.bind(this)),l.listen("m:page:unload",null,this.$6.bind(this)),l.listen("friending_state_change",null,this.$7.bind(this))]}var b=a.prototype;b.$7=function(a){a=a.getData();if(!a||!a.userid||a.userid!=this.$2)return;if(!a.error)return;this.$8(a.error)};b.$5=function(a){var b=a.getData();if(!b||!b.userid||b.userid!=this.$2)return;b=a.getType();this.$8(b)};b.$8=function(a){this.$9(),a===j.REQUEST_SENT||a===i.CANCEL_OUTGOING_REQUEST_ERROR?this.$10(o):a===j.REQUEST_CANCELED?this.$10(p):a===j.UNFRIENDED?this.$10(q):a===i.SEND_OUTGOING_REQUEST_ERROR&&this.$10(r),this.$11()};b.$9=function(){this.$12(o),this.$12(r),this.$12(p),this.$12(q)};b.$12=function(a){a=g.scry(this.$3,"*",a)[0];a&&g.hide(a)};b.$10=function(a){a=g.scry(this.$3,"*",a)[0];a&&g.show(a)};b.$11=function(){var a=g.scry(this.$3,"*",s)[0];a&&h.animate(a,"_4z0z",4e3)};b.$6=function(){for(var a=0;a<this.$4.length;a++)this.$4[a].remove()};return a}();e.exports=a}),null);
__d("MFriendingAutoScroll",["MAnimator","MFriendingState","MViewport","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=400,l=101,m,n,o,p;function a(){r();var a=j.listen("m:page:unload",null,function(){a.remove(),s()})}function q(){var a=i.getScrollPos().y,b=function(b){i.scrollTo(0,a+b*l)};new g().start(b,null,function(){},k)}function r(){s(!0),m=j.listen([h.REQUEST_SENT],null,q),n=j.listen("click","confirm-request",q),o=j.listen("click",["nav-popover","feed"],s),p=j.listen("click",["nav-popover","requests","icon"],r)}function s(a){a===void 0&&(a=!1),m&&m.remove(),n&&n.remove(),o&&o.remove(),a===!0&&p&&p.remove()}e.exports={setup:a}}),null);
__d("MFriendsActionBubble",["DOM","MLegacyDataStore","MURI","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k="m-unfriend-request",l="/friendlists/edit",m="manage-friend-list",n="m-follow-request",o="m-unfollow-request";a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=null}var b=a.prototype;b.enable=function(){this.$2=[j.listen("click","are-friends-popup",this.$3.bind(this)),j.listen("click",m,this.$4.bind(this))]};b.$3=function(a){var b=this.$1.getContentRoot(),c=a.getNode("popup-action-trigger"),d=g.scry(b,"*",k)[0];this.$5(c,d,a);d=g.scry(b,"*",m)[0];this.$5(c,d,a);this.$6(c,b,a)};b.$6=function(a,b,c){var d=h.get(a).is_following;if(d===null)return;var e=g.scry(b,"*",o)[0];this.$5(a,e,c);b=g.scry(b,"*",n)[0];this.$5(a,b,c);d?(g.show(e),g.hide(b)):(g.show(b),g.hide(e))};b.$5=function(a,b,c){if(!a||!b)return;a=h.get(a);a.flyoutEvent=c;h.set(b,a)};b.$7=function(a,b){window.FW_ENABLED||!window.APP_ENABLED?(b.kill(),window.location.href=a.toString()):j.invoke("go",null,{uri:a})};b.$4=function(a){var b=h.get(a.getNode(m));b=new i(l).setQueryData({subject_id:b.id,ref_param:b.manage_list_ref});this.$7(b,a)};b.disable=function(){while(this.$2.length)this.$2.pop().remove()};return a}();e.exports=a}),null);
__d("MOptimisticRequestResponse",["DOM","MLegacyDataStore","MRequest","MURI","Stratcom","qex"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();function a(a){__p&&__p();var b,c,d=m(a);if(c=a.getNode("ignore-request"))b="ignore";else if(c=a.getNode("confirm-request"))b="confirm";else if(a.getNode("mark-spam")){var e=g.scry(d,"*","m-optimistic-response-ignore");n(e);return}else throw new Error("use ignore-request, confirm-request or mark-spam sigils for actions");e=h.get(c);if(!e||!e.optimistic_uri)throw new Error("add meta to buttons with optimistic_uri set");e.flyoutEvent&&(a=e.flyoutEvent);var f=h.get(d),l=f.optimistic_category;if(!l)throw new Error("set optimistic_category meta on root node to separate listeners for optimistic responses");var p=g.scry(d,"*","m-optimistic-response-action"),q=g.scry(d,"*","m-optimistic-response-confirm"),r=g.scry(d,"*","m-optimistic-response-ignore");c=new i(new j(e.optimistic_uri)).setData(e.optimistic_post_data||{}).setMethod("POST");var s={event:a,action:b,action_sections:p,confirm_sections:q,ignore_sections:r,root_node:d};c.listen("start",function(){k.invoke("m:requests:refresh"),k.invoke("m:optimistic-request-response:click",l,s),f.userid&&k.invoke("friending_state_change",null,{userid:f.userid,action:b})});c.listen("postprocess",function(){k.invoke("m:requests:refresh"),k.invoke("m:optimistic-request-response:success",l,s)});c.listen("error",function(){o(p),n(q),n(r)});c.setFailureLogging("friend_response_"+b);c.send()}function m(a){a=a.getNode("m-optimistic-response-root");if(!a)throw new Error("no parent element with m-optimistic-response-root sigil");return a}function n(a){a.forEach(function(a){g.hide(a)})}function o(a){a.forEach(function(a){g.show(a)})}k.listen("click","confirm-request",a);k.listen("click","ignore-request",a);l._("829318")&&k.listen("click","mark-spam",a);e.exports={showAll:o,hideAll:n}}),null);
__d("MOptimisticFriendingResponse",["DOM","MFriendingActionError","MOptimisticRequestResponse","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b,c){this.id=a,this.userid=b,this.inJewel=c,this.listeners=[j.listen("friending_state_change",null,this.onFriendStateChange.bind(this)),j.listen("m:page:unload",null,this.cleanup.bind(this))]}var b=a.prototype;b.onFriendStateChange=function(a){__p&&__p();a=a.getData();if(a.userid!=this.userid)return;var b=document.getElementById(this.id);if(!b)return;var c=g.scry(b,"*","m-optimistic-response-action"),d=g.scry(b,"*","m-optimistic-response-confirm");b=g.scry(b,"*","m-optimistic-response-ignore");switch(a.error){case h.CONFIRM_INCOMING_REQUEST_ERROR:case h.DELETE_INCOMING_REQUEST_ERROR:i.showAll(c);i.hideAll(b);i.hideAll(d);return}i.hideAll(c);switch(a.action){case"confirm":i.showAll(d);i.hideAll(b);break;case"ignore":case"reject":i.showAll(b);i.hideAll(d);break;default:return}};b.cleanup=function(){if(this.inJewel)return;for(var a=0;a<this.listeners.length;a++)this.listeners[a].remove();this.listeners=[]};return a}();e.exports=a}),null);
__d("MXoutPYMKSuggestions",["CSS","DOM","KaiOSSpatialNavEvents","MPymkFunnelLogger","Parent","Stratcom","Style","csx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o="removed_item_hidden_event",p="/find-friends/index.php";function a(a){a=a.getNode("m-xout-pymk-suggestions");a=k.bySelector(a,"._5pxa");g.hide(a);l.invoke(o,null,null);var b=a.getAttribute("data-pymk-id"),c=a.getAttribute("data-pymk-loc");if(b&&c===p){a=a.getAttribute("data-signature");j.logXOut(b,a,c)}}function b(a){__p&&__p();a=a.getNode("m-add-friend");if(!a)return;a=k.bySelector(a,"._5pxa");if(!a)return;a=h.scry(a,"*","m-xout-pymk-suggestions")[0];if(!a)return;m.apply(a,{visibility:"hidden"})}l.listen("click","m-add-friend",b);l.listen("click","m-xout-pymk-suggestions",a);e.exports={}}),null);
__d("MRequestsJewelFriendConfirmedNotif",["CSS","DOM","MRequest","MURI","Stratcom","cx"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();a={_viewerID:null,_unseenNotifIDs:[],_notifMarkReadListener:null,_notifToggleListener:null,_slaves:null,_master:null,_slaveShown:!1,_unread:!1,_notifStatusSet:!1,updateUnseenNotifIDs:function(a,b,c){this._viewerID=b,this._unread=c,this._unseenNotifIDs=a,this._shown=!1,this._notifStatusSet=!1,this._notifMarkReadListener===null&&(this._notifMarkReadListener=k.listen("m_requests_jewel_mark_read",null,this.setNotifsRead.bind(this))),this._notifToggleListener===null&&(this._master===null&&(this._master=h.scry(document.body,"div","m_requests_jewel_accept_notif_master")[0]),this._slaves===null&&(this._slaves=h.scry(document.body,"div","m_requests_jewel_accept_notif_slave")[0]),this._notifToggleListener=k.listen("click","m_requests_jewel_accept_notif_master",function(){this._unread&&(g.removeClass(this._master,"_uss"),this._unread=!1),this._notifStatusSet||(this.setNotifsRead,this._notifStatusSet=!0),this._slaveShown&&this._slaves!==void 0?(g.hide(this._slaves),this._slaveShown=!1):(g.show(this._slaves),this._slaveShown=!0)}.bind(this)))},setNotifsRead:function(){if(this._notifStatusSet||this._unseenNotifIDs.length===0)return;var a=new i(new j("/a/jewel_notifications_read.php").toString());a.addData({ids:this._unseenNotifIDs,count:this._unseenNotifIDs.length,seen:!1});a.send();this._notifStatusSet=!0}};e.exports=a}),null);
__d("MLayerHideOnScroll",["Stratcom"],(function(a,b,c,d,e,f,g){__p&&__p();var h=5;a=function(){"use strict";__p&&__p();function a(a){this.$1=null,this.$2=null,this.$3=a,this.$4=null}var b=a.prototype;b.enable=function(){this.$1=[this.$3.addListener("show",this.$5.bind(this)),this.$3.addListener("hide",this.$6.bind(this))],this.$3.isShown()&&this.$5()};b.disable=function(){this.$6();while(this.$1.length)this.$1.pop().remove();this.$1=null};b.$6=function(){this.$2&&this.$2.remove()};b.$5=function(){var a=this,b=window;this.$4=b.scrollY;this.$2=g.listen("scroll",null,function(){var c=b.scrollY;Math.abs(a.$4-c)>=h&&a.$3.hide()})};return a}();e.exports=a}),null);